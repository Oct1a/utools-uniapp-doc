[{"t":"基础/日志打印","d":" console\r\n向控制台打印日志信息。\r\n debug\r\n向控制台打印 debug 日志\r\n\r\n注：App 端自定义组件模式下，debug 方法等同于 log 方法。\r\n log\r\n向控制台打印 log 日志\r\n info\r\n向控制台打印 info 日志\r\n warn\r\n向控制台打印 warn 日志\r\n error\r\n向控制台打印 error 日志\r\n\r\n注意：\r\n\r\n- 不同平台对于 console 方法的支持存在差异，建议在开发过程中只使用文档中提到的方法。\r\n- HBuilderX中有2个重要的代码块，敲`clog`：可直接输出`console.log()`；敲`clogv`：可输出`console.log(\": \" + );`，并且出现双光标，方便把变量名称和值同时打印出来。\r\n- HBuilderX 1.9.7 以上的自定义组件模式，在App端支持打印对象信息到控制台。老版本可使用`clogj`代码块将json对象转为字符串打印出来。\r\n","p":"command\\基础 - 日志打印.html"},{"t":"基础/定时器","d":" setTimeout(callback, delay, rest)\n\n设定一个定时器。在定时到期以后执行注册的回调函数\n\n**参数说明**\n\n|参数|类型|必填|说明|\n|:-|:-|:-|:-|\n|callback|Function|是|回调函数|\n|delay|Number|否|延迟的时间，函数的调用会在该延迟之后发生，单位 ms|\n|rest|Any|否|param1, param2, ..., paramN 等附加参数，它们会作为参数传递给回调函数|\n\n\n**返回值**\n\n|返回值|类型|说明|\n|:-|:-|:-|\n|timeoutID|Number|定时器的编号，这个值可以传递给 [clearTimeout](/api/timer?id=cleartimeout) 来取消该定时|\n\n clearTimeout(timeoutID)\n\n取消由 setTimeout 设置的定时器。\n\n**参数说明**\n\n|参数|类型|必填|说明|\n|:-|:-|:-|:-|\n|timeoutID|Number|是|要取消的定时器的 ID|\n\n\n setInterval(callback, delay, rest)\n设定一个定时器。按照指定的周期（以毫秒计）来执行注册的回调函数\n\n**参数说明**\n\n|参数|类型|必填|说明|\n|:-|:-|:-|:-|\n|callback|Function|是|回调函数|\n|delay|Number|否|延迟的时间，函数的调用会在该延迟之后发生，单位 ms|\n|rest|Any|否|param1, param2, ..., paramN 等附加参数，它们会作为参数传递给回调函数|\n\n\n**返回值**\n\n|返回值|类型|说明|\n|:-|:-|:-|\n|intervalID|Number|定时器的编号，这个值可以传递给 [clearInterval](/api/timer?id=clearinterval) 来取消该定时|\n\n\n clearInterval(intervalID)\n\n取消由 setInterval 设置的定时器。\n\n**参数说明**\n\n|参数|类型|必填|说明|\n|:-|:-|:-|:-|\n|intervalID|Number|是|要取消的定时器的 ID|\n\n 注意事项\n* App 端返回的定时器编号可能为 String 类型，使用时无需主动转换为 Number 类型","p":"command\\基础 - 定时器.html"},{"t":"基础/uni.base64ToArrayBuffer","d":" uni.base64ToArrayBuffer(base64)\n\n将 Base64 字符串转成 ArrayBuffer 对象\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|√|x|√|x|x|x|\n\n**参数说明**\n\n|参数|类型|必填|说明|\n|:-|:-|:-|:-|\n|base64|String|是|要转化成 ArrayBuffer 对象的 Base64 字符串|\n\n**示例**\n\n```javascript\nconst base64 = 'test'\nconst arrayBuffer = uni.base64ToArrayBuffer(base64)\n```","p":"command\\基础 - uni.base64ToArrayBuffer.html"},{"t":"基础/uni.arrayBufferToBase64","d":" uni.arrayBufferToBase64(arrayBuffer)\n\n将 ArrayBuffer 对象转成 Base64 字符串\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|√|x|√|x|x|x|\n\n**参数说明**\n\n|参数|类型|必填|说明|\n|:-|:-|:-|:-|\n|arrayBuffer|ArrayBuffer|是|要转换成 Base64 字符串的 ArrayBuffer 对象|\n\n**示例**\n\n```javascript\nconst arrayBuffer = new Uint8Array([55, 55, 55])\nconst base64 = uni.arrayBufferToBase64(arrayBuffer)\n```","p":"command\\基础 - uni.arrayBufferToBase64.html"},{"t":"基础/生命周期","d":" 应用生命周期\n\n``uni-app`` 支持 onLaunch、onShow、onHide 等应用生命周期函数，详情请参考[应用生命周期](/collocation/frame/lifecycle?id=应用生命周期)\n\n 页面生命周期\n\n``uni-app`` 支持 onLoad、onShow、onReady 等生命周期函数，详情请参考[页面生命周期](/collocation/frame/lifecycle?id=页面生命周期)","p":"command\\基础 - 生命周期.html"},{"t":"基础/应用级事件","d":" uni.onPageNotFound(function callback)\r\n\r\n监听应用要打开的页面不存在事件。该事件与 `App.onPageNotFound` 的回调时机一致\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|x|x|√|x|√|x|√|\r\n\r\n 参数\r\n\r\n**function callback**\r\n\r\n要打开的页面不存在事件的回调函数\r\n\r\n 参数\r\n\r\n|属性|类型|说明|\r\n|:-:|:-:|:-:|\r\n|path|String|不存在页面的路径 (代码包路径)|\r\n|query|Object|打开不存在页面的 query 参数|\r\n|isEntryPage|Boolean|是否本次启动的首个页面（例如从分享等入口进来，首个页面是开发者配置的分享页面）\t|\r\n\r\n**注意**\r\n- 开发者可以在回调中进行页面重定向，但必须在回调中同步处理，异步处理（例如 `setTimeout` 异步执行）无效。\r\n- 若开发者没有调用 `uni.onPageNotFound` 绑定监听，也没有声明 `App.onPageNotFound`，当跳转页面不存在时，将推入客户端原生的页面不存在提示页面。\r\n- 如果回调中又重定向到另一个不存在的页面，将推入客户端原生的页面不存在提示页面，并且不再第二次回调。\r\n- 在除了 `App.vue` 的其他时机中调用 `uni.onPageNotFound` 的话，需要用uni.offPageNotFound取消监听，否则会出现监听多次的情况\r\n\r\n uni.onError(function callback)\r\n\r\n监听小程序错误事件。如脚本错误或 `API` 调用报错等。该事件与 `App.onError` 的回调时机与参数一致。\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|x|x|√|x|√|√|√|\r\n\r\n 参数\r\n\r\n**function callback**\r\n\r\n应用错误事件的回调函数\r\n\r\n 参数\r\n**string error**\r\n\r\n错误信息，包含堆栈\r\n\r\n uni.onAppShow(function callback)\r\n\r\n监听应用切前台事件。该事件与 `App.onShow` 的回调参数一致。\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|x|x|√|√|√|√|√|\r\n\r\n**支付宝小程序使用说明：**\r\n\r\n- 由于开发者工具版本限制，目前本 API 暂不支持在开发者工具调试和真机调试，仅支持真机预览。开发者请调至 预览 模式，在支付宝客户端扫码查看效果。\r\n- 请勿使用 API 监听匿名函数，否则将无法关闭监听。\r\n\r\n 参数\r\n\r\n**function callback**\r\n\r\n应用切前台事件的回调函数\r\n\r\n 参数\r\n\r\n|属性|类型|说明|平台差异说明|\r\n|:-:|:-:|:-:|:-:|\r\n|path|String|应用切前台的路径 (代码包路径)||\r\n|scene|Number|应用切前台的场景值||\r\n|query|Object\t|应用切前台的 query 参数||\r\n|shareTicket|String\t|shareTicket|微信小程序|\r\n|referrerInfo|String|来源信息||\r\n|entryType|String|页面展现的来源标识，可取的值为: 'user'、'schema'、'sys'，对应代表的意义如下表。|百度小程序 2.10.7+|\r\n|appURL|String|展现时的调起协议，仅当entryType值为 schema 时存在。|百度小程序 2.10.7+|\r\n|entryDataHash|String|群入口信息，通过群应用商店打开、群分享卡片打开的小程序可获得。|qq小程序|\r\n\r\n**referrerInfo 的结构**\r\n\r\n|属性|类型|说明|平台差异说明|\r\n|:-:|:-:|:-:||\r\n|appId|String|来源小程序的appId||\r\n|extraData|Object|来源小程序传过来的数据|微信小程序和qq小程序 scene=1037或1038时支持|\r\n\r\n uni.onAppHide(function callback)\r\n\r\n监听应用切后台事件。该事件与 `App.onHide` 的回调参数一致。\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|x|x|√|√|√|√|√|\r\n\r\n**支付宝小程序使用说明：**\r\n\r\n- 由于开发者工具版本限制，目前本 API 暂不支持在开发者工具调试和真机调试，仅支持真机预览。开发者请调至 预览 模式，在支付宝客户端扫码查看效果。\r\n- 请勿使用 API 监听匿名函数，否则将无法关闭监听。\r\n\r\n 参数\r\n\r\n**function callback**\r\n\r\n应用切后台事件的回调函数\r\n\r\n uni.offPageNotFound(function callback)\r\n\r\n取消监听应用要打开的页面不存在事件。\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|x|x|√|x|√|x|√|\r\n\r\n 参数\r\n\r\n**function callback**\r\n\r\n应用要打开的页面不存在事件的回调函数\r\n\r\n uni.offError(function callback)\r\n\r\n取消监听应用错误事件。\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|x|x|√|x|√|√|√|\r\n\r\n 参数\r\n\r\n**function callback**\r\n\r\n应用错误事件的回调函数\r\n\r\n uni.offAppShow(function callback)\r\n\r\n取消监听小程序切前台事件。\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|x|x|√|√|√|√|√|\r\n\r\n 参数\r\n\r\n**function callback**\r\n\r\n应用切前台事件的回调函数\r\n\r\n uni.offAppHide(function callback)\r\n\r\n取消监听小程序切后台事件。\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|x|x|√|√|√|√|√|\r\n\r\n 参数\r\n\r\n**function callback**\r\n\r\n应用切后台事件的回调函数\r\n","p":"command\\基础 - 应用级事件.html"},{"t":"基础/拦截器","d":" uni.addInterceptor(STRING, OBJECT)\n添加拦截器\n\n**STRING 参数说明**\n\n需要拦截的`api`名称，如：`uni.addInterceptor('request', OBJECT)` ，将拦截 `uni.request()`\n\n**OBJECT 参数说明**\n\n|参数名\t\t|类型\t\t\t|必填\t|默认值\t|说明\t\t\t\t\t|平台差异说明\t|\n|:-\t\t\t\t|:-\t\t\t\t|:-\t\t|:-\t\t\t|:-\t\t\t\t\t\t|:-\t\t\t\t\t\t|\n|invoke\t\t|Function\t|否\t\t|\t\t\t\t|拦截前触发\t\t|\t\t\t\t\t\t\t|\n|success\t|Function\t|否\t\t|\t\t\t\t|成功回调拦截\t|\t\t\t\t\t\t\t|\n|fail\t\t\t|Function\t|否\t\t|\t\t\t\t|失败回调拦截\t|\t\t\t\t\t\t\t|\n|complete\t|Function\t|否\t\t|\t\t\t\t|完成回调拦截\t|\t\t\t\t\t\t\t|\n\n\n**示例**\n\n```javascript\nuni.request({\n    url: 'request/login', //仅为示例，并非真实接口地址。\n    success: (res) => {\n        console.log(res.data);\n        // 打印： {code:1,...}\n    }\n});\n\n\nuni.addInterceptor('request', {\n  invoke(args) {\n    // request 触发前拼接 url \n    args.url = 'https://www.example.com/'+args.url\n  },\n  success(args) {\n    // 请求成功后，修改code值为1\n    args.data.code = 1\n  }, \n  fail(err) {\n    console.log('interceptor-fail',err)\n  }, \n  complete(res) {\n    console.log('interceptor-complete',res)\n  }\n})\n\n```\n\n uni.removeInterceptor(STRING)\n删除拦截器\n\n**STRING 参数说明**\n\n需要删除拦截器的`api`名称\n\n**示例**\n\n```javascript\n\nuni.removeInterceptor('request')\n\n```\n\n 拦截器的适用场景非常多，比如路由拦截，权限引导等。\n> 你可以参考插件市场,拦截器应用示例：图片选择api时无权限，引导用户快捷打开系统设置：[https://ext.dcloud.net.cn/plugin?id=5095](https://ext.dcloud.net.cn/plugin?id=5095)","p":"command\\基础 - 拦截器.html"},{"t":"基础/全局API","d":" uniIDHasRole\n\n新增于`HBuilderX 3.1.15-alpha`，判断当前用户是否拥有某角色。\n\n> 需要在token内缓存角色权限才可使用，请参考：[缓存角色权限](https://uniapp.dcloud.net.cn/uniCloud/uni-id?id=cachepermissionintoken)\n\n**在模板内使用**\n\n```html\n<template>\n  <view v-if=\"uniIDHasRole('admin')\">仅管理员可见</view>\n</template>\n```\n\n**在页面/组件js代码中使用**\n\n```html\n<template>\n  <view>xxx</view>\n</template>\n<script>\n  export default {\n    onLoad(){\n      console.log('当前用户是否拥有管理员角色：', this.uniIDHasRole('admin'))\n    }\n  }\n</script>\n```\n\n uniIDHasPermission\n\n新增于`HBuilderX 3.1.15-alpha`，判断当前用户是否拥有某权限，注意：admin角色的用户拥有所有权限\n\n> 需要在token内缓存角色权限才可使用，请参考：[缓存角色权限](https://uniapp.dcloud.net.cn/uniCloud/uni-id?id=cachepermissionintoken)\n\n**在模板内使用**\n\n```html\n<template>\n  <view v-if=\"uniIDHasPermission('edit')\">拥有编辑权限时可见</view>\n</template>\n```\n\n**在页面/组件js代码中使用**\n\n```html\n<template>\n  <view>xxx</view>\n</template>\n<script>\n  export default {\n    onLoad(){\n      console.log('当前用户是否拥有编辑权限：', this.uniIDHasPermission('edit'))\n    }\n  }\n</script>\n```","p":"command\\基础 - 全局API.html"},{"t":"网络/发起请求","d":" uni.request(OBJECT)\r\n发起网络请求。\r\n\r\n> 在各个小程序平台运行时，网络相关的 API 在使用前需要配置域名白名单。\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|默认值|说明|平台差异说明|\r\n|:-|:-|:-|:-|:-|:-|\r\n|url|String|是||开发者服务器接口地址||\r\n|data|Object/String/ArrayBuffer|否||请求的参数|App（自定义组件编译模式）不支持ArrayBuffer类型|\r\n|header|Object|否||设置请求的 header，header 中不能设置 Referer。|App、H5端会自动带上cookie，且H5端不可手动修改|\r\n|method|String|否|GET|有效值详见下方说明||\r\n|timeout|Number|否|60000|超时时间，单位 ms|H5(HBuilderX 2.9.9+)、APP(HBuilderX 2.9.9+)、微信小程序（2.10.0）、支付宝小程序|\r\n|dataType|String|否|json\t|如果设为 json，会尝试对返回的数据做一次 JSON.parse||\r\n|responseType|String|否|text\t|设置响应的数据类型。合法值：text、arraybuffer|支付宝小程序不支持|\r\n|sslVerify|Boolean|否|true|验证 ssl 证书|仅App安卓端支持（HBuilderX 2.3.3+）|\r\n|withCredentials|Boolean|否|false|跨域请求时是否携带凭证（cookies）|仅H5支持（HBuilderX 2.6.15+）|\r\n|firstIpv4|Boolean|否|false|DNS解析时优先使用ipv4|仅 App-Android 支持 (HBuilderX 2.8.0+)|\r\n|success|Function|否||收到开发者服务器成功返回的回调函数||\r\n|fail|Function|否||接口调用失败的回调函数||\r\n|complete|Function|否||接口调用结束的回调函数（调用成功、失败都会执行）|&nbsp;|\r\n\r\n**method 有效值**\r\n\r\n必须大写，有效值在不同平台差异说明不同。\r\n\r\n|method|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|GET|√|√|√|√|√|√|\r\n|POST|√|√|√|√|√|√|\r\n|PUT|√|√|√|x|√|√|\r\n|DELETE|√|√|√|x|√|x|\r\n|CONNECT|x|√|√|x|x|x|\r\n|HEAD|x|√|√|x|√|x|\r\n|OPTIONS|√|√|√|x|√|x|\r\n|TRACE|x|√|√|x|x|x|\r\n\r\n**success 返回参数说明**\r\n\r\n|参数|类型|说明|\r\n|:-|:-|:-|\r\n|data|Object/String/ArrayBuffer|开发者服务器返回的数据|\r\n|statusCode|Number|开发者服务器返回的 HTTP 状态码|\r\n|header|Object|开发者服务器返回的 HTTP Response Header|\r\n|cookies|``Array.<string>``|开发者服务器返回的 cookies，格式为字符串数组|\r\n\r\n**data 数据说明**\r\n\r\n最终发送给服务器的数据是 String 类型，如果传入的 data 不是 String 类型，会被转换成 String。转换规则如下：\r\n\r\n- 对于 ``GET`` 方法，会将数据转换为 query string。例如 ``{ name: 'name', age: 18 }`` 转换后的结果是 ``name=name&age=18``。\r\n- 对于 ``POST`` 方法且 ``header['content-type']`` 为 ``application/json`` 的数据，会进行 JSON 序列化。\r\n- 对于 ``POST`` 方法且 ``header['content-type']`` 为 ``application/x-www-form-urlencoded`` 的数据，会将数据转换为 query string。 \r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.request({\r\n    url: 'https://www.example.com/request', //仅为示例，并非真实接口地址。\r\n    data: {\r\n        text: 'uni.request'\r\n    },\r\n    header: {\r\n        'custom-header': 'hello' //自定义请求头信息\r\n    },\r\n    success: (res) => {\r\n        console.log(res.data);\r\n        this.text = 'request success';\r\n    }\r\n});\r\n```\r\n\r\n**返回值**\r\n\r\n如果希望返回一个 `requestTask` 对象，需要至少传入 success / fail / complete 参数中的一个。例如：\r\n\r\n```javascript\r\nvar requestTask = uni.request({\r\n\turl: 'https://www.example.com/request', //仅为示例，并非真实接口地址。\r\n\tcomplete: ()=> {}\r\n});\r\nrequestTask.abort();\r\n```\r\n\r\n如果没有传入 success / fail / complete 参数，则会返回封装后的 Promise 对象：[Promise 封装](/api/README?id=promise-%E5%B0%81%E8%A3%85)\r\n\r\n通过 `requestTask`，可中断请求任务。\r\n\r\n**requestTask 对象的方法列表**\r\n\r\n|方法|参数|说明|\r\n|:-|:-|:-|\r\n|abort||中断请求任务|\r\n|offHeadersReceived||取消监听 HTTP Response Header 事件，仅`微信小程序平台`支持，[文档详情](https://developers.weixin.qq.com/miniprogram/dev/api/RequestTask.offHeadersReceived.html)|\r\n|onHeadersReceived||监听 HTTP Response Header 事件。会比请求完成事件更早，仅`微信小程序平台`支持，[文档详情](https://developers.weixin.qq.com/miniprogram/dev/api/RequestTask.onHeadersReceived.html)|\r\n\r\n**示例**\r\n\r\n```javascript\r\nconst requestTask = uni.request({\r\n\turl: 'https://www.example.com/request', //仅为示例，并非真实接口地址。\r\n\tdata: {\r\n        name: 'name',\r\n        age: 18\r\n\t},\r\n\tsuccess: function(res) {\r\n\t\tconsole.log(res.data);\r\n\t}\r\n});\r\n\r\n// 中断请求任务\r\nrequestTask.abort();\r\n```\r\n\r\n**Tips**\r\n\r\n- 请求的 ``header`` 中 ``content-type`` 默认为 ``application/json``。\r\n- 避免在 ``header`` 中使用中文，或者使用 encodeURIComponent 进行编码，否则在百度小程序报错。（来自：[快狗打车前端团队](https://juejin.im/user/2612095359650712)）\r\n- 网络请求的 ``超时时间`` 可以统一在 ``manifest.json`` 中配置 [networkTimeout](/collocation/manifest?id=networktimeout)。\r\n- H5 端本地调试需注意跨域问题，参考：[调试跨域问题解决方案](https://ask.dcloud.net.cn/article/35267)\r\n- 注意由于百度小程序iOS客户端，请求失败时会进入fail回调，需要针对百度增加相应的处理以解决该问题。\r\n- 注意小程序端不支持自动保持 cookie，服务器应避免验证 cookie。如果服务器无法修改，也可以使用一些模拟手段，比如这样的工具[https://github.com/charleslo1/weapp-cookie](https://github.com/charleslo1/weapp-cookie) 可以请求时带上 cookie 并将响应的 cookie 保存在本地。\r\n- H5端 cookie 受跨域限制（和平时开发网站时一样），旧版的 uni.request 未支持 withCredentials 配置，可以直接使用 xhr 对象或者其他类库。\r\n- 根据 W3C 规范，H5 端无法获取 response header 中 Set-Cookie、Set-Cookie2 这2个字段，对于跨域请求，允许获取的 response header 字段只限于“simple response header”和“Access-Control-Expose-Headers”（[详情](https://www.w3.org/TR/cors/access-control-allow-credentials-response-header)）\r\n- [uni-app 插件市场](https://ext.dcloud.net.cn/search?q=%E6%8B%A6%E6%88%AA%E5%99%A8)有flyio、axios等三方封装的拦截器可用\r\n- 低版本手机自身不支持 ipv6，如果服务器仅允许 ipv6，会导致老手机无法正常运行或访问速度非常慢\r\n- localhost、127.0.0.1等服务器地址，只能在电脑端运行，手机端连接时不能访问。请使用标准IP并保证手机能连接电脑网络\r\n- debug 模式，安卓端暂时无法获取响应头，url中含有非法字符（如未编码为%20的空格）时会请求失败\r\n- iOS App第一次安装启动后，会弹出是否允许联网的询问框，在用户点击同意前，调用联网API会失败。请注意判断这种情况。比如官方提供的新闻模板示例（HBuilderX新建项目可选择），会判断如果无法联网，则提供一个错误页，提示用户设置网络及下拉刷新重试。\r\n- 良好体验的App，还会判断当前是否处于飞行模式（[参考](https://ext.dcloud.net.cn/plugin?id=594)）、是wifi还是3G（[参考](https://uniapp.dcloud.io/api/system/network)）\r\n- 部分安卓设备，真机运行或debug模式下的网速，低于release模式很多。\r\n- 使用一些比较小众的证书机构（如：CFCA OV OCA）签发的 ssl 证书在安卓设备请求会失败，因为这些机构的根证书不在系统内置根证书库，可以更换其他常见机构签发的证书（如：Let's Encrypt），或者配置 sslVerify 为 false 关闭 ssl 证书验证（不推荐）。\r\n- 单次网络请求数据量建议控制在50K以下（仅指json数据，不含图片），过多数据应分页获取，以提升应用体验。\r\n","p":"command\\网络 - 发起请求.html"},{"t":"网络/上传、 下载","d":" uni.uploadFile(OBJECT)\r\n将本地资源上传到开发者服务器，客户端发起一个 ``POST`` 请求，其中 ``content-type`` 为 ``multipart/form-data``。  \r\n如页面通过 [uni.chooseImage](api/media/image?id=chooseimage) 等接口获取到一个本地资源的临时文件路径后，可通过此接口将本地资源上传到指定服务器。另外选择和上传非图像、视频文件参考：[https://ask.dcloud.net.cn/article/35547](https://ask.dcloud.net.cn/article/35547)。\r\n\r\n> 在各个小程序平台运行时，网络相关的 API 在使用前需要配置域名白名单。\r\n\r\n**推荐开发者上传到uniCloud，uniCloud提供了免费CDN和更好的易用性，包括安全的cdn直传。**\r\n- uniCloud的上传API：[https://uniapp.dcloud.io/uniCloud/storage?id=uploadfile](https://uniapp.dcloud.io/uniCloud/storage?id=uploadfile)\r\n- 封装的更完善的[uni-file-picker组件](https://ext.dcloud.net.cn/plugin?id=4079)，文件选择、上传到uniCloud，一站式集成。\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|平台差异说明|\r\n|:-|:-|:-|:-|:-|\r\n|url|String|是|开发者服务器 url||\r\n|files|Array|否|需要上传的文件列表。**使用 files 时，filePath 和 name 不生效。**|App、H5（ 2.6.15+）|\r\n|fileType|String|见平台差异说明|文件类型，image/video/audio|仅支付宝小程序，且必填。|\r\n|file|File|否|要上传的文件对象。|仅H5（2.6.15+）支持|\r\n|filePath|String|是|要上传文件资源的路径。||\r\n|name|String|是|文件对应的 key , 开发者在服务器端通过这个 key 可以获取到文件二进制内容||\r\n|header|Object|否|HTTP 请求 Header, header 中不能设置 Referer。||\r\n|timeout|Number|否|超时时间，单位 ms|H5(HBuilderX 2.9.9+)、APP(HBuilderX 2.9.9+)|\r\n|formData|Object|否|HTTP 请求中其他额外的 form data||\r\n|success|Function|否|接口调用成功的回调函数||\r\n|fail|Function|否|接口调用失败的回调函数||\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|&nbsp;|\r\n\r\n**注意**：\r\n\r\n- App支持多文件上传，微信小程序只支持单文件上传，传多个文件需要反复调用本API。所以跨端的写法就是循环调用本API。\r\n- hello uni-app中的客服反馈，支持多图上传。[uni-app插件市场](https://ext.dcloud.net.cn/)中也有多个封装的组件。\r\n- App平台选择和上传非图像、视频文件，参考[https://ask.dcloud.net.cn/article/35547](https://ask.dcloud.net.cn/article/35547)\r\n- 网络请求的 ``超时时间`` 可以统一在 ``manifest.json`` 中配置 [networkTimeout](/collocation/manifest?id=networktimeout)。\r\n- 支付宝小程序开发工具上传文件返回的http状态码为字符串形式，支付宝小程序真机返回的状态码为数字形式\r\n\r\n**files参数说明**\r\n\r\nfiles 参数是一个 file 对象的数组，file 对象的结构如下：\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|name|String|否|multipart 提交时，表单的项目名，默认为 file|\r\n|file|File|否|要上传的文件对象，仅H5（2.6.15+）支持|\r\n|uri|String|是|文件的本地地址|\r\n\r\nTip:\r\n\r\n- 如果 ``name`` 不填或填的值相同，可能导致服务端读取文件时只能读取到一个文件。\r\n\r\n**success 返回参数说明**\r\n\r\n|参数|类型|说明|\r\n|:-|:-|:-|\r\n|data|String|开发者服务器返回的数据|\r\n|statusCode|Number|开发者服务器返回的 HTTP 状态码|\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.chooseImage({\r\n\tsuccess: (chooseImageRes) => {\r\n\t\tconst tempFilePaths = chooseImageRes.tempFilePaths;\r\n\t\tuni.uploadFile({\r\n\t\t\turl: 'https://www.example.com/upload', //仅为示例，非真实的接口地址\r\n\t\t\tfilePath: tempFilePaths[0],\r\n\t\t\tname: 'file',\r\n\t\t\tformData: {\r\n\t\t\t\t'user': 'test'\r\n\t\t\t},\r\n\t\t\tsuccess: (uploadFileRes) => {\r\n\t\t\t\tconsole.log(uploadFileRes.data);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n});\r\n```\r\n\r\n**返回值**\r\n\r\n如果希望返回一个 `uploadTask` 对象，需要至少传入 success / fail / complete 参数中的一个。例如：\r\n\r\n```javascript\r\nvar uploadTask = uni.uploadFile({\r\n\turl: 'https://www.example.com/upload', //仅为示例，并非真实接口地址。\r\n\tcomplete: ()=> {}\r\n});\r\nuploadTask.abort();\r\n```\r\n\r\n如果没有传入 success / fail / complete 参数，则会返回封装后的 Promise 对象：[Promise 封装](/api/README?id=promise-%E5%B0%81%E8%A3%85)\r\n\r\n通过 `uploadTask`，可监听上传进度变化事件，以及取消上传任务。\r\n\r\n**uploadTask 对象的方法列表**\r\n\r\n|方法|参数|说明|\r\n|:-|:-|:-|\r\n|abort||中断上传任务|\r\n|onProgressUpdate|callback|监听上传进度变化|\r\n|onHeadersReceived|callback|监听 HTTP Response Header 事件。会比请求完成事件更早,仅`微信小程序平台`支持，[规范详情](https://developers.weixin.qq.com/miniprogram/dev/api/UploadTask.onHeadersReceived.html)|    \r\n|offProgressUpdate|callback|取消监听上传进度变化事件，仅`微信小程序平台`支持，[规范详情](https://developers.weixin.qq.com/miniprogram/dev/api/UploadTask.offProgressUpdate.html)|\r\n|offHeadersReceived|callback|取消监听 HTTP Response Header 事件，仅`微信小程序平台`支持，[规范详情](https://developers.weixin.qq.com/miniprogram/dev/api/UploadTask.offHeadersReceived.html)|\r\n\r\n**onProgressUpdate 返回参数说明**\r\n\r\n|参数|类型|说明|\r\n|:-|:-|:-|\r\n|progress|Number|上传进度百分比|\r\n|totalBytesSent|Number|已经上传的数据长度，单位 Bytes|\r\n|totalBytesExpectedToSend|Number|预期需要上传的数据总长度，单位 Bytes|\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.chooseImage({\r\n\tsuccess: (chooseImageRes) => {\r\n\t\tconst tempFilePaths = chooseImageRes.tempFilePaths;\r\n\t\tconst uploadTask = uni.uploadFile({\r\n\t\t\turl: 'https://www.example.com/upload', //仅为示例，非真实的接口地址\r\n\t\t\tfilePath: tempFilePaths[0],\r\n\t\t\tname: 'file',\r\n\t\t\tformData: {\r\n\t\t\t\t'user': 'test'\r\n\t\t\t},\r\n\t\t\tsuccess: (uploadFileRes) => {\r\n\t\t\t\tconsole.log(uploadFileRes.data);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tuploadTask.onProgressUpdate((res) => {\r\n\t\t\tconsole.log('上传进度' + res.progress);\r\n\t\t\tconsole.log('已经上传的数据长度' + res.totalBytesSent);\r\n\t\t\tconsole.log('预期需要上传的数据总长度' + res.totalBytesExpectedToSend);\r\n\r\n\t\t\t// 测试条件，取消上传任务。\r\n\t\t\tif (res.progress > 50) {\r\n\t\t\t\tuploadTask.abort();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n});\r\n```\r\n\r\n uni.downloadFile(OBJECT)\r\n下载文件资源到本地，客户端直接发起一个 HTTP GET 请求，返回文件的本地临时路径。\r\n\r\n> 在各个小程序平台运行时，网络相关的 API 在使用前需要配置域名白名单。在h5上是跨域的，用户需要处理好跨域问题。\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|平台差异说明|\r\n|:-|:-|:-|:-|:-|\r\n|url|String|是|下载资源的 url| |\r\n|header|Object|否|HTTP 请求 Header, header 中不能设置 Referer。| |\r\n|timeout|Number|否|超时时间，单位 ms|H5(HBuilderX 2.9.9+)、APP(HBuilderX 2.9.9+)| \r\n|success|Function|否|下载成功后以 tempFilePath 的形式传给页面，res = {tempFilePath: '文件的临时路径'}| |\r\n|fail|Function|否|接口调用失败的回调函数| |\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）| |\r\n\r\n**注：文件的临时路径，在应用本次启动期间可以正常使用，如需持久保存，需在主动调用 [uni.saveFile](/api/file/file?id=savefile)，才能在应用下次启动时访问得到。**\r\n\r\n**success 返回参数说明**\r\n\r\n|参数|类型|说明|\r\n|:-|:-|:-|\r\n|tempFilePath|String|临时文件路径，下载后的文件会存储到一个临时文件|\r\n|statusCode|Number|开发者服务器返回的 HTTP 状态码|\r\n\r\n**注意**\r\n- 网络请求的 ``超时时间`` 可以统一在 ``manifest.json`` 中配置 [networkTimeout](/collocation/manifest?id=networktimeout)。\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.downloadFile({\r\n\turl: 'https://www.example.com/file/test', //仅为示例，并非真实的资源\r\n\tsuccess: (res) => {\r\n\t\tif (res.statusCode === 200) {\r\n\t\t\tconsole.log('下载成功');\r\n\t\t}\r\n\t}\r\n});\r\n```\r\n\r\n**返回值**\r\n\r\n如果希望返回一个 `downloadTask` 对象，需要至少传入 success / fail / complete 参数中的一个。例如：\r\n\r\n```javascript\r\nvar downloadTask = uni.downloadFile({\r\n\turl: 'https://www.example.com/file/test', //仅为示例，并非真实接口地址。\r\n\tcomplete: ()=> {}\r\n});\r\ndownloadTask.abort();\r\n```\r\n\r\n如果没有传入 success / fail / complete 参数，则会返回封装后的 Promise 对象：[Promise 封装](/api/README?id=promise-%E5%B0%81%E8%A3%85)\r\n\r\n通过 `downloadTask`，可监听下载进度变化事件，以及取消下载任务。\r\n\r\n**downloadTask 对象的方法列表**\r\n\r\n|方法|参数|说明|最低版本|\r\n|:-|:-|:-|:-|\r\n|abort||中断下载任务|*|\r\n|onProgressUpdate|callback|监听下载进度变化|*|\r\n|onHeadersReceived|callback|监听 HTTP Response Header 事件，会比请求完成事件更早,仅`微信小程序平台`支持，[规范详情](https://developers.weixin.qq.com/miniprogram/dev/api/DownloadTask.onHeadersReceived.html)| | \r\n|offProgressUpdate|callback|取消监听下载进度变化事件，仅`微信小程序平台`支持，[规范详情](https://developers.weixin.qq.com/miniprogram/dev/api/DownloadTask.offProgressUpdate.html)|\r\n|offHeadersReceived|callback|取消监听 HTTP Response Header 事件，仅`微信小程序平台`支持，[规范详情](https://developers.weixin.qq.com/miniprogram/dev/api/DownloadTask.offHeadersReceived.html)| |\r\n\r\n**onProgressUpdate 返回参数说明**\r\n\r\n|参数|类型|说明|\r\n|:-|:-|:-|\r\n|progress|Number|下载进度百分比|\r\n|totalBytesWritten|Number|已经下载的数据长度，单位 Bytes|\r\n|totalBytesExpectedToWrite|Number|预期需要下载的数据总长度，单位 Bytes|\r\n\r\n**示例**\r\n\r\n```javascript\r\nconst downloadTask = uni.downloadFile({\r\n\turl: 'http://www.example.com/file/test', //仅为示例，并非真实的资源\r\n\tsuccess: (res) => {\r\n\t\tif (res.statusCode === 200) {\r\n\t\t\tconsole.log('下载成功');\r\n\t\t}\r\n\t}\r\n});\r\n\r\ndownloadTask.onProgressUpdate((res) => {\r\n\tconsole.log('下载进度' + res.progress);\r\n\tconsole.log('已经下载的数据长度' + res.totalBytesWritten);\r\n\tconsole.log('预期需要下载的数据总长度' + res.totalBytesExpectedToWrite);\r\n\r\n\t// 测试条件，取消下载任务。\r\n\tif (res.progress > 50) {\r\n\t\tdownloadTask.abort();\r\n\t}\r\n});\r\n```\r\n","p":"command\\网络 - 上传、 下载.html"},{"t":"网络/WebSocket","d":" uni.connectSocket(OBJECT)\r\n创建一个 [WebSocket](https://developer.mozilla.org/zh-CN/docs/Web/API/WebSocket) 连接。\r\n\r\n> 在各个小程序平台运行时，网络相关的 API 在使用前需要配置域名白名单。\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|平台差异说明|\r\n|:-|:-|:-|:-|:-|\r\n|url|String|是|服务器接口地址|小程序中必须是 `wss://` 协议|\r\n|header|Object|否|HTTP Header , header 中不能设置 Referer|小程序、App 2.9.6+|\r\n|method|String|否|默认是GET，有效值：OPTIONS, GET, HEAD, POST, PUT, DELETE, TRACE, CONNECT|仅微信小程序支持|\r\n|protocols|Array&lt;String&gt;|否|子协议数组|App、H5、微信小程序、百度小程序、字节跳动小程序|\r\n|success|Function|否|接口调用成功的回调函数||\r\n|fail|Function|否|接口调用失败的回调函数||\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|&nbsp;|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nuni.connectSocket({\r\n\turl: 'wss://www.example.com/socket',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tx: '',\r\n\t\t\ty: ''\r\n\t\t};\r\n\t},\r\n\theader: {\r\n\t\t'content-type': 'application/json'\r\n\t},\r\n\tprotocols: ['protocol1'],\r\n\tmethod: 'GET'\r\n});\r\n```\r\n\r\n**返回值**\r\n\r\n如果希望返回一个 [socketTask](/api/request/socket-task) 对象，需要至少传入 success / fail / complete 参数中的一个。例如：\r\n\r\n```javascript\r\nvar socketTask = uni.connectSocket({\r\n\turl: 'wss://www.example.com/socket', //仅为示例，并非真实接口地址。\r\n\tcomplete: ()=> {}\r\n});\r\n```\r\n\r\n如果没有传入 success / fail / complete 参数，则会返回封装后的 Promise 对象：[Promise 封装](/api/README?id=promise-%E5%B0%81%E8%A3%85)\r\n\r\n**注意事项**\r\n\r\n- 网络请求的 ``超时时间`` 可以统一在 ``manifest.json`` 中配置 [networkTimeout](/collocation/manifest?id=networktimeout)。\r\n- App平台，2.2.6以下的版本，不支持 ``ArrayBuffer`` 类型的数据收发。老版本不愿升级也可以使用 [plus-websocket插件](https://ext.dcloud.net.cn/plugin?id=647) 插件替代。\r\n- App平台自定义组件模式下，以及支付宝小程序下，所有 `vue` 页面只能使用一个 `websocket` 连接。App下可以使用 [plus-websocket](https://ext.dcloud.net.cn/plugin?id=647) 插件替代实现多链接。App平台，2.2.6+起支持多个socket链接，数量没有限制。\r\n- 微信小程序平台1.7.0 及以上版本，最多可以同时存在5个WebSocket 连接。老版本只支持一个socket连接\r\n- 百度小程序平台自基础库版本 1.9.4 及以后支持多个socket连接。老版本只支持一个socket连接\r\n- QQ小程序平台最多支持同时存在5个socket链接\r\n\r\n\r\n uni.onSocketOpen(CALLBACK)\r\n监听WebSocket连接打开事件。\r\n\r\n**CALLBACK 返回参数**\r\n\r\n|属性|类型|说明|\r\n|:-|:-|:-|\r\n|header|Object|连接成功的 HTTP 响应 Header|\r\n\r\n**示例代码：**\r\n\r\n```javascript\r\nuni.connectSocket({\r\n  url: 'wss://www.example.com/socket'\r\n});\r\nuni.onSocketOpen(function (res) {\r\n  console.log('WebSocket连接已打开！');\r\n});\r\n```\r\n\r\n\r\n uni.onSocketError(CALLBACK)\r\n监听WebSocket错误。\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nuni.connectSocket({\r\n  url: 'wss://www.example.com/socket'\r\n});\r\nuni.onSocketOpen(function (res) {\r\n  console.log('WebSocket连接已打开！');\r\n});\r\nuni.onSocketError(function (res) {\r\n  console.log('WebSocket连接打开失败，请检查！');\r\n});\r\n```\r\n\r\n uni.sendSocketMessage(OBJECT)\r\n通过 WebSocket 连接发送数据，需要先 [uni.connectSocket](/api/request/websocket?id=connectsocket)，并在 [uni.onSocketOpen](/api/request/websocket?id=onsocketopen) 回调之后才能发送。\r\n\r\n**OBJECT 参数说明：**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|data|String/ArrayBuffer|是|需要发送的内容|\r\n|success|Function|否|接口调用成功的回调函数|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nvar socketOpen = false;\r\nvar socketMsgQueue = [];\r\n\r\nuni.connectSocket({\r\n  url: 'wss://www.example.com/socket'\r\n});\r\n\r\nuni.onSocketOpen(function (res) {\r\n  socketOpen = true;\r\n  for (var i = 0; i < socketMsgQueue.length; i++) {\r\n    sendSocketMessage(socketMsgQueue[i]);\r\n  }\r\n  socketMsgQueue = [];\r\n});\r\n\r\nfunction sendSocketMessage(msg) {\r\n  if (socketOpen) {\r\n    uni.sendSocketMessage({\r\n      data: msg\r\n    });\r\n  } else {\r\n    socketMsgQueue.push(msg);\r\n  }\r\n}\r\n```\r\n\r\n uni.onSocketMessage(CALLBACK)\r\n监听WebSocket接受到服务器的消息事件。\r\n\r\n**CALLBACK 返回参数**\r\n\r\n|参数|类型|说明|\r\n|:-|:-|:-|\r\n|data|String/ArrayBuffer|服务器返回的消息|\r\n\r\n**示例代码：**\r\n\r\n```javascript\r\nuni.connectSocket({\r\n  url: 'wss://www.example.com/socket'\r\n});\r\n\r\nuni.onSocketMessage(function (res) {\r\n  console.log('收到服务器内容：' + res.data);\r\n});\r\n```\r\n\r\n uni.closeSocket(OBJECT)\r\n关闭 WebSocket 连接。\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|code|Number|否|一个数字值表示关闭连接的状态号，表示连接被关闭的原因。如果这个参数没有被指定，默认的取值是1000 （表示正常连接关闭）|\r\n|reason|String|否|一个可读的字符串，表示连接被关闭的原因。这个字符串必须是不长于123字节的UTF-8 文本（不是字符）|\r\n|success|Function|否|接口调用成功的回调函数|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n uni.onSocketClose(CALLBACK)\r\n监听WebSocket关闭。\r\n\r\n```javascript\r\nuni.connectSocket({\r\n  url: 'wss://www.example.com/socket'\r\n});\r\n\r\n// 注意这里有时序问题，\r\n// 如果 uni.connectSocket 还没回调 uni.onSocketOpen，而先调用 uni.closeSocket，那么就做不到关闭 WebSocket 的目的。\r\n// 必须在 WebSocket 打开期间调用 uni.closeSocket 才能关闭。\r\nuni.onSocketOpen(function () {\r\n  uni.closeSocket();\r\n});\r\n\r\nuni.onSocketClose(function (res) {\r\n  console.log('WebSocket 已关闭！');\r\n});\r\n```\r\n","p":"command\\网络 - WebSocket.html"},{"t":"网络/SocketTask","d":"**SocketTask** 由 [uni.connectSocket()](/api/request/websocket?id=connectsocket) 接口创建。\r\n\r\n**平台差异说明**\r\n\r\n支付宝小程序、字节跳动小程序，没有明确的文档来具体说明这个对象，而是指向了 [Web Websocket](https://developer.mozilla.org/zh-CN/docs/Web/API/WebSocket) 对象。\r\n\r\n SocketTask.onMessage(CALLBACK)\r\n监听 WebSocket 接受到服务器的消息事件\r\n\r\n**回调函数**\r\n\r\n`Function`\r\n\r\nWebSocket 接受到服务器的消息事件的回调函数\r\n\r\n**回调函数中的参数**\r\n\r\n`Object`\r\n\r\n|属性|类型|说明|\r\n|:-|:-|:-|\r\n|data|String/ArrayBuffer|服务器返回的消息|\r\n\r\n SocketTask.send(OBJECT)\r\n通过 WebSocket 连接发送数据\r\n\r\n**参数**\r\n\r\n|属性|类型|是否必填|说明|\r\n|:-|:-|:-|:-|\r\n|data|String/ArrayBuffer|是|需要发送的内容|\r\n|success|Function|否|接口调用成功的回调函数|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n SocketTask.close(OBJECT)\r\n关闭 WebSocket 连接\r\n\r\n**参数**\r\n\r\n|属性|类型|默认值|是否必填|说明|\r\n|:-|:-|:-|:-|:-|\r\n|code|Number|1000（表示正常关闭连接）|否|一个数字值表示关闭连接的状态号，表示连接被关闭的原因。|\r\n|reason|String||否|一个可读的字符串，表示连接被关闭的原因。|\r\n|success|Function||否|接口调用成功的回调函数|\r\n|fail|Function||否|接口调用失败的回调函数|\r\n|complete|Function||否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n SocketTask.onOpen(CALLBACK)\r\n监听 WebSocket 连接打开事件\r\n\r\n**回调函数**\r\n\r\n`Function`\r\n\r\nWebSocket 连接打开事件的回调函数\r\n\r\n**回调函数中的参数**\r\n\r\n`Object`\r\n\r\n|属性|类型|说明|\r\n|:-|:-|:-|\r\n|data|String/ArrayBuffer|服务器返回的消息|\r\n\r\n SocketTask.onClose(CALLBACK)\r\n监听 WebSocket 连接关闭事件\r\n\r\n**回调函数**\r\n\r\n`Function`\r\n\r\nWebSocket 连接关闭事件的回调函数\r\n\r\n SocketTask.onError(CALLBACK)\r\n监听 WebSocket 错误事件\r\n\r\n**回调函数**\r\n\r\n`Function`\r\n\r\nWebSocket 错误事件的回调函数\r\n\r\n**回调函数中的参数**\r\n\r\n`Object`\r\n\r\n|属性|类型|说明|\r\n|:-|:-|:-|\r\n|errMsg|String|错误信息|","p":"command\\网络 - SocketTask.html"},{"t":"网络/mDNS","d":"\n mDNS 服务\n\n - 微信小程序平台支持，[规范详情](https://developers.weixin.qq.com/miniprogram/dev/api/wx.stopLocalServiceDiscovery.html)\n - App端可在插件市场搜索相关插件[mDNS](https://ext.dcloud.net.cn/search?q=mdns)\n","p":"command\\网络 - mDNS.html"},{"t":"网络/UDP 通信","d":" UDP 通信\n\n仅微信小程序平台支持，[规范详情](https://developers.weixin.qq.com/miniprogram/dev/api/network/udp/wx.createUDPSocket.html)\n","p":"command\\网络 - UDP 通信.html"},{"t":"路由与页面跳转/router","d":" uni.navigateTo(OBJECT)\r\n\r\n保留当前页面，跳转到应用内的某个页面，使用```uni.navigateBack```可以返回到原页面。\r\n\r\n**OBJECT参数说明**\r\n\r\n|参数|类型|必填|默认值|说明|平台差异说明|\r\n|:-|:-|:-|:-|:-|:-|\r\n|url|String|是||需要跳转的应用内非 tabBar 的页面的路径 , 路径后可以带参数。参数与路径之间使用?分隔，参数键与参数值用=相连，不同参数用&分隔；如 'path?key=value&key2=value2'，path为下一个页面的路径，下一个页面的onLoad函数可得到传递的参数| |\r\n|animationType|String|否|pop-in|窗口显示的动画效果，详见：[窗口动画](api/router?id=animation)|App|\r\n|animationDuration|Number|否|300|窗口动画持续时间，单位为 ms|App|\r\n|events|Object|否||页面间通信接口，用于监听被打开页面发送到当前页面的数据。2.8.9+ 开始支持。||\r\n|success|Function|否||接口调用成功的回调函数||\r\n|fail|Function|否||接口调用失败的回调函数||\r\n|complete|Function|否||接口调用结束的回调函数（调用成功、失败都会执行）|&nbsp;|\r\n\r\n**object.success 回调函数**\r\n\r\n**参数**\r\n\r\n**Object res**\r\n\r\n|属性|类型|说明|\r\n|:-|:-|:-|\r\n|eventChannel|[EventChannel](api/router?id=event-channel)|和被打开页面进行通信|\r\n\r\n\r\n**示例**\r\n\r\n```javascript\r\n//在起始页面跳转到test.vue页面并传递参数\r\nuni.navigateTo({\r\n\turl: 'test?id=1&name=uniapp'\r\n});\r\n```\r\n```javascript\r\n// 在test.vue页面接受参数\r\nexport default {\r\n\tonLoad: function (option) { //option为object类型，会序列化上个页面传递的参数\r\n\t\tconsole.log(option.id); //打印出上个页面传递的参数。\r\n\t\tconsole.log(option.name); //打印出上个页面传递的参数。\r\n\t}\r\n}\r\n```\r\n\r\n```\r\n// 2.8.9+ 支持\r\nuni.navigateTo({\r\n  url: 'pages/test?id=1',\r\n  events: {\r\n    // 为指定事件添加一个监听器，获取被打开页面传送到当前页面的数据\r\n    acceptDataFromOpenedPage: function(data) {\r\n      console.log(data)\r\n    },\r\n    someEvent: function(data) {\r\n      console.log(data)\r\n    }\r\n    ...\r\n  },\r\n  success: function(res) {\r\n    // 通过eventChannel向被打开页面传送数据\r\n    res.eventChannel.emit('acceptDataFromOpenerPage', { data: 'test' })\r\n  }\r\n})\r\n\r\n// uni.navigateTo 目标页面 pages/test.vue\r\nonLoad: function(option) {\r\n  console.log(option.query)\r\n  const eventChannel = this.getOpenerEventChannel()\r\n  eventChannel.emit('acceptDataFromOpenedPage', {data: 'test'});\r\n  eventChannel.emit('someEvent', {data: 'test'});\r\n  // 监听acceptDataFromOpenerPage事件，获取上一页面通过eventChannel传送到当前页面的数据\r\n  eventChannel.on('acceptDataFromOpenerPage', function(data) {\r\n    console.log(data)\r\n  })\r\n}\r\n```\r\n\r\n\r\nurl有长度限制，太长的字符串会传递失败，可改用[窗体通信](https://uniapp.dcloud.io/collocation/frame/communication)、[全局变量](https://ask.dcloud.net.cn/article/35021)，另外参数中出现空格等特殊字符时需要对参数进行编码，如下为使用`encodeURIComponent`对参数进行编码的示例。\r\n```html\r\n<navigator :url=\"'/pages/test/test?item='+ encodeURIComponent(JSON.stringify(item))\"></navigator>\r\n```\r\n```javascript\r\n// 在test.vue页面接受参数\r\nonLoad: function (option) {\r\n\tconst item = JSON.parse(decodeURIComponent(option.item));\r\n}\r\n```\r\n**注意：**\r\n\r\n* 页面跳转路径有层级限制，不能无限制跳转新页面\r\n* 跳转到 tabBar 页面只能使用 switchTab 跳转\r\n* 路由API的目标页面必须是在pages.json里注册的vue页面。如果想打开web url，在App平台可以使用 [plus.runtime.openURL](http://www.html5plus.org/doc/zh_cn/runtime.htmlplus.runtime.openURL)或web-view组件；H5平台使用 window.open；小程序平台使用web-view组件（url需在小程序的联网白名单中）。在hello uni-app中有个组件ulink.vue已对多端进行封装，可参考。\r\n\r\n uni.redirectTo(OBJECT)\r\n\r\n关闭当前页面，跳转到应用内的某个页面。\r\n\r\n**OBJECT参数说明**\r\n\r\n|参数|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|url|String|是|需要跳转的应用内非 tabBar 的页面的路径，路径后可以带参数。参数与路径之间使用?分隔，参数键与参数值用=相连，不同参数用&分隔；如 'path?key=value&key2=value2'|\r\n|success|Function|否|接口调用成功的回调函数|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.redirectTo({\r\n\turl: 'test?id=1'\r\n});\r\n```\r\n\r\n**注意：**\r\n\r\n* 跳转到 tabBar 页面只能使用 switchTab 跳转\r\n\r\n uni.reLaunch(OBJECT)\r\n\r\n关闭所有页面，打开到应用内的某个页面。\r\n\r\n**注意：**\r\n如果调用了 [uni.preloadPage(OBJECT)](https://uniapp.dcloud.net.cn/api/preload-page) 不会关闭，仅触发生命周期 `onHide`\r\n\r\n**OBJECT参数说明**\r\n\r\n|参数|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|url|String|是|需要跳转的应用内页面路径 , 路径后可以带参数。参数与路径之间使用?分隔，参数键与参数值用=相连，不同参数用&分隔；如 'path?key=value&key2=value2'，如果跳转的页面路径是 tabBar 页面则不能带参数|\r\n|success|Function|否|接口调用成功的回调函数|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.reLaunch({\r\n\turl: 'test?id=1'\r\n});\r\n```\r\n```javascript\r\nexport default {\r\n\tonLoad: function (option) {\r\n\t\tconsole.log(option.id);\r\n\t}\r\n}\r\n```\r\n\r\nTips：\r\n\r\n* H5端调用`uni.reLaunch`之后之前页面栈会销毁，但是无法清空浏览器之前的历史记录，此时`navigateBack`不能返回，如果存在历史记录的话点击浏览器的返回按钮或者调用`history.back()`仍然可以导航到浏览器的其他历史记录。\r\n\r\n uni.switchTab(OBJECT)\r\n\r\n跳转到 tabBar 页面，并关闭其他所有非 tabBar 页面。\r\n\r\n**注意：**\r\n如果调用了 [uni.preloadPage(OBJECT)](https://uniapp.dcloud.net.cn/api/preload-page) 不会关闭，仅触发生命周期 `onHide`\r\n\r\n**OBJECT参数说明**\r\n\r\n|参数|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|url|String|是|需要跳转的 tabBar 页面的路径（需在 pages.json 的 tabBar 字段定义的页面），路径后不能带参数|\r\n|success|Function|否|接口调用成功的回调函数|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**示例**\r\n\r\npages.json\r\n```javascript\r\n{\r\n  \"tabBar\": {\r\n    \"list\": [{\r\n      \"pagePath\": \"pages/index/index\",\r\n      \"text\": \"首页\"\r\n    },{\r\n      \"pagePath\": \"pages/other/other\",\r\n      \"text\": \"其他\"\r\n    }]\r\n  }\r\n}\r\n```\r\nother.vue\r\n```javascript\r\nuni.switchTab({\r\n\turl: '/pages/index/index'\r\n});\r\n```\r\n\r\n uni.navigateBack(OBJECT)\r\n\r\n关闭当前页面，返回上一页面或多级页面。可通过 ```getCurrentPages()``` 获取当前的页面栈，决定需要返回几层。\r\n\r\n**OBJECT参数说明**\r\n\r\n|参数|类型|必填|默认值|说明|平台差异说明|\r\n|:-|:-|:-|:-|:-|:-|\r\n|delta|Number|否|1|返回的页面数，如果 delta 大于现有页面数，则返回到首页。||\r\n|animationType|String|否|pop-out|窗口关闭的动画效果，详见：[窗口动画](api/router?id=animation)|App|\r\n|animationDuration|Number|否|300|窗口关闭动画的持续时间，单位为 ms|App|\r\n\r\n**示例**\r\n\r\n```javascript\r\n// 注意：调用 navigateTo 跳转时，调用该方法的页面会被加入堆栈，而 redirectTo 方法则不会。见下方示例代码\r\n\r\n// 此处是A页面\r\nuni.navigateTo({\r\n\turl: 'B?id=1'\r\n});\r\n\r\n// 此处是B页面\r\nuni.navigateTo({\r\n\turl: 'C?id=1'\r\n});\r\n\r\n// 在C页面内 navigateBack，将返回A页面\r\nuni.navigateBack({\r\n\tdelta: 2\r\n});\r\n```\r\n\r\n\r\n EventChannel@event-channel\r\n2.8.9+ 支持\r\n页面间事件通信通道\r\n\r\n**方法**\r\n\r\n EventChannel.emit(string eventName, any args)\r\n\r\n触发一个事件\r\n\r\nstring eventName\r\n事件名称\r\n\r\nany args\r\n事件参数\r\n\r\n\r\n EventChannel.off(string eventName, function fn)\r\n\r\n取消监听一个事件。给出第二个参数时，只取消给出的监听函数，否则取消所有监听函数\r\n\r\nstring eventName\r\n事件名称\r\n\r\nfunction fn\r\n事件监听函数\r\n\r\n参数\r\nany args\r\n触发事件参数\r\n\r\n\r\n EventChannel.on(string eventName, function fn)\r\n\r\n持续监听一个事件\r\n\r\nstring eventName\r\n事件名称\r\n\r\nfunction fn\r\n事件监听函数\r\n\r\n参数\r\nany args\r\n触发事件参数\r\n\r\n\r\n EventChannel.once(string eventName, function fn)\r\n\r\n监听一个事件一次，触发后失效\r\n\r\nstring eventName\r\n事件名称\r\n\r\nfunction fn\r\n事件监听函数\r\n\r\n参数\r\nany args\r\n触发事件参数\r\n\r\n\r\nTips：\r\n* ``navigateTo``, ``redirectTo`` 只能打开非 tabBar 页面。\r\n* ``switchTab`` 只能打开 ``tabBar`` 页面。\r\n* ``reLaunch`` 可以打开任意页面。\r\n* 页面底部的 ``tabBar`` 由页面决定，即只要是定义为 ``tabBar`` 的页面，底部都有 ``tabBar``。\r\n* 不能在 ```App.vue``` 里面进行页面跳转。\r\n* H5端页面刷新之后页面栈会消失，此时`navigateBack`不能返回，如果一定要返回可以使用`history.back()`导航到浏览器的其他历史记录。\r\n\r\n**参考事项**\r\n- 页面路由拦截和管理，插件市场有很多封装好的工具类，搜索[路由](https://ext.dcloud.net.cn/search?q=%E8%B7%AF%E7%94%B1)\r\n\r\n\r\n 窗口动画@animation\r\n> 本API仅App支持。小程序自身不支持自定义动画。H5的窗体动画可使用常规单页动画处理方案，见[H5下单页动画示例](https://ext.dcloud.net.cn/plugin?id=659&tdsourcetag=s_pctim_aiomsg)\r\n\r\n窗口的显示/关闭动画效果，支持在 API、组件、pages.json 中配置，优先级为：`API = 组件 > pages.json`。\r\n\r\n API\r\n有效的路由 API\r\n\r\n- navigateTo\r\n- navigateBack\r\n\r\n```javascript\r\nuni.navigateTo({\r\n\turl: '../test/test',\r\n\tanimationType: 'pop-in',\r\n\tanimationDuration: 200\r\n});\r\nuni.navigateBack({\r\n\tdelta: 1,\r\n\tanimationType: 'pop-out',\r\n\tanimationDuration: 200\r\n});\r\n```\r\n 组件\r\nopen-type 有效值\r\n\r\n- navigateTo\r\n- navigateBack\r\n\r\n```html\r\n<navigator animation-type=\"pop-in\" animation-duration=\"300\" url=\"../test/test\">navigator</navigator>\r\n<navigator animation-type=\"pop-out\" animation-duration=\"300\" open-type=\"navigateBack\" >navigator</navigator>\r\n```\r\n pages.json\r\npages.json 中配置的是窗口显示的动画\r\n```javascript\r\n\"style\": {\r\n\t\"app-plus\": {\r\n\t\t\"animationType\": \"fade-in\",\r\n\t\t\"animationDuration\": 300\r\n\t}\r\n}\r\n```\r\n\r\n显示动画与关闭动画，会有默认的对应规则。但是如果通过 API 或组件配置了窗口关闭的动画类型，则不会使用默认的类型。\r\n\r\n|显示动画|关闭动画|显示动画描述（关闭动画与之相反）\r\n|:-|:-|:-|\r\n|slide-in-right|slide-out-right|新窗体从右侧进入|\r\n|slide-in-left|slide-out-left|新窗体从左侧进入|\r\n|slide-in-top|slide-out-top|新窗体从顶部进入|\r\n|slide-in-bottom|slide-out-bottom|新窗体从底部进入|\r\n|pop-in|pop-out|新窗体从左侧进入，且老窗体被挤压而出|\r\n|fade-in|fade-out|新窗体从透明到不透明逐渐显示|\r\n|zoom-out|zoom-in|新窗体从小到大缩放显示|\r\n|zoom-fade-out|zoom-fade-in|新窗体从小到大逐渐放大并且从透明到不透明逐渐显示|\r\n|none|none|无动画|\r\n\r\n详细的窗口动画说明，请参考：\r\n\r\n- 窗口显示的动画：[AnimationTypeShow](http://www.html5plus.org/doc/zh_cn/webview.htmlplus.webview.AnimationTypeShow)\r\n- 窗口关闭的动画：[AnimationTypeClose](http://www.html5plus.org/doc/zh_cn/webview.htmlplus.webview.AnimationTypeClose)\r\n\r\n**注意**\r\n- 纯nvue项目（render为native），窗体动画默认进入动画为popin，返回为pop-out。如果想修改动画类型，只能通过uni.navigateTo API修改，在组件或pages.json里配置动画类型无效\r\n- 非纯nvue项目，App端窗体动画，默认进入动画为slider-in-right，默认返回动画为pop-out\r\n- webview 中嵌入 uni-app H5时，使用 uni.webView.navigateTo... 跳转页面\r\n","p":"command\\路由与页面跳转 - router.html"},{"t":"数据缓存/Storage","d":" uni.setStorage(OBJECT)\r\n将数据存储在本地缓存中指定的 key 中，会覆盖掉原来该 key 对应的内容，这是一个异步接口。\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|key|String|是|本地缓存中的指定的 key|\r\n|data|Any|是|需要存储的内容，只支持原生类型、及能够通过 JSON.stringify 序列化的对象|\r\n|success|Function|否|接口调用成功的回调函数|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.setStorage({\r\n\tkey: 'storage_key',\r\n\tdata: 'hello',\r\n\tsuccess: function () {\r\n\t\tconsole.log('success');\r\n\t}\r\n});\r\n```\r\n\r\n uni.setStorageSync(KEY,DATA)\r\n将 data 存储在本地缓存中指定的 key 中，会覆盖掉原来该 key 对应的内容，这是一个同步接口。\r\n\r\n**参数说明**\r\n\r\n|参数|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|key|String|是|本地缓存中的指定的 key|\r\n|data|Any|是|需要存储的内容，只支持原生类型、及能够通过 JSON.stringify 序列化的对象|\r\n\r\n```javascript\r\ntry {\r\n\tuni.setStorageSync('storage_key', 'hello');\r\n} catch (e) {\r\n\t// error\r\n}\r\n```\r\n\r\n uni.getStorage(OBJECT)\r\n从本地缓存中异步获取指定 key 对应的内容。\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|key|String|是|本地缓存中的指定的 key|\r\n|success|Function|是|接口调用的回调函数，res = {data: key对应的内容}|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**success 返回参数说明**\r\n\r\n|参数|类型|说明|\r\n|:-|:-|:-|\r\n|data|Any|key 对应的内容|\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.getStorage({\r\n\tkey: 'storage_key',\r\n\tsuccess: function (res) {\r\n\t\tconsole.log(res.data);\r\n\t}\r\n});\r\n```\r\n\r\n uni.getStorageSync(KEY)\r\n从本地缓存中同步获取指定 key 对应的内容。\r\n\r\n**参数说明**\r\n\r\n|参数|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|key|String|是|本地缓存中的指定的 key|\r\n\r\n**示例**\r\n\r\n```javascript\r\ntry {\r\n\tconst value = uni.getStorageSync('storage_key');\r\n\tif (value) {\r\n\t\tconsole.log(value);\r\n\t}\r\n} catch (e) {\r\n\t// error\r\n}\r\n```\r\n\r\n uni.getStorageInfo(OBJECT)\r\n异步获取当前 storage 的相关信息。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|\r\n|:-:|:-:|:-:|:-:|:-:|\r\n|HBuilderX 2.0.3+|√|√|√|√|\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|success|Function|是|接口调用的回调函数，详见返回参数说明|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**success 返回参数说明**\r\n\r\n|参数|类型|说明|\r\n|:-|:-|:-|\r\n|keys|Array＜String＞|当前 storage 中所有的 key|\r\n|currentSize|Number|当前占用的空间大小, 单位：kb|\r\n|limitSize|Number|限制的空间大小, 单位：kb|\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.getStorageInfo({\r\n\tsuccess: function (res) {\r\n\t\tconsole.log(res.keys);\r\n\t\tconsole.log(res.currentSize);\r\n\t\tconsole.log(res.limitSize);\r\n\t}\r\n});\r\n```\r\n\r\n uni.getStorageInfoSync()\r\n同步获取当前 storage 的相关信息。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|\r\n|:-:|:-:|:-:|:-:|:-:|\r\n|HBuilderX 2.0.3+|√|√|√|√|\r\n\r\n**示例**\r\n\r\n```javascript\r\ntry {\r\n\tconst res = uni.getStorageInfoSync();\r\n\tconsole.log(res.keys);\r\n\tconsole.log(res.currentSize);\r\n\tconsole.log(res.limitSize);\r\n} catch (e) {\r\n\t// error\r\n}\r\n```\r\n\r\n uni.removeStorage(OBJECT)\r\n从本地缓存中异步移除指定 key。\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|key|String|是|本地缓存中的指定的 key|\r\n|success|Function|是|接口调用的回调函数|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.removeStorage({\r\n\tkey: 'storage_key',\r\n\tsuccess: function (res) {\r\n\t\tconsole.log('success');\r\n\t}\r\n});\r\n```\r\n\r\n uni.removeStorageSync(KEY)\r\n从本地缓存中同步移除指定 key。\r\n\r\n**参数说明**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|key|String|是|本地缓存中的指定的 key|\r\n\r\n**示例**\r\n\r\n```javascript\r\ntry {\r\n\tuni.removeStorageSync('storage_key');\r\n} catch (e) {\r\n\t// error\r\n}\r\n```\r\n\r\n uni.clearStorage()\r\n清理本地数据缓存。\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.clearStorage();\r\n```\r\n\r\n uni.clearStorageSync()\r\n同步清理本地数据缓存。\r\n\r\n**示例**\r\n\r\n```javascript\r\ntry {\r\n\tuni.clearStorageSync();\r\n} catch (e) {\r\n\t// error\r\n}\r\n```\r\n\r\n**注意**\r\n\r\nuni-app的Storage在不同端的实现不同：\r\n- H5端为localStorage，浏览器限制5M大小，是缓存概念，可能会被清理\r\n- App端为原生的plus.storage，无大小限制，不是缓存，是持久化的\r\n- 各个小程序端为其自带的storage api，数据存储生命周期跟小程序本身一致，即除用户主动删除或超过一定时间被自动清理，否则数据都一直可用。\r\n- 微信小程序单个 key 允许存储的最大数据长度为 1MB，所有数据存储上限为 10MB。\r\n- 支付宝小程序单条数据转换成字符串后，字符串长度最大200*1024。同一个支付宝用户，同一个小程序缓存总上限为10MB。\r\n- 百度、字节跳动小程序文档未说明大小限制\r\n- 非App平台清空Storage会导致uni.getSystemInfo获取到的deviceId改变\r\n\r\n除此之外，其他数据存储方案：\r\n- H5端还支持websql、indexedDB、sessionStorage\r\n- App端还支持[SQLite](https://www.html5plus.org/doc/zh_cn/sqlite.html)、[IO文件](https://www.html5plus.org/doc/zh_cn/io.html)等本地存储方案。\r\n\r\n从HBuilderX2.6.6+起，App-Android平台对本地storage数据存储进行了性能优化，它的具体优化方式和升级注意事项，详见：[https://ask.dcloud.net.cn/article/37071](https://ask.dcloud.net.cn/article/37071)\r\n","p":"command\\数据缓存 - Storage.html"},{"t":"位置/获取位置","d":" uni.getLocation(OBJECT)\r\n获取当前的地理位置、速度。\r\n在微信小程序中，当用户离开应用后，此接口无法调用，除非申请后台持续定位权限；当用户点击“显示在聊天顶部”时，此接口可继续调用。\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|平台差异说明|\r\n|:-|:-|:-|:-|:-:|\r\n|type|String|否|默认为 wgs84 返回 gps 坐标，gcj02 返回国测局坐标，可用于 ``uni.openLocation`` 的坐标，app平台高德SDK仅支持返回gcj02||\r\n|altitude|Boolean|否|传入 true 会返回高度信息，由于获取高度需要较高精确度，会减慢接口返回速度|App和字节跳动小程序不支持|\r\n|geocode|Boolean|否|默认false，是否解析地址信息|仅App平台支持|\r\n|success|Function|是|接口调用成功的回调函数，返回内容详见返回参数说明。||\r\n|fail|Function|否|接口调用失败的回调函数||\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|&nbsp;|\r\n\r\n**success 返回参数说明**\r\n\r\n|参数|说明|\r\n|:-|:-|\r\n|latitude|纬度，浮点数，范围为-90~90，负数表示南纬|\r\n|longitude|经度，浮点数，范围为-180~180，负数表示西经|\r\n|speed|速度，浮点数，单位m/s|\r\n|accuracy|位置的精确度|\r\n|altitude|高度，单位 m|\r\n|verticalAccuracy|垂直精度，单位 m（Android 无法获取，返回 0）|\r\n|horizontalAccuracy|水平精度，单位 m|\r\n|[address](/api/location/location?id=address)|地址信息（仅App端支持，需配置geocode为true）|\r\n\r\n**address 地址信息说明**\r\n\r\n|属性|类型|描述|说明|\r\n|:-|:-|:-|:-|\r\n|country|String|国家|如“中国”，如果无法获取此信息则返回undefined|\r\n|province|String|省份名称|如“北京市”，如果无法获取此信息则返回undefined|\r\n|city|String|城市名称|如“北京市”，如果无法获取此信息则返回undefined|\r\n|district|String|区（县）名称|如“朝阳区”，如果无法获取此信息则返回undefined|\r\n|street|String|街道信息|如“酒仙桥路”，如果无法获取此信息则返回undefined|\r\n|streetNum|String|获取街道门牌号信息|如“3号”，如果无法获取此信息则返回undefined|\r\n|poiName|String|POI信息|如“电子城．国际电子总部”，如果无法获取此信息则返回undefined|\r\n|postalCode|String|邮政编码|如“100016”，如果无法获取此信息则返回undefined|\r\n|cityCode|String|城市代码|如“010”，如果无法获取此信息则返回undefined|\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.getLocation({\r\n\ttype: 'wgs84',\r\n\tsuccess: function (res) {\r\n\t\tconsole.log('当前位置的经度：' + res.longitude);\r\n\t\tconsole.log('当前位置的纬度：' + res.latitude);\r\n\t}\r\n});\r\n```\r\n\r\n 注意\r\n\r\n- H5：在较新的浏览器上，H5 端获取定位信息，要求部署在 **https** 服务上，本地预览（localhost）仍然可以使用 http 协议。\r\n- H5：国产安卓手机上，H5若无法定位，检查手机是否开通位置服务、GPS，ROM是否给该浏览器位置权限、浏览器是否对网页弹出请求给予定位的询问框。\r\n- H5：安卓手机在原生App内嵌H5时，无法定位需要原生App处理Webview。\r\n- H5：移动端浏览器普遍仅支持GPS定位，在GPS信号弱的地方可能定位失败。\r\n- H5：PC 设备使用 Chrome 浏览器的时候，位置信息是连接谷歌服务器获取的，国内用户可能获取位置信息失败。\r\n- H5：使用地图和定位相关需要在[腾讯地图开放平台](https://lbs.qq.com/dev/console/key/manage)申请密钥，填写在 [manifest.json](https://uniapp.dcloud.io/collocation/manifest?id=h5sdkconfig) 中。\r\n- H5：微信公众号可使用微信js sdk，[详见](https://ask.dcloud.net.cn/article/35380)\r\n- H5：2.9.9 alpha升级，优化 uni.getLocation 支持通过 IP 定位。默认通过getLocation获取，如果获取失败，备选方案是通过 IP 定位获取，用的是内置公共的key，如果你想正确使用，就填写正常的key。如果你不想使用，就填写错误的key即可。key配置：manifest.json ---> H5配置 ---> 定位和地图 ---> key。\r\n- App：Android由于谷歌服务被墙，或者手机上没有GMS，想正常定位就需要向高德等三方服务商申请SDK资质，获取AppKey。否则打包后定位就会不准。云打包时需要在manifest的SDK配置中填写Appkey。在manifest可视化界面有详细申请指南，详见：[https://ask.dcloud.net.cn/article/29](https://ask.dcloud.net.cn/article/29)。离线打包自行在原生工程中配置。注意包名、appkey、证书信息必须匹配。真机运行可以正常定位，是因为真机运行基座使用了DCloud向高德申请的sdk配置，打包后必须由开发者自己申请。如果手机自带GMS且网络环境可以正常访问google定位服务器，此时无需在manifest填写高德定位的sdk配置。\r\n- App：``<map>`` 组件默认为国测局坐标gcj02，调用 ``uni.getLocation`` 返回结果传递给 ``<map>`` 组件时，需指定 type 为 gcj02。\r\n- App：定位和map是2个东西。通过`getLocation`得到位置坐标后，可以在任意map地图上展示，比如定位使用高德，地图使用google的webview版地图。如果坐标系不同时，注意转换坐标系。\r\n- App：如果使用web-view加载地图，无需在manifest里配地图的sdk配置。\r\n- App：持续定位方案：iOS端可以申请持续定位权限，[参考](https://ask.dcloud.net.cn/article/12569)。Android如果进程被杀，代码无法执行。可以使用[unipush](https://ask.dcloud.net.cn/article/35622)，通过服务器激活App，执行透传消息，让App启动然后采集位置。Android上，即使自己写原生插件做后台进程，也很容易被杀，unipush是更合适的方案\r\n- 小程序：api默认不返回详细地址中文描述。需要中文地址有2种方式：1、使用高德地图小程序sdk，在app和微信上都可以获得中文地址，[参考](http://ask.dcloud.net.cn/article/35070)。2、只考虑app，使用``plus.geolocation``也可以获取中文地址。manifest里的App SDK配置仅用于app，小程序无需在这里配置。\r\n- 可以通过用户授权API来判断用户是否给应用授予定位权限[https://uniapp.dcloud.io/api/other/authorize](https://uniapp.dcloud.io/api/other/authorize)\r\n\r\n uni.chooseLocation(OBJECT)\r\n打开地图选择位置。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|√|√|√|√|x|x|\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|latitude|Number|否|目标地纬度，仅微信小程序2.9.0+支持|\r\n|longitude|Number|否|目标地经度，仅微信小程序2.9.0+支持|\r\n|keyword|String|否|搜索关键字，仅App平台支持|\r\n|success|Function|是|接口调用成功的回调函数，返回内容详见返回参数说明。|\r\n|fail|Function|否|接口调用失败的回调函数（获取定位失败、用户取消等情况下触发）|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**注意**\r\n- 因平台差异，如果SDK配置百度地图，需要设置keyword，才能显示相关地点\r\n- nvue下只支持高德地图，不支持百度地图\r\n- HBuilderX 2.4.0+ 非 weex 编译模式仅支持高德地图\r\n\r\n\r\n**success 返回参数说明**\r\n\r\n|参数|说明|\r\n|:-|:-|\r\n|name|位置名称|\r\n|address|详细地址|\r\n|latitude|纬度，浮点数，范围为-90~90，负数表示南纬，使用 gcj02 国测局坐标系。|\r\n|longitude|经度，浮点数，范围为-180~180，负数表示西经，使用 gcj02 国测局坐标系。|\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.chooseLocation({\r\n\tsuccess: function (res) {\r\n\t\tconsole.log('位置名称：' + res.name);\r\n\t\tconsole.log('详细地址：' + res.address);\r\n\t\tconsole.log('纬度：' + res.latitude);\r\n\t\tconsole.log('经度：' + res.longitude);\r\n\t}\r\n});\r\n```\r\n\r\n**注意**\r\n- 不同端，使用地图选择时基于的底层地图引擎不一样，如微信小程序和H5是腾讯地图，App和阿里小程序是高德地图，百度小程序是百度地图，详见地图map组件的使用注意事项。app中也可以使用百度定位，在manifest中配置，打包后生效。但app-nvue里只能用百度定位，不能用百度地图。另外选择地图、查看地图位置的API也仅支持高德地图。所以App端如无特殊必要，建议使用高德地图。\r\n- 微信内置浏览器中可使用微信js sdk，[详见](https://ask.dcloud.net.cn/article/35380)\r\n- chooseLocation属于封装型API，开发者若觉得不够灵活，可自行基于原始的map组件进行封装。插件市场已经有各种封装样例了。\r\n- 若Android App端位置不准，见上文uni.getLocation的注意事项\r\n","p":"command\\位置 - 获取位置.html"},{"t":"位置/查看位置","d":" uni.openLocation(OBJECT)\r\n使用应用内置地图查看位置。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|√|√|√|√|√|x|\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|平台差异说明|\r\n|:-|:-|:-|:-|:-|\r\n|latitude|Float|是|纬度，范围为-90~90，负数表示南纬，使用 gcj02 国测局坐标系||\r\n|longitude|Float|是|经度，范围为-180~180，负数表示西经，使用 gcj02 国测局坐标系||\r\n|scale|Int|否|缩放比例，范围5~18，默认为18|微信小程序|\r\n|name|String|否|位置名|支付宝必填|\r\n|address|String|否|地址的详细说明|支付宝必填|\r\n|success|Function|否|接口调用成功的回调函数||\r\n|fail|Function|否|接口调用失败的回调函数||\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|&nbsp;|\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.getLocation({\r\n\ttype: 'gcj02', //返回可以用于uni.openLocation的经纬度\r\n\tsuccess: function (res) {\r\n\t\tconst latitude = res.latitude;\r\n\t\tconst longitude = res.longitude;\r\n\t\tuni.openLocation({\r\n\t\t\tlatitude: latitude,\r\n\t\t\tlongitude: longitude,\r\n\t\t\tsuccess: function () {\r\n\t\t\t\tconsole.log('success');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n});\r\n```\r\n\r\n**Tips**\r\n\r\n- 本API是一个非原子的封装界面，开发者如有定制需求，可自己做页面实现类似功能。\r\n- 若定位不准，参考[uni.getLocation文档的注意事项](https://uniapp.dcloud.io/api/location/location)\r\n- ``<map>`` 组件默认为国测局坐标，调用 ``uni.getLocation`` 返回结果传递给 ``<map>`` 组件时，需指定 type 为 gcj02。\r\n- App 端使用地图组件需要向高德等三方服务商申请SDK资质，获取AppKey，打包时需要在manifest的SDK配置中填写Appkey。在manifest可视化界面有详细申请指南，详见：[https://ask.dcloud.net.cn/article/29](https://ask.dcloud.net.cn/article/29)。\r\n- H5 端使用地图和定位相关需要在[腾讯地图开放平台](https://lbs.qq.com/dev/console/key/manage)申请密钥，填写在 [manifest.json](https://uniapp.dcloud.io/collocation/manifest?id=h5sdkconfig) 中。\r\n- iOS端 如需使用第三方地图进行导航，需要在 manifest.json 文件内增加 ``urlschemewhitelist`` 节点，在线打包即可\r\n- 不同平台打开的地图不一样，App端是高德地图（不支持百度地图）、H5端是腾讯地图、微信小程序端是腾讯地图、百度小程序是百度地图、阿里小程序是高德地图、字节跳动小程序是高德地图。\r\n\r\n```json\r\n{  \r\n    \"app-plus\": {  \r\n        \"distribute\": {  \r\n            \"ios\": {  \r\n                \"urlschemewhitelist\": [  \r\n                    \"baidumap\",  \r\n                    \"iosamap\",  \r\n                    \"qqmap\"  \r\n                ]  \r\n            }  \r\n        }  \r\n    }  \r\n}  \r\n```\r\n\r\n- 点击返回也会进入 `fail` 回调中\r\n","p":"command\\位置 - 查看位置.html"},{"t":"位置/地图组件控制","d":" uni.createMapContext(mapId,this)\r\n创建并返回 map 上下文 ``mapContext`` 对象。在自定义组件下，第二个参数传入组件实例this，以操作组件内 ``<map>`` 组件。\r\n\r\n**注意：uni.createMapContext(mapId, this)**\r\n- app-nvue 平台 2.2.5+ 支持 uni.createMapContext(mapId, this)\r\n- app-nvue 平台 2.2.5- 需要同时设置组件属性id和ref ``<map id=\"map1\" ref=\"map1\"></map>``，或者直接使用 ref，例如 ``this.$refs.map1``\r\n\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|√|√|√|√|x|1.9.0+|\r\n\r\nmapContext\r\n\r\n``mapContext`` 通过 mapId 跟一个 ``<map>`` 组件绑定，通过它可以操作对应的 ``<map>`` 组件。\r\n\r\n**mapContext 对象的方法列表**\r\n\r\n|方法|参数|说明|平台差异说明|最低版本|\r\n|:-|:-|:-|:-|:-|\r\n|getCenterLocation|OBJECT|获取当前地图中心的经纬度，返回的是 gcj02 坐标系，可以用于 [uni.openLocation](api/location/location?id=getlocation)|||\r\n|moveToLocation|OBJECT|将地图中心移动到当前定位点，需要配合map组件的show-location使用|||\r\n|translateMarker|OBJECT|平移marker，带动画|app-nvue 2.1.5+、微信小程序带动画||\r\n|includePoints|OBJECT|缩放视野展示所有经纬度|app-nvue 2.1.5+||\r\n|getRegion|OBJECT|获取当前地图的视野范围|||\r\n|getScale|OBJECT|获取当前地图的缩放级别|||\r\n|$getAppMap||获取原生地图对象 [plus.maps.Map](https://www.html5plus.org/doc/zh_cn/maps.htmlplus.maps.Map)|app-vue自定义组件模式|1.9.3|\r\n\r\n`$getAppMap()` 注意事项：\r\n\r\n- 在页面中，必须在 `onReady` 中调用。\r\n- 在组件中，必须在 `mounted` 中调用。\r\n- nvue没有`$getAppMap()`，请使用`createMapContext`\r\n- `uni-app`中使用原生地图无需提供占位div，得到`$getAppMap()`后直接js使用即可。\r\n\r\n**getCenterLocation 的 OBJECT 参数列表**\r\n\r\n|参数|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|success|Function|否|接口调用成功的回调函数 ，res = { longitude: \"经度\", latitude: \"纬度\"}|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n\r\n**moveToLocation 的 OBJECT 参数列表**\r\n\r\n|参数\t\t\t|类型\t\t\t|必填\t|说明\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|:-\t\t\t\t|:-\t\t\t\t|:-\t\t|:-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|longitude|Number\t\t|否\t\t|经度 ，App 2.6.8、H5、仅微信小程序 2.8.0+ 支持\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|latitude\t|Number\t\t|否\t\t|纬度 ，App 2.6.8、H5、仅微信小程序 2.8.0+ 支持\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|success\t|Function\t|否\t\t|接口调用成功的回调函数 ，res = { longitude: \"经度\", latitude: \"纬度\"}|\r\n|fail\t\t\t|Function\t|否\t\t|接口调用失败的回调函数\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|complete\t|Function\t|否\t\t|接口调用结束的回调函数（调用成功、失败都会执行）\t\t\t\t\t\t\t\t\t\t\t|\r\n\r\n\r\n**translateMarker 的 OBJECT 参数列表**\r\n\r\n|参数|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|markerId|Number|是|指定 marker|\r\n|destination|Object|是|指定 marker 移动到的目标点|\r\n|autoRotate|Boolean|否|移动过程中是否自动旋转 marker|\r\n|rotate|Number|否|marker 的旋转角度|\r\n|duration|Number|否|动画持续时长，默认值1000ms，平移与旋转分别计算|\r\n|animationEnd|Function|否|\t动画结束回调函数|\r\n|fail|Function|否|\t接口调用失败的回调函数|\r\n\r\n**includePoints 的 OBJECT 参数列表**\r\n\r\n|参数|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|points|Array|是|要显示在可视区域内的坐标点列表，[{latitude, longitude}]|\r\n|padding|Array|否|坐标点形成的矩形边缘到地图边缘的距离，单位像素。格式为[上，右，下，左]，安卓上只能识别数组第一项，上下左右的padding一致。开发者工具暂不支持padding参数。|\r\n\r\n**getRegion 的 OBJECT 参数列表**\r\n\r\n|参数|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|success|Function|否|接口调用成功的回调函数，res = {southwest, northeast}，西南角与东北角的经纬度|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**getScale 的 OBJECT 参数列表**\r\n\r\n|参数|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|success|Function|否|接口调用成功的回调函数，res = {scale}|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n mapSearch 模块(module)\r\n\r\n reverseGeocode(Object,callback)\r\n> 反向地理编码\r\n\r\n Object\r\n属性|类型 |默认值|必填|说明\r\n:--|:--|:--|:--|:--|\r\npoint|Object| |是|{latitude: 纬度, longitude: 经度}\r\n\r\n callback 返回 Object 参数说明\r\n属性|类型 |说明\r\n:--|:--|:--|\r\ntype|String|\"success\" 表示成功， \"fail\" 表示失败\r\ncode|Number| 成功返回 0,失败返回相应 code 码\r\nmessage|String|失败描述\r\naddress|String|查询后地址 （成功时返回）\r\n\r\n\r\n poiSearchNearBy（Object,callback);\r\n> 周边检索\r\n\r\n Object\r\n属性|类型 |默认值|必填|说明\r\n:--|:--|:--|:--|:--|\r\npoint|Object| |是|检索的中心点坐标 {latitude: 纬度, longitude: 经度}\r\nkey|String| | 是|搜索关键字\r\nradius|Number|3000|否|检索的半径，单位为米\r\nindex|Number|1|否|要获取检索结果的页号索引\r\n\r\n callback 返回 Object 参数说明\r\n属性|类型 |说明\r\n:--|:--|:--|\r\ntype|String|\"success\" 表示成功， \"fail\" 表示失败\r\ncode|Number| 成功返回 0,失败返回相应 code 码\r\nmessage|String|失败描述\r\ntotalNumber|Number|返回的POI数目\r\ncurrentNumber|Number|当前页POI数目\r\npageNumber|Number|页数\r\npageIndex|Number|当前页号索引\r\npoiList|Array.&lt;poiObject&gt;|POI信息数组\r\n\r\n poiObject\r\n属性|类型 |说明\r\n:--|:--|:--|\r\nlocation|Object|{latitude: 纬度, longitude: 经度}\r\nname|String|名称\r\ntype|String|类型\r\ndistance|Number|距离（单位米）\r\naddress|String|地址\r\n\r\n\r\n**Tips**\r\n\r\n- App端使用map，nvue比vue更强大，且没有层级问题。\r\n- App端vue页面默认为高德地图，也可以选择百度地图。但app-nvue只有高德地图，没有百度地图。以及地图选择api（mapSearch），只支持高德地图。\r\n- H5 端获取定位信息，需要部署在 **https** 服务上，本地预览（localhost）仍然可以使用 http 协议。\r\n- 无 GPS 模块的 PC 设备使用 Chrome 浏览器的时候，位置信息是连接谷歌服务器获取的，国内用户可能获取位置信息失败。\r\n- App 端使用地图组件需要向高德或百度等三方服务商申请SDK资质，获取AppKey，打包时需要在manifest的SDK配置中填写Appkey。在manifest可视化界面有详细申请指南，详见：[https://ask.dcloud.net.cn/article/29](https://ask.dcloud.net.cn/article/29)\r\n- ``<map>`` 组件默认为国测局坐标，调用 ``uni.getLocation`` 返回结果传递给 ``<map>`` 组件时，需指定 type 为 gcj02。\r\n","p":"command\\位置 - 地图组件控制.html"},{"t":"媒体/图片","d":" uni.chooseImage(OBJECT)\r\n从本地相册选择图片或使用相机拍照。\r\n\r\nApp端如需要更丰富的相机拍照API（如直接调用前置摄像头），参考[plus.camera](https://www.html5plus.org/doc/zh_cn/camera.html)\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|平台差异说明|\r\n|:-|:-|:-|:-|:-|\r\n|count|Number|否|最多可以选择的图片张数，默认9|见下方说明|\r\n|sizeType|Array&lt;String&gt;|否|original 原图，compressed 压缩图，默认二者都有|App、微信小程序、支付宝小程序、百度小程序|\r\n|extension|Array&lt;String&gt;|否|根据文件拓展名过滤，每一项都不能是空字符串。默认不过滤。|H5(HBuilder X2.9.9+)|\r\n|sourceType|Array&lt;String&gt;|否|album 从相册选图，camera 使用相机，默认二者都有。如需直接开相机或直接选相册，请只使用一个选项||\r\n|crop|Object|否|图像裁剪参数，设置后 sizeType 失效|App 3.1.19+|\r\n|success|Function|是|成功则返回图片的本地文件路径列表 tempFilePaths||\r\n|fail|Function|否|接口调用失败的回调函数|小程序、App|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|&nbsp;|\r\n\r\n**crop 参数说明**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|quality|Number|否|取值范围为1-100，数值越小，质量越低（仅对jpg格式有效）。默认值为80。|\r\n|width|Number|是|裁剪的宽度，单位为px，用于计算裁剪宽高比。|\r\n|height|Number|是|裁剪的高度，单位为px，用于计算裁剪宽高比。|\r\n|resize|Boolean|否|是否将width和height作为裁剪保存图片真实的像素值。默认值为true。注：设置为false时在裁剪编辑界面显示图片的像素值，设置为true时不显示|\r\n\r\n**Tips**\r\n\r\n- count 值在 H5 平台的表现，基于浏览器本身的规范。目前测试的结果来看，只能限制单选/多选，并不能限制数量。并且，在实际的手机浏览器很少有能够支持多选的。\r\n- sourceType 在H5端对应`input`的`capture`属性，设置为`['album']`无效，依然可以使用相机。\r\n- 可以通过用户授权API来判断用户是否给应用授予相册或摄像头的访问权限[https://uniapp.dcloud.io/api/other/authorize](https://uniapp.dcloud.io/api/other/authorize)\r\n- App端如需选择非媒体文件，可在插件市场搜索[文件选择](https://ext.dcloud.net.cn/search?q=文件选择)，其中Android端可以使用Native.js，无需原生插件，而iOS端需要原生插件。\r\n- 选择照片大多为了上传，uni ui封装了更完善的[uni-file-picker组件](https://ext.dcloud.net.cn/plugin?id=4079)，文件选择、上传到uniCloud的免费存储和cdn中，一站式集成。强烈推荐使用。\r\n\r\n\r\n**注：文件的临时路径，在应用本次启动期间可以正常使用，如需持久保存，需在主动调用 [uni.saveFile](api/file/file?id=savefile)，在应用下次启动时才能访问得到。**\r\n\r\n**success 返回参数说明**\r\n\r\n|参数|类型|说明|\r\n|:-|:-|:-|\r\n|tempFilePaths|Array&lt;String&gt;|图片的本地文件路径列表|\r\n|tempFiles|Array&lt;Object&gt;、Array&lt;File&gt;|图片的本地文件列表，每一项是一个 File 对象|\r\n\r\n**File 对象结构如下**\r\n\r\n|参数|类型|说明|\r\n|:-|:-|:-|\r\n|path|String|本地文件路径|\r\n|size|Number|本地文件大小，单位：B|\r\n|name|String|包含扩展名的文件名称，仅H5支持|\r\n|type|String|文件类型，仅H5支持|\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.chooseImage({\r\n\tcount: 6, //默认9\r\n\tsizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\r\n\tsourceType: ['album'], //从相册选择\r\n\tsuccess: function (res) {\r\n\t\tconsole.log(JSON.stringify(res.tempFilePaths));\r\n\t}\r\n});\r\n```\r\n\r\n uni.previewImage(OBJECT) @unipreviewimageobject\r\n预览图片。\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|平台差异说明|\r\n|:-|:-|:-|:-|:-|\r\n|current|String/Number|详见下方说明|详见下方说明||\r\n|urls|Array&lt;String&gt;|是|需要预览的图片链接列表||\r\n|indicator|String|否|图片指示器样式，可取值：\"default\" - 底部圆点指示器； \"number\" - 顶部数字指示器； \"none\" - 不显示指示器。|App|\r\n|loop|Boolean|否|是否可循环预览，默认值为 false|App|\r\n|longPressActions|Object|否|长按图片显示操作菜单，如不填默认为**保存相册**|App 1.9.5+|\r\n|success|Function|否|接口调用成功的回调函数||\r\n|fail|Function|否|接口调用失败的回调函数||\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|&nbsp;|\r\n\r\n**current 参数说明**\r\n\r\n> 1.9.5+ 支持传图片在 urls 中的索引值\r\n\r\ncurrent 为当前显示图片的链接/索引值，不填或填写的值无效则为 urls 的第一张。**App平台在 1.9.5至1.9.8之间，current为必填。不填会报错**\r\n\r\n注意，当 urls 中有重复的图片链接时：\r\n\r\n- 传链接，预览结果始终显示该链接在 urls 中第一次出现的位置。\r\n- 传索引值，在微信/百度/字节跳动小程序平台，会过滤掉传入的 urls 中该索引值之前与其对应图片链接重复的值。其它平台会保留原始的 urls 不会做去重处理。\r\n\r\n举例说明：\r\n\r\n一组图片 `[A, B1, C, B2, D]`，其中 B1 与 B2 的图片链接是一样的。\r\n\r\n- 传 B2 的链接，预览的结果是 B1，前一张是 A，下一张是 C。\r\n- 传 B2 的索引值 3，预览的结果是 B2，前一张是 C，下一张是 D。此时在微信/百度/字节跳动小程序平台，最终传入的 urls 是 `[A, C, B2, D]`，过滤掉了与 B2 重复的 B1。\r\n\r\n**longPressActions 参数说明**\r\n\r\n|参数|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|itemList|Array&lt;String&gt;|是|按钮的文字数组|\r\n|itemColor|String|否|按钮的文字颜色，字符串格式，默认为\"000000\"|\r\n|success|Function|否|接口调用成功的回调函数，详见返回参数说明|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**success 返回参数说明**\r\n\r\n|参数|类型|说明|\r\n|:-|:-|:-|\r\n|index|Number|用户长按图片的索引值|\r\n|tapIndex|Number|用户点击按钮列表的索引值|\r\n\r\n**示例**\r\n\r\n```javascript\r\n// 从相册选择6张图\r\nuni.chooseImage({\r\n\tcount: 6,\r\n\tsizeType: ['original', 'compressed'],\r\n\tsourceType: ['album'],\r\n\tsuccess: function(res) {\r\n\t\t// 预览图片\r\n\t\tuni.previewImage({\r\n\t\t\turls: res.tempFilePaths,\r\n\t\t\tlongPressActions: {\r\n\t\t\t\titemList: ['发送给朋友', '保存图片', '收藏'],\r\n\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\tconsole.log('选中了第' + (data.tapIndex + 1) + '个按钮,第' + (data.index + 1) + '张图片');\r\n\t\t\t\t},\r\n\t\t\t\tfail: function(err) {\r\n\t\t\t\t\tconsole.log(err.errMsg);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t});\r\n```\r\n\r\n**TIPS**\r\n- 在非H5端，previewImage是原生实现的，界面自定义灵活度较低。\r\n- 插件市场有前端实现的previewImage，性能低于原生实现，但界面可随意定义；插件市场也有适于App端的previewImage原生插件，提供了更多功能。\r\n\r\n\r\n uni.getImageInfo(OBJECT)\r\n\r\n获取图片信息。\r\n\r\n小程序下获取网络图片信息需先配置download域名白名单才能生效。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|√|√|√|√|√|√|\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|src|String|是|图片的路径，可以是相对路径，临时文件路径，存储文件路径，网络图片路径|\r\n|success|Function|否|接口调用成功的回调函数|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**success 返回参数说明**\r\n\r\n|参数名|类型|说明|平台差异说明|\r\n|:-|:-|:-|:-|\r\n|width|Number|图片宽度，单位px||\r\n|height|Number|图片高度，单位px||\r\n|path|String|返回图片的本地路径||\r\n|orientation|String|返回图片的方向，有效值见下表|App、小程序|\r\n|type|String|返回图片的格式|App、小程序|\r\n\r\n**orientation 参数说明**\r\n\r\n|枚举值|说明|\r\n|:-|:-|\r\n|up|默认|\r\n|down|180度旋转|\r\n|left|逆时针旋转90度|\r\n|right|顺时针旋转90度|\r\n|up-mirrored|同up，但水平翻转|\r\n|down-mirrored|同down，但水平翻转|\r\n|left-mirrored|同left，但垂直翻转|\r\n|right-mirrored|同right，但垂直翻转|\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.chooseImage({\r\n\tcount: 1,\r\n\tsourceType: ['album'],\r\n\tsuccess: function (res) {\r\n\t\tuni.getImageInfo({\r\n\t\t\tsrc: res.tempFilePaths[0],\r\n\t\t\tsuccess: function (image) {\r\n\t\t\t\tconsole.log(image.width);\r\n\t\t\t\tconsole.log(image.height);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n});\r\n```\r\n\r\n uni.saveImageToPhotosAlbum(OBJECT)\r\n保存图片到系统相册。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|x|√|√|√|√|√|\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|filePath|String|是|图片文件路径，可以是临时文件路径也可以是永久文件路径，不支持网络图片路径|\r\n|success|Function|否|接口调用成功的回调函数|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**success 返回参数说明**\r\n\r\n|参数名|类型|说明|\r\n|:-|:-|:-|\r\n|path|String|保存到相册的图片路径，仅 App 3.0.5+ 支持|\r\n|errMsg|String|调用结果|\r\n\r\n**注意**\r\n\r\n- 可以通过用户授权API来判断用户是否给应用授予相册的访问权限[https://uniapp.dcloud.io/api/other/authorize](https://uniapp.dcloud.io/api/other/authorize)\r\n- H5没有API可触发保存到相册行为，下载图片时浏览器会询问图片存放地址。\r\n\r\n**示例代码：**\r\n\r\n```javascript\r\nuni.chooseImage({\r\n\tcount: 1,\r\n\tsourceType: ['camera'],\r\n\tsuccess: function (res) {\r\n\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\tfilePath: res.tempFilePaths[0],\r\n\t\t\tsuccess: function () {\r\n\t\t\t\tconsole.log('save success');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n});\r\n```\r\n\r\n uni.compressImage(OBJECT)\r\n\r\n压缩图片接口，可选压缩质量\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|x|√|√|√(基础库版本>=3.110.3)|√|√|\r\n\r\n**OBJECT 参数说明**\r\n\r\n| 属性 | 类型 | 默认值 | 必填 | 说明 | 平台差异说明 |\r\n| :- | :- | :- | :- | :- | :- |\r\n| src | String |  | 是 | 图片路径，图片的路径，可以是相对路径、临时文件路径、存储文件路径 ||\r\n| quality | Number | 80 | 否 | 压缩质量，范围0～100，数值越小，质量越低，压缩率越高（仅对jpg有效） ||\r\n| width | String | auto | 否 | 缩放图片的宽度，支持像素值（如\"100px\"）、百分比（如\"50%\"）、自动计算（如\"auto\"，即根据height与源图高的缩放比例计算，若未设置height则使用源图高度）|App 3.0.0+|\r\n| height | String | auto | 否 | 缩放图片的高度，支持像素值（如\"100px\"）、百分比（如\"50%\"）、自动计算（如\"auto\"，即根据height与源图高的缩放比例计算，若未设置height则使用源图高度）|App 3.0.0+|\r\n| success | Function |  | 否 | 接口调用成功的回调函数 ||\r\n| fail | Function |  | 否 | 接口调用失败的回调函数 ||\r\n| complete | Function |  | 否 | 接口调用结束的回调函数（调用成功、失败都会执行） ||\r\n\r\n**success 返回参数说明**\r\n\r\n| 属性 | 类型 | 说明 |\r\n| :- | :- | :- |\r\n| tempFilePath | String | 压缩后图片的临时文件路径 |\r\n\r\n**示例代码：**\r\n\r\n```js\r\nuni.compressImage({\r\n  src: '/static/logo.jpg',\r\n  quality: 80,\r\n  success: res => {\r\n    console.log(res.tempFilePath)\r\n  }\r\n})\r\n```\r\n","p":"command\\媒体 - 图片.html"},{"t":"媒体/文件","d":" uni.chooseFile(OBJECT)\n从本地选择文件。\n\n本API主要用于选择非媒体文件，如果选择的文件是媒体文件，另有3个专用API：\n- [图片选择](https://uniapp.dcloud.io/api/media/image?id=chooseimage)\n- [视频选择](https://uniapp.dcloud.io/api/media/video?id=choosevideo)\n- [多媒体文件选择(含图片视频)](https://uniapp.dcloud.io/api/media/video?id=choosemedia)\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|x|√`(HBuilder X2.9.9+)`|x`(可使用wx.chooseMessageFile)`|x|x|x|x|\n\n- App端如需选择非媒体文件，可在插件市场搜索[文件选择](https://ext.dcloud.net.cn/search?q=文件选择)，其中Android端可以使用Native.js，无需原生插件，而iOS端需要原生插件。\n- App端如果想选择下载到`_doc`、`_downloads`、`_documents`等plus.io控制的目录下的文件，可通过[plus.io Api](https://www.html5plus.org/doc/zh_cn/io.html)，自己做选择框。\n- 选择文件大多为了上传，uni ui封装了更完善的[uni-file-picker组件](https://ext.dcloud.net.cn/plugin?id=4079)，文件选择、上传到uniCloud的免费存储和cdn中，一站式集成。强烈推荐使用。\n\n**OBJECT 参数说明**\n\n|参数名|类型|默认值|必填|说明|平台差异说明|\n|:-|:-|:-|:-|:-|:-|\n|count|Number|100|否|最多可以选择的文件数量|见下方说明|\n|type|String|'all'|否|所选的文件的类型|见下方说明|\n|extension|Array&lt;String&gt;||否|根据文件拓展名过滤，每一项都不能是空字符串。默认不过滤。|见下方说明|\n|sourceType|Array&lt;String&gt;|['album','camera']|否|（仅在type为`image`或`video`时可用）`album` 从相册选图，`camera` 使用相机，默认二者都有。如需直接开相机或直接选相册，请只使用一个选项||\n|success|Function||是|成功则返回图片的本地文件路径列表 `tempFilePaths`||\n|fail|Function||否|接口调用失败的回调函数||\n|complete|Function||否|接口调用结束的回调函数（调用成功、失败都会执行）|&nbsp;|\n\n**Tips**\n\n- count 值在 H5 平台的表现，基于浏览器本身的规范。目前测试的结果来看，只能限制单选/多选，并不能限制数量。并且，在实际的手机浏览器很少有能够支持多选的。\n- sourceType 在H5端对应`input`的`capture`属性，设置为`['album']`无效，依然可以使用相机。\n- extension暂只支持文件后缀名，例如`['.zip','.exe','.js']`，不支持`application/msword`等类似值\n\n**注：文件的临时路径，在应用本次启动期间可以正常使用，如需持久保存，需在主动调用 [uni.saveFile](api/file/file?id=savefile)，在应用下次启动时才能访问得到。**\n\n**OBJECT.type 的合法值**\n\n|值|说明|\n|:-|:-|\n|all|从所有文件选择|\n|video|只能选择视频文件|\n|image|只能选择图片文件|\n\n**Tips**\n\n- 如果type属性和extension同时存在，例如`{type:'image',extension:['.png','.jpg']}`，则会选择`image/png,image/jpg`文件\n- 如果只配置extension属性，例如`{extension:['.doc','.xlsx','.docx']}`，则会选择`.doc,.xlsx,.docx`文件，详情见[`accept属性`](https://developer.mozilla.org/zh-CN/docs/Web/HTML/Attributes/accept)\n- 在微信环境中，如果`type=\"all\"`，则`extension`属性失效\n\n**success 返回参数说明**\n\n|参数|类型|说明|\n|:-|:-|:-|\n|tempFilePaths|Array&lt;String&gt;|文件的本地文件路径列表|\n|tempFiles|Array&lt;Object&gt;、Array&lt;File&gt;|文件的本地文件列表，每一项是一个 File 对象|\n\n**File 对象结构如下**\n\n|参数|类型|说明|\n|:-|:-|:-|\n|path|String|本地文件路径|\n|size|Number|本地文件大小，单位：B|\n|name|String|包含扩展名的文件名称，仅H5支持|\n|type|String|文件类型，仅H5支持|\n\n**示例**\n\n```javascript\nuni.chooseFile({\n  count: 6, //默认100\n  extension:['.zip','.doc'],\n\tsuccess: function (res) {\n\t\tconsole.log(JSON.stringify(res.tempFilePaths));\n\t}\n});\n\n// 选择图片文件\nuni.chooseFile({\n  count: 10,\n  type: 'image',\n  success (res) {\n    // tempFilePath可以作为img标签的src属性显示图片\n    const tempFilePaths = res.tempFiles\n  }\n})\n```\n\n wx.chooseMessageFile(OBJECT)\n\n从微信聊天会话中选择文件。\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|x|x|√`(基础库2.5.0+)`|x|x|x|x|\n\n","p":"command\\媒体 - 文件.html"},{"t":"媒体/录音管理","d":" uni.getRecorderManager()\r\n获取**全局唯一**的录音管理器 ``recorderManager``。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|x|√|x|√|√|√|\r\n\r\n**recorderManager 对象的方法列表**\r\n\r\n|方法|参数|说明|平台差异说明|\r\n|:-|:-|:-|:-|\r\n|start|options|开始录音||\r\n|pause||暂停录音|App 暂不支持|\r\n|resume||继续录音|App 暂不支持|\r\n|stop||停止录音||\r\n|onStart|callback|录音开始事件||\r\n|onPause|callback|录音暂停事件||\r\n|onStop|callback|录音停止事件，会回调文件地址||\r\n|onFrameRecorded|callback|已录制完指定帧大小的文件，会回调录音分片结果数据。如果设置了 frameSize ，则会回调此事件|App 暂不支持|\r\n|onError|callback|录音错误事件, 会回调错误信息|&nbsp;|\r\n\r\n**start(options) 说明**\r\n\r\n|属性|类型|必填|说明|平台差异说明|\r\n|:-|:-|:-|:-|:-|\r\n|duration|Number|否|指定录音的时长，单位 ms ，如果传入了合法的 duration ，在到达指定的 duration 后会自动停止录音，最大值 600000（10 分钟）,默认值 60000（1 分钟）|App、小程序支持|\r\n|sampleRate|Number|否|采样率，有效值 8000/16000/44100|App、小程序支持|\r\n|numberOfChannels|Number|否|录音通道数，有效值 1/2|仅小程序支持|\r\n|encodeBitRate|Number|否|编码码率，有效值见下表格|仅小程序支持|\r\n|format|String|否|音频格式，有效值 aac/mp3/wav/PCM。App默认值为mp3，小程序默认值aac|App、小程序支持|\r\n|frameSize|String|否|指定帧大小，单位 KB。传入 frameSize 后，每录制指定帧大小的内容后，会回调录制的文件内容，不指定则不会回调。暂仅支持 mp3 格式。|App、百度小程序不支持|\r\n\r\n其中，采样率和码率有一定要求，具体有效值如下：\r\n\r\n|采样率|编码码率|\r\n|:-|:-|\r\n|8000|16000 ~ 48000|\r\n|11025|16000 ~ 48000|\r\n|12000|24000 ~ 64000|\r\n|16000|24000 ~ 96000|\r\n|22050|32000 ~ 128000|\r\n|24000|32000 ~ 128000|\r\n|32000|48000 ~ 192000|\r\n|44100|64000 ~ 320000|\r\n|48000|64000 ~ 320000|\r\n\r\n**onStop(callback) 回调结果说明**\r\n\r\n|属性|类型|说明|\r\n|:-|:-|:-|\r\n|tempFilePath|String|录音文件的临时路径|\r\n\r\n\r\n**onFrameRecorded(callback) 回调结果说明**\r\n\r\n|属性|类型|说明|\r\n|:-|:-|:-|\r\n|frameBuffer|ArrayBuffer|录音分片结果数据|\r\n|isLastFrame|Boolean|当前帧是否正常录音结束前的最后一帧|\r\n\r\n**onError(callback) 回调结果说明**\r\n\r\n|属性|类型|说明|\r\n|:-|:-|:-|\r\n|errMsg|String|错误信息|\r\n\r\n**注意**\r\n\r\n- 可以通过用户授权API来判断用户是否给应用授予麦克风的访问权限[https://uniapp.dcloud.io/api/other/authorize](https://uniapp.dcloud.io/api/other/authorize)\r\n\r\n**示例**\r\n\r\n```html\r\n<template>\r\n\t<view>\r\n\t\t<button @tap=\"startRecord\">开始录音</button>\r\n\t\t<button @tap=\"endRecord\">停止录音</button>\r\n\t\t<button @tap=\"playVoice\">播放录音</button>\r\n\t</view>\r\n</template>\r\n```\r\n\r\n```javascript\r\nconst recorderManager = uni.getRecorderManager();\r\nconst innerAudioContext = uni.createInnerAudioContext();\r\n\r\ninnerAudioContext.autoplay = true;\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\ttext: 'uni-app',\r\n\t\t\tvoicePath: ''\r\n\t\t}\r\n\t},\r\n\tonLoad() {\r\n\t\tlet self = this;\r\n\t\trecorderManager.onStop(function (res) {\r\n\t\t\tconsole.log('recorder stop' + JSON.stringify(res));\r\n\t\t\tself.voicePath = res.tempFilePath;\r\n\t\t});\r\n\t},\r\n\tmethods: {\r\n\t\tstartRecord() {\r\n\t\t\tconsole.log('开始录音');\r\n\r\n\t\t\trecorderManager.start();\r\n\t\t},\r\n\t\tendRecord() {\r\n\t\t\tconsole.log('录音结束');\r\n\t\t\trecorderManager.stop();\r\n\t\t},\r\n\t\tplayVoice() {\r\n\t\t\tconsole.log('播放录音');\r\n\r\n\t\t\tif (this.voicePath) {\r\n\t\t\t\tinnerAudioContext.src = this.voicePath;\r\n\t\t\t\tinnerAudioContext.play();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n","p":"command\\媒体 - 录音管理.html"},{"t":"媒体/背景音频播放管理","d":" uni.getBackgroundAudioManager()\r\n获取**全局唯一**的背景音频管理器 ``backgroundAudioManager``。\r\n\r\n背景音频，不是游戏的背景音乐，而是类似QQ音乐那样，App在后台时，仍然在播放音乐。如果你不需要在App切后台时继续播放，那么不应该使用本API，而应该使用普通音频API[uni.createInnerAudioContext](https://uniapp.dcloud.io/api/media/audio-context)。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|x|√|x|√|√|√|\r\n\r\n**backgroundAudioManager 对象的属性列表**\r\n\r\n|属性|类型|说明|只读|\r\n|:-|:-|:-|:-|\r\n|duration|Number|当前音频的长度（单位：s），只有在当前有合法的 src 时返回|是|\r\n|currentTime|Number|当前音频的播放位置（单位：s），只有在当前有合法的 src 时返回|是|\r\n|paused|Boolean|当前是是否暂停或停止状态，true 表示暂停或停止，false 表示正在播放|是|\r\n|src|String|音频的数据源，默认为空字符串，**当设置了新的 src 时，会自动开始播放，**目前支持的格式有 m4a, aac, mp3, wav|否|\r\n|startTime|Number|音频开始播放的位置（单位：s）|否|\r\n|buffered|Number|音频缓冲的时间点，仅保证当前播放时间点到此时间点内容已缓冲。|是|\r\n|title|String|音频标题，用于做原生音频播放器音频标题。原生音频播放器中的分享功能，分享出去的卡片标题，也将使用该值。|否|\r\n|epname|String|专辑名，原生音频播放器中的分享功能，分享出去的卡片简介，也将使用该值。|否|\r\n|singer|String|歌手名，原生音频播放器中的分享功能，分享出去的卡片简介，也将使用该值。|否|\r\n|coverImgUrl|String|封面图url，用于做原生音频播放器背景图。原生音频播放器中的分享功能，分享出去的卡片配图及背景也将使用该图。|否|\r\n|webUrl|String|页面链接，原生音频播放器中的分享功能，分享出去的卡片简介，也将使用该值。|否|\r\n|protocol|String|音频协议。默认值为 'http'，设置 'hls' 可以支持播放 HLS 协议的直播音频，App平台暂不支持|否|\r\n\r\n**backgroundAudioManager 对象的方法列表**\r\n\r\n|方法|参数|说明|\r\n|:-|:-|:-|\r\n|play||播放|\r\n|pause||暂停|\r\n|stop||停止|\r\n|seek|position|跳转到指定位置，单位 s|\r\n|onCanplay|callback|背景音频进入可以播放状态，但不保证后面可以流畅播放|\r\n|onPlay|callback|背景音频播放事件|\r\n|onPause|callback|背景音频暂停事件|\r\n|onStop|callback|背景音频停止事件|\r\n|onEnded|callback|背景音频自然播放结束事件|\r\n|onTimeUpdate|callback|背景音频播放进度更新事件|\r\n|onPrev|callback|用户在系统音乐播放面板点击上一曲事件（iOS only）|\r\n|onNext|callback|用户在系统音乐播放面板点击下一曲事件（iOS only）|\r\n|onError|callback|背景音频播放错误事件|\r\n|onWaiting|callback|音频加载中事件，当音频因为数据不足，需要停下来加载时会触发|\r\n\r\nerrCode 说明\r\n\r\n|errCode|说明|\r\n|:-|:-|\r\n|10001|系统错误|\r\n|10002|网络错误|\r\n|10003|文件错误|\r\n|10004|格式错误|\r\n|-1|未知错误|\r\n\r\n**示例**\r\n\r\n```javascript\r\nconst bgAudioManager = uni.getBackgroundAudioManager();\r\nbgAudioManager.title = '致爱丽丝';\r\nbgAudioManager.singer = '暂无';\r\nbgAudioManager.coverImgUrl = 'https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/7fbf26a0-4f4a-11eb-b680-7980c8a877b8.png';\r\nbgAudioManager.src = 'https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-hello-uniapp/2cc220e0-c27a-11ea-9dfb-6da8e309e0d8.mp3';\r\n```\r\n\r\n\r\n**注意**\r\n因为背景音频播放耗费手机电量，所以平台都有管控，需在manifest中填写申请。\r\n- ios App平台，背景播放需在manifest.json -> app-plus -> distribute -> ios 节点添加 ``\"UIBackgroundModes\":[\"audio\"]`` 才能保证音乐可以后台播放（打包成ipa生效）\r\n- 小程序平台，需在manifest.json 对应的小程序节点下，填写\"requiredBackgroundModes\": [\"audio\"]。发布小程序时平台会审核\r\n- Android App端默认不会在通知栏出现音量控制，如需此功能，需要在插件市场单独下载原生插件，[详见](https://ext.dcloud.net.cn/search?q=%E9%80%9A%E7%9F%A5%E6%A0%8F+%E9%9F%B3%E4%B9%90%E6%8E%A7%E5%88%B6)\r\n","p":"command\\媒体 - 背景音频播放管理.html"},{"t":"媒体/音频组件控制","d":" uni.createInnerAudioContext()\r\n创建并返回内部 audio 上下文 `innerAudioContext` 对象。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|√|√|1.23.4+|√|√|√|\r\n\r\n**innerAudioContext 对象的属性列表**\r\n\r\n|属性|类型|说明|只读|平台差异说明|\r\n|:-|:-|:-|:-|:-|\r\n|src|String|音频的数据链接，用于直接播放。|否|微信小程序不支持本地路径|\r\n|startTime|Number|开始播放的位置（单位：s），默认 0|否||\r\n|autoplay|Boolean|是否自动开始播放，默认 false|否|H5端部分浏览器不支持|\r\n|loop|Boolean|是否循环播放，默认 false|否||\r\n|obeyMuteSwitch|Boolean|是否遵循系统静音开关，当此参数为 false 时，即使用户打开了静音开关，也能继续发出声音，默认值 true|否|微信小程序、百度小程序、字节跳动小程序|\r\n|duration|Number|当前音频的长度（单位：s），只有在当前有合法的 src 时返回，需要在onCanplay中获取|是||\r\n|currentTime|Number|当前音频的播放位置（单位：s），只有在当前有合法的 src 时返回，时间不取整，保留小数点后 6 位|是||\r\n|paused|Boolean|当前是是否暂停或停止状态，true 表示暂停或停止，false 表示正在播放|是||\r\n|buffered|Number|音频缓冲的时间点，仅保证当前播放时间点到此时间点内容已缓冲。|是||\r\n|volume|Number|音量。范围 0~1。|否|&nbsp;|\r\n\r\n\r\n**innerAudioContext 对象的方法列表**\r\n\r\n|方法|参数|说明|\r\n|:-|:-|:-|\r\n|play||播放（H5端部分浏览器需在用户交互时进行）|\r\n|pause||暂停|\r\n|stop||停止|\r\n|seek|position|跳转到指定位置，单位 s|\r\n|destroy||销毁当前实例|\r\n|onCanplay|callback|音频进入可以播放状态，但不保证后面可以流畅播放|\r\n|onPlay|callback|音频播放事件|\r\n|onPause|callback|音频暂停事件|\r\n|onStop|callback|音频停止事件|\r\n|onEnded|callback|音频自然播放结束事件|\r\n|onTimeUpdate|callback|音频播放进度更新事件|\r\n|onError|callback|音频播放错误事件|\r\n|onWaiting|callback|音频加载中事件，当音频因为数据不足，需要停下来加载时会触发|\r\n|onSeeking|callback|音频进行 seek 操作事件|\r\n|onSeeked|callback|音频完成 seek 操作事件|\r\n|offCanplay|callback|取消监听 onCanplay 事件|\r\n|offPlay|callback|取消监听 onPlay 事件|\r\n|offPause|callback|取消监听 onPause 事件|\r\n|offStop|callback|取消监听 onStop 事件|\r\n|offEnded|callback|取消监听 onEnded 事件|\r\n|offTimeUpdate|callback|取消监听 onTimeUpdate 事件|\r\n|offError|callback|取消监听 onError 事件|\r\n|offWaiting|callback|取消监听 onWaiting 事件|\r\n|offSeeking|callback|取消监听 onSeeking 事件|\r\n|offSeeked|callback|取消监听 onSeeked 事件|\r\n\r\nerrCode 说明\r\n\r\n|errCode|说明|\r\n|:-|:-|\r\n|10001|系统错误|\r\n|10002|网络错误|\r\n|10003|文件错误|\r\n|10004|格式错误|\r\n|-1|未知错误|\r\n\r\n\r\n**支持格式**\r\n\r\n|格式|iOS|Android|\r\n|:-|:-|:-|\r\n|flac\t|x|√|\r\n|m4a\t|√|√|\r\n|ogg\t|x|√|\r\n|ape\t|x|√|\r\n|amr\t|x|√|\r\n|wma\t|x|√|\r\n|wav\t|√|√|\r\n|mp3\t|√|√|\r\n|mp4\t|x|√|\r\n|aac\t|√|√|\r\n|aiff\t|√|x|\r\n|caf\t|√|x|\r\n\r\n**示例**\r\n\r\n```javascript\r\nconst innerAudioContext = uni.createInnerAudioContext();\r\ninnerAudioContext.autoplay = true;\r\ninnerAudioContext.src = 'https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-hello-uniapp/2cc220e0-c27a-11ea-9dfb-6da8e309e0d8.mp3';\r\ninnerAudioContext.onPlay(() => {\r\n  console.log('开始播放');\r\n});\r\ninnerAudioContext.onError((res) => {\r\n  console.log(res.errMsg);\r\n  console.log(res.errCode);\r\n});\r\n```\r\n\r\n**tips**\r\n\r\n- 如需音频的倍速播放，可通过video的倍速播放替代实现。插件市场有封装好的插件[音频倍速播放](https://ext.dcloud.net.cn/search?q=%E9%9F%B3%E9%A2%91%E5%80%8D%E9%80%9F%E6%92%AD%E6%94%BE)\r\n- 如果需要带ui的音频播放器样式，可以在插件市场搜索相关[插件](https://ext.dcloud.net.cn/search?q=audio)\r\n","p":"command\\媒体 - 音频组件控制.html"},{"t":"媒体/视频","d":" uni.chooseVideo(OBJECT)\n拍摄视频或从手机相册中选视频，返回视频的临时文件路径。\n\n若选择和上传非图像、视频文件，另行参考：[https://uniapp.dcloud.io/api/media/file](https://uniapp.dcloud.io/api/media/file)。\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|√|√|√|√|√|√|√|\n\n**OBJECT 参数说明**\n\n|参数名|类型|必填|说明|平台差异说明|\n|:-|:-|:-|:-|:-|\n|sourceType|Array&lt;String&gt;|否|album 从相册选视频，camera 使用相机拍摄，默认为：['album', 'camera']||\n|extension|Array&lt;String&gt;|否|根据文件拓展名过滤，每一项都不能是空字符串。默认不过滤。|H5(HBuilder X2.9.9+)|\n|compressed|Boolean|否|是否压缩所选的视频源文件，默认值为 true，需要压缩。|微信小程序、百度小程序、字节跳动小程序|\n|maxDuration|Number|否|拍摄视频最长拍摄时间，单位秒。最长支持 60 秒。|APP平台 1.9.7+(iOS支持，Android取决于ROM的拍照组件是否实现此功能，如果没实现此功能则忽略此属性。) 微信小程序、百度小程序|\n|camera|String|否|'front'、'back'，默认'back'|APP、微信小程序|\n|success|Function|否|接口调用成功，返回视频文件的临时文件路径，详见返回参数说明。||\n|fail|Function|否|接口调用失败的回调函数||\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|&nbsp;|\n\n**success 返回参数说明**\n\n|参数|类型|说明|平台差异说明说明|\n|:-|:-|:-|:-|\n|tempFilePath|String|选定视频的临时文件路径||\n|tempFile|File|选定的视频文件|仅H5（2.6.15+）支持|\n|duration|Number|选定视频的时间长度，单位为 s|APP 2.1.0+、H5、微信小程序|\n|size|Number|选定视频的数据量大小|APP 2.1.0+、H5、微信小程序|\n|height|Number|返回选定视频的高|APP 2.1.0+、H5、微信小程序|\n|width|Number|返回选定视频的宽|APP 2.1.0+、H5、微信小程序|\n|name|String|包含扩展名的文件名称|仅H5支持|\n\n**注意：**\n* app安卓端选择的视频最大只支持180MB，如需突破该限制请使用原生插件https://ext.dcloud.net.cn/search?q=%E6%96%87%E4%BB%B6%E9%80%89%E6%8B%A9\n* 文件的临时路径，在应用本次启动期间可以正常使用，如需持久保存，需在主动调用 [uni.saveFile](api/file/file?id=savefile)，在应用下次启动时才能访问得到。\n* camera 部分 Android 手机下由于系统 ROM 不支持无法生效，打开拍摄界面后可操作切换\n* 可以通过用户授权API来判断用户是否给应用授予相册或摄像头的访问权限[https://uniapp.dcloud.io/api/other/authorize](https://uniapp.dcloud.io/api/other/authorize)\n* App下如需进一步压缩视频大小，可以在插件市场搜索[视频压缩](http://ext.dcloud.net.cn/search?q=%E8%A7%86%E9%A2%91%E5%8E%8B%E7%BC%A9)插件\n* 如需上传到cdn，可使用uniCloud.uploadFile API，uniCloud提供了免费cdn给开发者使用，详见[https://uniapp.dcloud.io/uniCloud/storage?id=uploadfile](https://uniapp.dcloud.io/uniCloud/storage?id=uploadfile)\n* 选择视频大多为了上传，uni ui封装了更完善的[uni-file-picker组件](https://ext.dcloud.net.cn/plugin?id=4079)，文件选择、上传到uniCloud的免费存储和cdn中，一站式集成。强烈推荐使用。\n\n**示例**\n\n```html\n<template>\n\t<view>\n\t\t<text>hello</text>\n\t\t<button @tap=\"test\">click me</button>\n\t\t<video :src=\"src\"></video>\n\t</view>\n</template>\n```\n```javascript\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tsrc: ''\n\t\t}\n\t},\n\tmethods: {\n\t\ttest: function () {\n\t\t\tvar self = this;\n\t\t\tuni.chooseVideo({\n\t\t\t\tcount: 1,\n\t\t\t\tsourceType: ['camera', 'album'],\n\t\t\t\tsuccess: function (res) {\n\t\t\t\t\tself.src = res.tempFilePath;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n```\n\n\n uni.chooseMedia(OBJECT)\n拍摄或从手机相册中选择图片或视频。\n\n若选择和上传非图像、视频文件，另行参考：[https://uniapp.dcloud.io/api/media/file](https://uniapp.dcloud.io/api/media/file)。\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|x|x|2.10.0+|x|x|x|x|\n\n**OBJECT 参数说明**\n\n|参数名|类型|默认值|必填|说明|\n|:-|:-|:-|:-|:-|\n|count|Number|9（注意：ios不可大于9）|否|最多可以选择的文件个数|\n|mediaType|Array.&lt;string&gt;|['image', 'video']|否|文件类型|\n|sourceType|Array.&lt;string&gt;|['album', 'camera']|否|图片和视频选择的来源|\n|maxDuration|Number|10|否|拍摄视频最长拍摄时间，单位秒。时间范围为 3s 至 30s 之间|\n|sizeType|Array.&lt;string&gt;|['original', 'compressed']|否|仅对 mediaType 为 image 时有效，是否压缩所选文件|\n|camera|String|'back'|否|仅在 sourceType 为 camera 时生效，使用前置或后置摄像头|\n|success|function||否|接口调用成功的回调函数|\n|fail|function||否|接口调用失败的回调函数|\n|complete|function||否|接口调用结束的回调函数（调用成功、失败都会执行）|\n\n**OBJECT.mediaType 合法值**\n\n|值|说明|\n|:-|:-|\n|image|只能拍摄图片或从相册选择图片|\n|video|只能拍摄视频或从相册选择视频\t|\n\n**OBJECT.sourceType 合法值**\n\n|值|说明|\n|:-|:-|\n|album|从相册选择|\n|camera|使用相机拍摄\t|\n\n**OBJECT.camera 合法值**\n\n|值|说明|\n|:-|:-|\n|back|使用后置摄像头|\n|front|使用前置摄像头\t|\n\n**success 返回参数说明**\n\n|参数名|类型|说明|\n|:-|:-|:-|\n|tempFiles|Array.&lt;string&gt;|本地临时文件列表|\n|type|String|文件类型，有效值有 image 、video|\n\n**res.tempFiles 的结构**\n\n|参数名\t\t\t\t\t\t|类型\t\t|说明\t\t\t\t\t\t\t\t\t\t\t\t|\n|:-\t\t\t\t\t\t\t\t|:-\t\t\t|:-\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|tempFilePath\t\t\t|String\t|本地临时文件路径 (本地路径)|\n|size\t\t\t\t\t\t\t|Number\t|本地临时文件大小，单位 B\t\t|\n|duration\t\t\t\t\t|Number\t|视频的时间长度\t\t\t\t\t\t\t|\n|height\t\t\t\t\t\t|Number\t|视频的高度\t\t\t\t\t\t\t\t\t|\n|width\t\t\t\t\t\t|Number\t|视频的宽度\t\t\t\t\t\t\t\t\t|\n|thumbTempFilePath|String\t|视频缩略图临时文件路径\t\t\t|\n\n\n**示例**\n\n```javascript\nuni.chooseMedia({\n  count: 9,\n  mediaType: ['image','video'],\n  sourceType: ['album', 'camera'],\n  maxDuration: 30,\n  camera: 'back',\n  success(res) {\n    console.log(res.tempFilest)\n  }\n})\n\n```\n\n**Tips**\n\n* 如需上传到cdn，可使用uniCloud.uploadFile API，uniCloud提供了免费cdn给开发者使用，详见[https://uniapp.dcloud.io/uniCloud/storage?id=uploadfile](https://uniapp.dcloud.io/uniCloud/storage?id=uploadfile)\n* 选择文件大多为了上传，uni ui封装了更完善的[uni-file-picker组件](https://ext.dcloud.net.cn/plugin?id=4079)，文件选择、上传到uniCloud的免费存储和cdn中，一站式集成。强烈推荐使用。\n* 经开发者提醒，微信小程序ios真机可以选择的文件个数不能大于9，详见帖子[https://ask.dcloud.net.cn/question/115561](https://ask.dcloud.net.cn/question/115561)\n\n\n uni.saveVideoToPhotosAlbum(OBJECT)\n保存视频到系统相册。\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|√|x|√|√|√|√|√|\n\n**OBJECT 参数说明**\n\n|参数名|类型|必填|说明|\n|:-|:-|:-|:-|\n|filePath|String|是|视频文件路径，可以是临时文件路径也可以是永久文件路径|\n|success|Function|否|接口调用成功的回调函数|\n|fail|Function|否|接口调用失败的回调函数|\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\n\n**success 返回参数说明**\n\n|参数名|类型|说明|\n|:-|:-|:-|\n|errMsg|String|调用结果|\n\n**注意**\n\n- 可以通过用户授权API来判断用户是否给应用授予相册写入权限[https://uniapp.dcloud.io/api/other/authorize](https://uniapp.dcloud.io/api/other/authorize)\n\n**示例**\n\n```html\n<template>\n\t<view>\n\t\t<text>hello</text>\n\t\t<button @tap=\"test\">click me</button>\n\t\t<video :src=\"src\"></video>\n\t</view>\n</template>\n```\n```javascript\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tsrc: ''\n\t\t}\n\t},\n\tmethods: {\n\t\ttest: function () {\n\t\t\tvar self = this;\n\t\t\tuni.chooseVideo({\n\t\t\t\tcount: 1,\n\t\t\t\tsourceType: ['camera'],\n\t\t\t\tsuccess: function (res) {\n\t\t\t\t\tself.src = res.tempFilePath;\n\n\t\t\t\t\tuni.saveVideoToPhotosAlbum({\n\t\t\t\t\t\tfilePath: res.tempFilePath,\n\t\t\t\t\t\tsuccess: function () {\n\t\t\t\t\t\t\tconsole.log('save success');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n```\n\n uni.getVideoInfo(OBJECT)\n\n获取视频详细信息\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|3.1.10+|3.1.10+|2.11.0+|x|x|x|x|\n\n**OBJECT 参数说明**\n\n|属性\t\t\t|类型\t\t\t|默认值\t|必填\t|说明\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|:-:\t\t\t|:-:\t\t\t|:-:\t\t|:-:\t|:-:\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|src\t\t\t|string\t\t|-\t\t\t|是\t\t|视频文件路径，可以是临时文件路径也可以是永久文件路径（不支持网络地址）\t|\n|success\t|function\t|-\t\t\t|否\t\t|接口调用成功的回调函数\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|fail\t\t\t|function\t|-\t\t\t|否\t\t|接口调用失败的回调函数\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|complete\t|function\t|-\t\t\t|否\t\t|接口调用结束的回调函数（调用成功、失败都会执行）\t\t\t|\n\n**success 返回参数说明**\n\n|参数名\t\t\t|类型\t\t|说明\t\t\t\t\t\t\t\t|平台差异说明|\n|:-\t\t\t\t\t|:-\t\t\t|:-\t\t\t\t\t\t\t\t\t||\n|orientation|string\t|画面方向\t\t\t\t\t\t|微信小程序、App（3.1.14+）|\n|type\t\t\t\t|string\t|视频格式\t\t\t\t\t\t|微信小程序、App（3.1.14+）|\n|duration\t\t|number\t|视频长度\t\t\t\t\t\t|微信小程序、App（3.1.10+）、H5|\n|size\t\t\t\t|number\t|视频大小，单位 kB\t|微信小程序、App（3.1.10+）、H5|\n|height\t\t\t|number\t|视频的长，单位 px\t|微信小程序、App（3.1.10+）、H5|\n|width\t\t\t|number\t|视频的宽，单位 px\t|微信小程序、App（3.1.10+）、H5|\n|fps\t\t\t\t|number\t|视频帧率\t\t\t\t\t\t|微信小程序、App（3.1.14+）|\n|bitrate\t\t|number\t|视频码率，单位 kbps|微信小程序、App（3.1.14+）|\n\n**res.orientation参数说明**\n\n|值\t\t\t\t\t\t\t|说明\t\t\t\t\t\t\t\t\t|\n|:-\t\t\t\t\t\t\t|:-\t\t\t\t\t\t\t\t\t\t|\n|up\t\t\t\t\t\t\t|默认\t\t\t\t\t\t\t\t\t|\n|down\t\t\t\t\t\t|180度旋转\t\t\t\t\t\t|\n|left\t\t\t\t\t\t|逆时针旋转90度\t\t\t\t|\n|right\t\t\t\t\t|顺时针旋转90度\t\t\t\t|\n|up-mirrored\t\t|同up，但水平翻转\t\t\t|\n|down-mirrored\t|同down，但水平翻转\t\t|\n|left-mirrored\t|同left，但垂直翻转\t\t|\n|right-mirrored\t|同right，但垂直翻转\t|\n\n uni.compressVideo(OBJECT)\n\n压缩视频接口。开发者可指定压缩质量 quality 进行压缩。当需要更精细的控制时，可指定 bitrate、fps、和 resolution，当 quality 传入时，这三个参数将被忽略。原视频的相关信息可通过 getVideoInfo 获取。\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|3.1.10+|x|2.11.0+|x|x|x|x|\n\nApp端有很多插件支持视频压缩，详见[插件市场](https://ext.dcloud.net.cn/search?q=%E8%A7%86%E9%A2%91%E5%8E%8B%E7%BC%A9)\n\n压缩完毕后如需上传到cdn，可使用uniCloud.uploadFile API，uniCloud提供了免费cdn给开发者使用，详见[https://uniapp.dcloud.io/uniCloud/storage?id=uploadfile](https://uniapp.dcloud.io/uniCloud/storage?id=uploadfile)\n\n\n**OBJECT 参数说明**\n\n|属性\t\t\t\t|类型\t\t\t|默认值\t|必填\t|说明\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|:-:\t\t\t\t|:-:\t\t\t|:-:\t\t|:-:\t|:-:\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|src\t\t\t\t|string\t\t|\t\t\t\t|是\t\t|视频文件路径，可以是临时文件路径也可以是永久文件路径\t|\n|quality\t\t|string\t\t|\t\t\t\t|是\t\t|压缩质量\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|bitrate\t\t|number\t\t|\t\t\t\t|是\t\t|码率，单位 kbps\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|fps\t\t\t\t|number\t\t|\t\t\t\t|是\t\t|帧率\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|resolution\t|number\t\t|\t\t\t\t|是\t\t|相对于原视频的分辨率比例，取值范围(0, 1]\t\t\t\t\t\t\t|\n|success\t\t|function\t|\t\t\t\t|否\t\t|接口调用成功的回调函数\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|fail\t\t\t\t|function\t|\t\t\t\t|否\t\t|接口调用失败的回调函数\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|complete\t\t|function\t|\t\t\t\t|否\t\t|接口调用结束的回调函数（调用成功、失败都会执行）\t\t\t|\n\n**quality可取值**\n\n|值\t\t\t|说明\t|\n|:-\t\t\t|:-\t\t|\n|low\t\t|低\t\t|\n|medium\t|中\t\t|\n|high\t\t|高\t\t|\n\n**success 返回参数说明**\n\n|参数名\t\t\t\t|类型\t\t|说明\t\t\t\t\t\t\t\t\t|\n|:-\t\t\t\t\t\t|:-\t\t\t|:-\t\t\t\t\t\t\t\t\t\t|\n|tempFilePath\t|string\t|压缩后的临时文件地址\t|\n|size\t\t\t\t\t|string\t|压缩后的大小，单位 kB|\n\n uni.openVideoEditor(OBJECT)\n\n打开视频编辑器\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|x|x|2.12.0+|x|x|x|x|\n\n**OBJECT 参数说明**\n\n|属性\t\t\t|类型\t\t\t|默认值\t|必填\t|说明\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|:-:\t\t\t|:-:\t\t\t|:-:\t\t|:-:\t|:-:\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|filePath\t|string\t\t|-\t\t\t|是\t\t|视频源的路径，只支持本地路径\t\t\t\t\t\t\t\t\t\t\t|\n|success\t|function\t|-\t\t\t|否\t\t|接口调用成功的回调函数\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|fail\t\t\t|function\t|-\t\t\t|否\t\t|接口调用失败的回调函数\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|complete\t|function\t|-\t\t\t|否\t\t|接口调用结束的回调函数（调用成功、失败都会执行）\t|\n\n**success 返回参数说明**\n\n|参数名\t\t\t\t|类型\t\t|说明\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|:-\t\t\t\t\t\t|:-\t\t\t|:-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|duration\t\t\t|number\t|剪辑后生成的视频文件的时长，单位毫秒（ms）\t\t|\n|size\t\t\t\t\t|number\t|剪辑后生成的视频文件大小，单位字节数（byte）\t|\n|tempFilePath\t|string\t|编辑后生成的视频文件的临时路径\t\t\t\t\t\t\t\t|\n|tempThumbPath|string\t|编辑后生成的缩略图文件的临时路径\t\t\t\t\t\t\t|\n","p":"command\\媒体 - 视频.html"},{"t":"媒体/视频组件控制","d":" uni.createVideoContext(videoId, this)\r\n创建并返回 video 上下文 videoContext 对象。在自定义组件下，第二个参数传入组件实例this，以操作组件内 ``<video>`` 组件。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|√|√|基础库版本>=1.10.0|√|√|√|\r\n\r\n**videoContext 对象的方法列表**\r\n\r\n|方法|参数|说明|平台差异说明\r\n|:-|:-|:-|:-|\r\n|play|无|播放||\r\n|pause|无|暂停||\r\n|seek|position|跳转到指定位置，单位 s||\r\n|stop||停止视频|微信小程序|\r\n|sendDanmu|danmu|发送弹幕，danmu 包含两个属性 text, color||\r\n|playbackRate|rate|设置倍速播放，支持的倍率有 0.5/0.8/1.0/1.25/1.5。微信基础库2.6.3 起支持 2.0 倍速||\r\n|requestFullScreen|无|进入全屏，可传入{direction}参数，详见 video 组件文档|H5和字节跳动小程序不支持{direction}参数|\r\n|exitFullScreen|无|退出全屏||\r\n|showStatusBar|无|显示状态栏，仅在iOS全屏下有效|微信小程序、百度小程序、QQ小程序|\r\n|hideStatusBar|无|隐藏状态栏，仅在iOS全屏下有效|微信小程序、百度小程序、QQ小程序|\r\n\r\n**注意：**\r\n- app-nvue 平台 2.2.5以下使用本API，需同时设置组件属性id和ref ``<video id=\"video1\" ref=\"video1\"></video>``，或者直接使用 ref，例如 ``this.$refs.video1``，2.2.5+ 支持直接使用 uni.createVideoContext(videoId, this)\r\n\r\n**示例**\r\n\r\n```html\r\n<template>\r\n\t<view>\r\n\t\t<view class=\"page-body\">\r\n\t\t\t<view class=\"page-section\">\r\n\t\t\t\t<video id=\"myVideo\" src=\"https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/360e4b20-4f4b-11eb-8a36-ebb87efcf8c0.mp4\" @error=\"videoErrorCallback\" :danmu-list=\"danmuList\"\r\n\t\t\t\t    enable-danmu danmu-btn controls></video>\r\n\r\n\t\t\t\t<view class=\"uni-list\">\r\n\t\t\t\t\t<view class=\"uni-list-cell\">\r\n\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t<view class=\"uni-label\">弹幕内容</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"uni-list-cell-db\">\r\n\t\t\t\t\t\t\t<input @blur=\"bindInputBlur\" class=\"uni-input\" type=\"text\" placeholder=\"在此处输入弹幕内容\" />\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"btn-area\">\r\n\t\t\t\t\t<button @tap=\"bindSendDanmu\" class=\"page-body-button\" formType=\"submit\">发送弹幕</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n```\r\n```javascript\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\ttitle: 'video',\r\n\t\t\tsrc: '',\r\n\t\t\tinputValue: '',\r\n\t\t\tdanmuList: [{\r\n\t\t\t\t\ttext: '第 1s 出现的弹幕',\r\n\t\t\t\t\tcolor: 'ff0000',\r\n\t\t\t\t\ttime: 1\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: '第 3s 出现的弹幕',\r\n\t\t\t\t\tcolor: 'ff00ff',\r\n\t\t\t\t\ttime: 3\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t},\r\n\tonReady: function (res) {\r\n\t\tthis.videoContext = uni.createVideoContext('myVideo')\r\n\t},\r\n\tmethods: {\r\n\t\tbindInputBlur: function (e) {\r\n\t\t\tthis.inputValue = e.target.value\r\n\t\t},\r\n\t\tbindButtonTap: function () {\r\n\t\t\tvar that = this\r\n\t\t\tuni.chooseVideo({\r\n\t\t\t\tsourceType: ['album', 'camera'],\r\n\t\t\t\tmaxDuration: 60,\r\n\t\t\t\tcamera: ['front', 'back'],\r\n\t\t\t\tsuccess: function (res) {\r\n\t\t\t\t\tthis.src = res.tempFilePath\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tbindSendDanmu: function () {\r\n\t\t\tthis.videoContext.sendDanmu({\r\n\t\t\t\ttext: this.inputValue,\r\n\t\t\t\tcolor: this.getRandomColor()\r\n\t\t\t})\r\n\t\t},\r\n\t\tvideoErrorCallback: function (e) {\r\n\t\t\tconsole.log('视频错误信息:')\r\n\t\t\tconsole.log(e.target.errMsg)\r\n\t\t},\r\n\t\tgetRandomColor: function () {\r\n\t\t\tconst rgb = []\r\n\t\t\tfor (let i = 0; i < 3; ++i) {\r\n\t\t\t\tlet color = Math.floor(Math.random() * 256).toString(16)\r\n\t\t\t\tcolor = color.length == 1 ? '0' + color : color\r\n\t\t\t\trgb.push(color)\r\n\t\t\t}\r\n\t\t\treturn '' + rgb.join('')\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n","p":"command\\媒体 - 视频组件控制.html"},{"t":"媒体/相机组件控制","d":" uni.createCameraContext()\r\n创建并返回 camera 组件的上下文 cameraContext 对象。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|x|x|√|x|√|x|√|\r\n\r\n本API为 camera 组件配套的js API，与 camera 组件的平台兼容性相同，可实现非全屏摄像头。App端可通过[plus.camera](https://www.html5plus.org/doc/zh_cn/camera.html)实现全屏摄像头。\r\n\r\n**cameraContext 对象的方法列表**\r\n\r\n|方法|参数|说明|\r\n|:-|:-|:-|\r\n|takePhoto|Object|拍照，可指定质量，成功则返回图片路径。|\n|setZoom|Object|设置缩放级别 **微信小程序 2.10.0+ 支持**|\r\n|startRecord|Object|开始录像|\r\n|stopRecord|Object|结束录像，成功则返回封面与视频。|\r\n|onCameraFrame|Function|获取 Camera 实时帧数据。仅`微信小程序平台`支持，[规范详情](https://developers.weixin.qq.com/miniprogram/dev/api/CameraContext.onCameraFrame.html)|\r\n\n cameraContext.takePhoto\r\n**takePhoto 的 Object 参数列表：**\r\n\r\n|参数|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|quality|String|否|成像质量，值为high（高质量）、normal（普通质量）、low（低质量），默认normal|\r\n|success|Function|否|接口调用成功的回调函数 ，返回照片文件的临时路径，res = { tempImagePath }|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\n cameraContext.setZoom\n**setZoom 的 Object 参数列表：**\r\n\r\n|参数|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|zoom|String|是|缩放级别，范围[1, maxZoom]。zoom 可取小数，精确到小数后一位。maxZoom 可在 @initdone 返回值中获取。|\r\n|success|Function|否|接口调用成功的回调函数|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\n\n cameraContext.startRecord\r\n**startRecord 的 Object 参数列表：**\r\n\r\n|参数|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|timeoutCallback|Function|否|接超过30s或页面 onHide 时会结束录像|\r\n|success|Function|否|接口调用成功的回调函数|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\n cameraContext.stopRecord\r\n**stopRecord 的 Object 参数列表：**\r\n\r\n|参数|类型|默认值|必填|说明|\r\n|:-|:-|:-|:-|:-|\n|compressed|Boolean|false|否|启动视频压缩，压缩效果同 `chooseVideo` ,**微信小程序 2.10.0+ 支持**｜\r\n|success|Function||否|接口调用成功的回调函数 ，返回封面与视频的临时路径，res = { tempThumbPath, tempVideoPath }。|\r\n|fail|Function||否|接口调用失败的回调函数|\r\n|complete|Function||否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**注意**\r\n\r\n- App下实现OCR等证件识别等需求，可在插件市场获取原生插件，[https://ext.dcloud.net.cn/plugin?id=135](https://ext.dcloud.net.cn/plugin?id=135)\r\n- 微信小程序下实现OCR等证件识别等需求，插件市场也有封装，搜索 [ocr](https://ext.dcloud.net.cn/search?q=ocr) 可见。\r\n- 可以通过用户授权API来判断用户是否给应用授予摄像头的访问权限[https://uniapp.dcloud.io/api/other/authorize](https://uniapp.dcloud.io/api/other/authorize)\r\n","p":"command\\媒体 - 相机组件控制.html"},{"t":"媒体/直播组件控制","d":" uni.createLivePlayerContext(livePlayerId, this)\r\n创建 live-player 上下文 livePlayerContext 对象。注意是直播的播放而不是推流。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|见下|x|√|x|√|x|√|\r\n\r\nApp平台的直播播放，不使用此API，而直接使用video的API。\r\n\r\n**参数说明**\r\n\r\n|参数|说明|平台差异说明|\r\n|:-:|:-:|:-:|\r\n|livePlayerId|``<live-player>`` 组件 id||\r\n|this|在自定义组件下，当前组件实例的 this，以操作组件内 ``<live-player>`` 组件|微信小程序|\r\n\r\n**livePlayerContext 对象的方法列表：**\r\n\r\n|方法|参数|说明|\r\n|:-|:-|:-|\r\n|play|Object|播放|\r\n|stop|Object|停止|\r\n|mute|Object|静音|\r\n|pause|Object|暂停|\r\n|resume|Object|恢复|\r\n|requestFullScreen|Object|进入全屏|\r\n|exitFullScreen|Object|退出全屏|\r\n\r\n**requestFullScreen 的 Object 参数列表：**\r\n\r\n|参数|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|direction|Number|是|设置全屏时的方向，有效值为 0（正常竖向）, 90（屏幕逆时针90度）, -90（屏幕顺时针90度）。|\r\n|success|Function|否|接口调用成功的回调函数。|\r\n|fail|Function|否|接口调用失败的回调函数。|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）。|\r\n\r\n**其他方法的 Object 参数列表：**\r\n\r\n|参数|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|success|Function|否|接口调用成功的回调函数|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n\r\n\r\n uni.createLivePusherContext(livePusherId, this)\r\n创建 live-pusher 上下文 livePusherContext 对象。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|见下|x|√|x|x|x|√|\r\n\r\n- app-nvue 平台 2.2.5+ 支持 uni.createLivePusherContext(livePusherId, this)\r\n- app-nvue 平台 2.2.5以下，需要同时设置组件属性id和ref ``<live-pusher id=\"livepusher1\" ref=\"livepusher1\"></live-pusher>``，或者直接使用 ref，例如 ``this.$refs.livepusher1``\r\n- app-vue 平台，需要编写条件编译代码，使用 `plus.video.LivePusher`，[业务指南](https://ask.dcloud.net.cn/article/13416)、[规范文档](http://www.html5plus.org/doc/zh_cn/video.htmlplus.video.LivePusher)\r\n\r\n使用nvue做直播，比使用vue的优势有：\r\n1. nvue可一套代码直接编译到App和微信\r\n2. nvue的cover-view比vue的cover-view更强大，在视频上绘制元素更容易。如果只考虑App端的话，不用cover-view，任意组件都可以覆盖live-pusher组件\r\n3. 若需要视频内嵌在swiper里上下滑动（类抖音、映客首页模式），App端只有nvue才能实现\r\n当然nvue相比vue的坏处是css写法受限，如果只开发微信小程序，不考虑App，那么使用vue页面也是一样的。\r\n\r\n**参数说明**\r\n\r\n设置live-pusher组件的推流地址，推流视频模式等。\r\n\r\n属性|类型 |默认值|必填|说明\r\n:--|:--|:--|:--|:--|\r\nurl|string| |是|推流地址，支持RTMP协议。\r\nmode |string| |否|推流视频模式，可取值：SD（标清）, HD（高清）, FHD（超清）。\r\nmuted|Boolean|false|否|是否静音。\r\nenable-camera|Boolean|true|否|开启摄像头。\r\nauto-focus|Boolean|true|否|自动聚集。\r\nbeauty|Number|0|否|美颜，取值范围 0-9（iOS取值范围为1） ，0 表示关闭。\r\nwhiteness|Number|0|否|美白，取值范围 0-9（iOS取值范围为1） ，0 表示关闭。\r\n\r\n\r\n API\r\n start(callback)\r\n> 开始推流\r\n\r\n callback 返回 Object 参数说明\r\n属性|类型 |说明\r\n:--|:--|:--|\r\ntype | String | \"success\" 表示成功， \"fail\" 表示失败\r\n\r\n pause(callback)\r\n> 暂停推流\r\n\r\n callback 返回 Object 参数说明\r\n参数|类型 |说明\r\n:--|:--|:--|\r\ntype | String | \"success\" 表示成功， \"fail\" 表示失败\r\n\r\n resume(callback)\r\n> 恢复推流\r\n\r\n callback 返回 Object 参数说明\r\n参数|类型 |说明\r\n:--|:--|:--|\r\ntype | String | \"success\" 表示成功， \"fail\" 表示失败\r\n\r\n\r\n stop(callback)\r\n> 停止推流\r\n\r\n callback 返回 Object 参数说明\r\n参数|类型 |说明\r\n:--|:--|:--|\r\ntype | String | \"success\" 表示成功， \"fail\" 表示失败\r\n\r\n switchCamera(callback)\r\n> 切换前后摄像头\r\n\r\n callback 返回 Object 参数说明\r\n参数|类型 |说明\r\n:--|:--|:--|\r\ntype | String | \"success\" 表示成功， \"fail\" 表示失败\r\n\r\n snapshot(callback)\r\n> 快照\r\n\r\n  callback 返回 Object 参数说明\r\n 成功时的回调\r\n参数|类型 |说明\r\n:--|:--|:--|\r\ntype|string|\"success\" 表示成功, \"fail\" 表示失败\r\ncode|Number| 对应code码\r\nmessage|object|{width:\"快照图片宽度\",height:\"快照图片高度\",tempImagePath:\"快照图片路径\"}。\r\n\r\n 失败的回调\r\n参数|类型 |说明\r\n:--|:--|:--|\r\ntype|string|\"fail\" 表示失败\r\ncode|Number|\r\nmessage|object|\r\n\r\n\r\n startPreview(callback)\r\n> 开启摄像头预览\r\n\r\n callback 返回 Object 参数说明\r\n参数|类型 |说明\r\n:--|:--|:--|\r\ntype | String | \"success\" 表示成功， \"fail\" 表示失败\r\n\r\n stopPreview(callback)\r\n> 关闭摄像头预览\r\n\r\n callback 返回 Object 参数说明\r\n参数|类型 |说明\r\n:--|:--|:--|\r\ntype | String | \"success\" 表示成功， \"fail\" 表示失败\r\n\r\n 事件\r\n\r\n statechange\r\n> 状态变化事件\r\n\r\n  返回参数（detail）的详细说明\r\n参数|类型|说明\r\n:--|:--|:--|\r\ncode|Number|\r\nmessage|string|\r\n\r\n\r\n netstatus\r\n> 网络状态通知事件\r\n\r\n  安卓 返回参数（detail）的详细说明\r\n键名|说明\r\n:--|:--|\r\nvideoBitrate | 当前视频编/码器输出的比特率，单位 kbps\r\naudioBitrate | 当前音频编/码器输出的比特率，单位 kbps\r\nvideoFPS | 当前视频帧率\r\nvideoGOP | 当前视频 GOP,也就是每两个关键帧(I帧)间隔时长，单位 s\r\nnetSpeed | 当前的发送/接收速度\r\nnetJitter | 网络抖动情况，抖动越大，网络越不稳定\r\nvideoWidth | 视频画面的宽度\r\nvideoHeight | 视频画面的高度\r\n\r\n iOS 返回参数（detail）的详细说明\r\n参数|类型 |说明\r\n:--|:--|:--|\r\ncode|Number| code码\r\nmessage|string| 具体的网络状态信息\r\n\r\n\r\n error\r\n> 渲染错误事件\r\n\r\n  返回参数（detail）的详细说明\r\n参数|类型 |说明\r\n:--|:--|:--|\r\nerrCode|Number|\r\nerrMsg|string|\r\n","p":"command\\媒体 - 直播组件控制.html"},{"t":"媒体/富文本","d":" editorContext\n\neditor 组件对应的 editorContext 实例，可通过 [uni.createSelectorQuery](/api/ui/nodes-info?id=createselectorquery) 获取。\n\n```js\n onEditorReady() {\n    uni.createSelectorQuery().select('editor').context((res) => {\n        this.editorCtx = res.context\n    }).exec()\n}\n```\n\n百度小程序 ```Editor``` 富文本编辑器动态库提供了 ```createEditorContext``` 的方法来获取。\n\n```js\n onEditorReady() {\n    this.editorCtx = requireDynamicLib('editorLib').createEditorContext('editorId');\n  }\n```\n\n\n`editorContext` 通过 `id` 跟一个 [`<editor>`](/component/editor) 组件绑定，操作对应的 [`<editor>`](/component/editor) 组件。\n\n\n\n\n\n\n**平台差异说明**\n\n|App|H5\t\t\t|微信小程序\t|支付宝小程序\t|百度小程序\t|字节跳动小程序\t|QQ小程序\t|\n|:-:|:-:\t\t|:-:\t\t\t\t|:-:\t\t\t\t\t|:-:\t\t\t\t|:-:\t\t\t\t\t\t|:-:\t\t\t|\n|√\t|2.4.5+\t|√\t\t\t\t\t|x\t\t\t\t\t\t|需引入动态库\t\t\t\t\t|x\t\t\t\t\t\t\t|x\t\t\t\t|\n\n\n**百度小程序引入动态库**\n\n\n1. 在项目中引用动态库，在 ```manifest.json``` 中增添一项 ```dynamicLib``` \n \n```js\n  \"mp-baidu\" : {\n    \"usingComponents\" : true,\n    \"appid\" : \"\",\n    \"setting\" : {\n      \"urlCheck\" : true\n    },\n    \"dynamicLib\": {//引入百度小程序动态库\n      \"editorLib\": {\n        \"provider\": \"swan-editor\"\n      }\n    }\n  },\n\n```\n\n2. 在每个使用到富文本编辑器组件的页面，配置 ```pages.json``` 文件如下：\n\n``` js \n{\n\t\"pages\": [ \n\t\t{\n\t\t\t\"path\": \"pages/index/index\",\n\t\t\t\"style\": {\n\t\t\t\t\"navigationBarTitleText\": \"uni-app\",\n\t\t\t\t\"usingSwanComponents\": {\n\t\t\t\t\t\"editor\": \"dynamicLib://editorLib/editor\"\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t]\n}\n\n```\n\n\n\n\n editorContext.format(name, value)\n\n修改样式\n\n| 参数 | 类型 | 说明 |\n| --- | --- | --- |\n|name|String|属性|\n|value|String|值|\n\n**支持设置的样式列表**\n\n| name | value |\n| --- | --- |\n| bold |  |\n| italic |  |\n| underline |  |\n| strike |  |\n| ins |  |\n| script | sub / super |\n| header | H1 / H2 / h3 / H4 / h5 / H6 |\n| align | left / center / right / justify |\n| direction | rtl |\n| indent | -1 / +1 |\n| list | ordered / bullet / check |\n| color | hex color |\n| backgroundColor | hex color |\n| margin/marginTop/marginBottom/marginLeft/marginRight | css style |\n| padding/paddingTop/paddingBottom/paddingLeft/paddingRight | css style |\n| font/fontSize/fontStyle/fontVariant/fontWeight/fontFamily | css style |\n| lineHeight | css style |\n| letterSpacing | css style |\n| textDecoration | css style |\n| textIndent | css style |\n\n对已经应用样式的选区设置会取消样式。css style 表示 css 中规定的允许值。\n\n editorContext.insertDivider(OBJECT)\n\n插入分割线\n\n**OBJECT 参数说明**\n\n| 属性 | 类型 | 默认值 | 必填 | 说明 |\n| --- | --- | --- | --- | --- |\n| success | Function |  | 否 | 接口调用成功的回调函数 |\n| fail | Function |  | 否 | 接口调用失败的回调函数 |\n| complete | Function |  | 否 | 接口调用结束的回调函数（调用成功、失败都会执行） |\n\n editorContext.insertImage(OBJECT)\n\n插入图片。\n\n微信小程序平台地址为临时文件时，获取的编辑器html格式内容中 `<img>` 标签增加属性 data-local，delta 格式内容中图片 attributes 属性增加 data-local 字段，该值为传入的临时文件地址。\n开发者可选择在提交阶段上传图片到服务器，获取到网络地址后进行替换。替换时对于html内容应替换掉 `<img>` 的 src 值，对于 delta 内容应替换掉 `insert { image: abc }` 值。\n\n**OBJECT 参数说明**\n\n| 属性 | 类型 | 默认值 | 必填 | 说明 |\n| --- | --- | --- | --- | --- |\n| src | String |  | 是 | 图片地址 |\n| alt | String |  | 否 | 图像无法显示时的替代文本 |\n| width | String |  | 否 | 图片宽度（pixels/百分比），2.6.5+ 支持 |\n| height | String |  | 否 | 图片高度 (pixels/百分比），2.6.5+ 支持|\n| extClass | String |  | 否 | 添加到图片 img 标签上的类名，2.6.5+ 支持 |\n| data | Object |  | 否 | data 被序列化为 name=value;name1=value2 的格式挂在属性 data-custom 上，2.6.5+ 支持 |\n| success | Function |  | 否 | 接口调用成功的回调函数 |\n| fail | Function |  | 否 | 接口调用失败的回调函数 |\n| complete | Function |  | 否 | 接口调用结束的回调函数（调用成功、失败都会执行） |\n\n editorContext.insertText(OBJECT)\n\n覆盖当前选区，设置一段文本\n\n**OBJECT 参数说明**\n\n| 属性 | 类型 | 默认值 | 必填 | 说明 |\n| --- | --- | --- | --- | --- |\n| text | String |  | 否 | 文本内容 |\n| success | Function |  | 否 | 接口调用成功的回调函数 |\n| fail | Function |  | 否 | 接口调用失败的回调函数 |\n| complete | Function |  | 否 | 接口调用结束的回调函数（调用成功、失败都会执行） |\n\n editorContext.setContents(OBJECT)\n\n初始化编辑器内容，hmlt和delta同时存在时仅delta生效\n\n**OBJECT 参数说明**\n\n| 属性 | 类型 | 默认值 | 必填 | 说明 |\n| --- | --- | --- | --- | --- |\n| html | String |  | 否 | 带标签的HTML内容 |\n| delta | Object |  | 否 | 表示内容的delta对象 |\n| success | Function |  | 否 | 接口调用成功的回调函数 |\n| fail | Function |  | 否 | 接口调用失败的回调函数 |\n| complete | Function |  | 否 | 接口调用结束的回调函数（调用成功、失败都会执行） |\n\n editorContext.getContents(OBJECT)\n\n获取编辑器内容\n\n**OBJECT 参数说明**\n\n| 属性 | 类型 | 默认值 | 必填 | 说明 |\n| --- | --- | --- | --- | --- |\n| success | Function |  | 否 | 接口调用成功的回调函数 |\n| fail | Function |  | 否 | 接口调用失败的回调函数 |\n| complete | Function |  | 否 | 接口调用结束的回调函数（调用成功、失败都会执行） |\n\n editorContext.clear(OBJECT)\n\n清空编辑器内容\n\n**OBJECT 参数说明**\n\n| 属性 | 类型 | 默认值 | 必填 | 说明 |\n| --- | --- | --- | --- | --- |\n| success | Function |  | 否 | 接口调用成功的回调函数 |\n| fail | Function |  | 否 | 接口调用失败的回调函数 |\n| complete | Function |  | 否 | 接口调用结束的回调函数（调用成功、失败都会执行） |\n\n editorContext.removeFormat(OBJECT)\n\n清除当前选区的样式\n\n**OBJECT 参数说明**\n\n| 属性 | 类型 | 默认值 | 必填 | 说明 |\n| --- | --- | --- | --- | --- |\n| success | Function |  | 否 | 接口调用成功的回调函数 |\n| fail | Function |  | 否 | 接口调用失败的回调函数 |\n| complete | Function |  | 否 | 接口调用结束的回调函数（调用成功、失败都会执行） |\n\n editorContext.undo(OBJECT)\n\n撤销\n\n**OBJECT 参数说明**\n\n| 属性 | 类型 | 默认值 | 必填 | 说明 |\n| --- | --- | --- | --- | --- |\n| success | Function |  | 否 | 接口调用成功的回调函数 |\n| fail | Function |  | 否 | 接口调用失败的回调函数 |\n| complete | Function |  | 否 | 接口调用结束的回调函数（调用成功、失败都会执行） |\n\n editorContext.redo(OBJECT)\n\n恢复\n\n**OBJECT 参数说明**\n\n| 属性 | 类型 | 默认值 | 必填 | 说明 |\n| --- | --- | --- | --- | --- |\n| success | Function |  | 否 | 接口调用成功的回调函数 |\n| fail | Function |  | 否 | 接口调用失败的回调函数 |\n| complete | Function |  | 否 | 接口调用结束的回调函数（调用成功、失败都会执行） |\n\n editorContext.blur(OBJECT)\n\n编辑器失焦，同时收起键盘。\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|√`HBuilderX 3.0.3`|√`HBuilderX 3.0.3`|√`基础库2.8.3`|x|x|x|x|\n\n**OBJECT 参数说明**\n\n| 属性 | 类型 | 默认值 | 必填 | 说明 |\n| --- | --- | --- | --- | --- |\n| success | Function |  | 否 | 接口调用成功的回调函数 |\n| fail | Function |  | 否 | 接口调用失败的回调函数 |\n| complete | Function |  | 否 | 接口调用结束的回调函数（调用成功、失败都会执行） |\n\n editorContext.scrollIntoView(OBJECT)\n\n使得编辑器光标处滚动到窗口可视区域内。\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|√`HBuilderX 3.0.3`|√`HBuilderX 3.0.3`|√`基础库2.8.3`|x|x|x|x|\n\n**OBJECT 参数说明**\n\n| 属性 | 类型 | 默认值 | 必填 | 说明 |\n| --- | --- | --- | --- | --- |\n| success | Function |  | 否 | 接口调用成功的回调函数 |\n| fail | Function |  | 否 | 接口调用失败的回调函数 |\n| complete | Function |  | 否 | 接口调用结束的回调函数（调用成功、失败都会执行） |\n\n editorContext.getSelectionText(OBJECT)\n\n获取编辑器已选区域内的纯文本内容。当编辑器失焦或未选中一段区间时，返回内容为空。\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|√`HBuilderX 3.0.3`|√`HBuilderX 3.0.3`|√`基础库2.10.2`|x|x|x|x|\n\n**OBJECT 参数说明**\n\n| 属性 | 类型 | 默认值 | 必填 | 说明 |\n| --- | --- | --- | --- | --- |\n| success | Function |  | 否 | 接口调用成功的回调函数 |\n| fail | Function |  | 否 | 接口调用失败的回调函数 |\n| complete | Function |  | 否 | 接口调用结束的回调函数（调用成功、失败都会执行） |\n\n**success 返回参数说明：**\n\n|参数|类型|说明|\n|:-|:-|:-|\n|errMsg|String|接口调用结果|\n|text|String|纯文本内容|","p":"command\\媒体 - 富文本.html"},{"t":"媒体/音视频合成","d":" uni.createMediaContainer()\n创建音视频处理容器，最终可将容器中的轨道合成一个视频 ，返回 `MediaContainer` 对象\n\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|x|x|2.9.0+|x|x|x|x|\n\n MediaContainer.addTrack(track)\n将音频或视频轨道添加到容器\n\n**参数说明**\n\n|参数|说明|\r\n|:-|:-|\r\n|track|要添加的音频或视频轨道|\n\n MediaContainer.destroy()\n将容器销毁，释放资源\n\n MediaContainer.export()\n将容器内的轨道合并并导出视频文件\n\n MediaContainer.extractDataSource(object)\n将容器内的轨道合并并导出视频文件 ,返回 `MediaTrack` 对象\n\n**参数说明**\n\n|属性|类型|必填\t|说明|\r\n|:-|:-|:-|:-|\r\n|source|String|是|视频源地址，只支持本地文件|\n\n MediaContainer.removeTrack(track)\n将音频或视频轨道添加到容器\n\n**参数说明**\n\n|参数|说明|\r\n|:-|:-|\r\n|track|要移除的音频或视频轨道|\n\n\n MediaTrack \n可通过 `MediaContainer.extractDataSource` 返回。\n\n `MediaTrack` 音频或视频轨道，可以对轨道进行一些操作\n\n**参数说明**\n\n|属性|类型|说明|\r\n|:-|:-|:-|\r\n|kind|String|轨道类型，只读 ,audio:音频轨道;video:视频轨道\t|\n|duration|Number|轨道长度，只读\t|\n|volume|Number|音量，音频轨道下有效，可写\t|","p":"command\\媒体 - 音视频合成.html"},{"t":"设备/系统信息","d":" uni.getSystemInfo(OBJECT)\r\n获取系统信息。\r\n\r\n**OBJECT 参数说明：**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|success|Function|是|接口调用成功的回调|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**success 返回参数说明：**\r\n\r\n|参数|说明|平台差异说明|\r\n|:-|:-|:-|\r\n|brand|设备品牌|App、微信小程序、百度小程序、字节跳动小程序、QQ小程序|\r\n|model|设备型号|全平台支持。H5（3.1.10+）新增`PC`|\r\n|pixelRatio|设备像素比||\r\n|screenWidth|屏幕宽度||\r\n|screenHeight|屏幕高度||\r\n|windowWidth|可使用窗口宽度||\r\n|windowHeight|可使用窗口高度||\r\n|windowTop|可使用窗口的顶部位置|App、H5|\r\n|windowBottom|可使用窗口的底部位置|App、H5|\r\n|statusBarHeight|状态栏的高度|字节跳动小程序不支持|\r\n|navigationBarHeight|导航栏的高度|百度小程序|\r\n|titleBarHeight|标题栏高度|支付宝小程序|\r\n|language|应用设置的语言|字节跳动小程序不支持|\r\n|version|引擎版本号|H5不支持|\r\n|storage|设备磁盘容量|支付宝小程序|\r\n|currentBattery|当前电量百分比|支付宝小程序|\r\n|appName|宿主APP名称|字节跳动小程序|\r\n|AppPlatform|App平台|QQ小程序|\r\n|host|宿主平台|百度小程序|\r\n|app|当前运行的客户端|支付宝小程序|\r\n|cacheLocation|上一次缓存的位置信息|百度小程序|\r\n|system|操作系统名称及版本，如Android 10||\r\n|platform|客户端平台，值域为：`ios`、`android`、`mac（3.1.10+）`、`windows（3.1.10+）`、`linux（3.1.10+）`||\r\n|fontSizeSetting|用户字体大小设置。以“我-设置-通用-字体大小”中的设置为准，单位：px|微信小程序、支付宝小程序、百度小程序、QQ小程序|\r\n|SDKVersion|客户端基础库版本|支付宝小程序和H5不支持|\r\n|swanNativeVersion|宿主平台版本号|百度小程序|\r\n|benchmarkLevel|设备性能等级。取值为：-2 或 0（该设备无法运行小游戏），-1（性能未知），>=1（设备性能值，该值越高，设备性能越好，目前最高不到50）|微信小程序Android版|\r\n|albumAuthorized\t|\t允许微信使用相册的开关（仅 iOS 有效）\t|微信小程序|\r\n|cameraAuthorized\t|\t允许微信使用摄像头的开关\t|微信小程序|\r\n|locationAuthorized\t|\t允许微信使用定位的开关\t|微信小程序|\r\n|microphoneAuthorized\t|\t允许微信使用麦克风的开关\t|微信小程序|\r\n|notificationAuthorized\t|\t允许微信通知的开关\t|微信小程序|\r\n|notificationAlertAuthorized\t|\t允许微信通知带有提醒的开关（仅 iOS 有效）\t|微信小程序|\r\n|notificationBadgeAuthorized\t|\t允许微信通知带有标记的开关（仅 iOS 有效）\t|微信小程序|\r\n|notificationSoundAuthorized\t|\t允许微信通知带有声音的开关（仅 iOS 有效）\t|微信小程序|\r\n|bluetoothEnabled\t|\t蓝牙的系统开关\t|微信小程序|\r\n|locationEnabled\t|\t地理位置的系统开关\t|微信小程序|\r\n|wifiEnabled\t|\tWi-Fi 的系统开关\t|微信小程序|\r\n|safeArea|在竖屏正方向下的安全区域|App、H5、微信小程序|\r\n|safeAreaInsets|在竖屏正方向下的安全区域插入位置（2.5.3+）|App、H5、微信小程序|\r\n|deviceId|设备 id|非 App 端由 uni-app 框架生成并存储，清空 Storage 会导致改变|\r\n\r\n**Tips**\r\n- 屏幕高度 = 原生NavigationBar高度（含状态栏高度）+ 可使用窗口高度 + 原生TabBar高度\r\n- windowHeight不包含NavigationBar和TabBar的高度\r\n- H5端，windowTop等于NavigationBar高度，windowBottom等于TabBar高度\r\n- App端，windowTop等于透明状态NavigationBar高度，windowBottom等于透明状态TabBar高度\r\n- 高度相关信息，要放在 onReady 里获取\r\n\r\n**safeArea 的结构**\r\n\r\n|参数\t|类型\t|说明\t\t\t\t\t\t\t|\r\n|:-\t\t|:-\t\t\t\t\t\t\t\t|:-\t\t\t\t\t\t\t\t|\r\n|left\t|Number\t|安全区域左上角横坐标\t\t\t|\r\n|right\t|Number\t|安全区域右下角横坐标\t\t\t|\r\n|top\t|Number\t|安全区域左上角纵坐标\t\t\t|\r\n|bottom\t|Number\t|安全区域右下角纵坐标\t\t\t|\r\n|width\t|Number\t|安全区域的宽度，单位逻辑像素\t|\r\n|height\t|Number\t|安全区域的高度，单位逻辑像素\t|\r\n\r\n**safeAreaInsets 的结构**\r\n\r\n|参数\t|类型\t|说明\t\t\t\t\t\t\t|\r\n|:-\t\t|:-\t\t\t\t\t\t\t\t|:-\t\t\t\t\t\t\t\t|\r\n|left\t|Number\t|安全区域左侧插入位置\t\t\t|\r\n|right\t|Number\t|安全区域右侧插入位置\t\t\t|\r\n|top\t|Number\t|安全区顶部插入位置\t\t\t|\r\n|bottom\t|Number\t|安全区域底部插入位置\t\t\t|\r\n\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.getSystemInfo({\r\n\tsuccess: function (res) {\r\n\t\tconsole.log(res.model);\r\n\t\tconsole.log(res.pixelRatio);\r\n\t\tconsole.log(res.windowWidth);\r\n\t\tconsole.log(res.windowHeight);\r\n\t\tconsole.log(res.language);\r\n\t\tconsole.log(res.version);\r\n\t\tconsole.log(res.platform);\r\n\t}\r\n});\r\n```\r\n\r\n uni.getSystemInfoSync()\r\n获取系统信息同步接口。\r\n\r\n**同步返回参数说明**\r\n\r\n|参数|说明|平台差异说明|\r\n|:-|:-|:-|\r\n|brand|设备品牌|App、微信小程序、百度小程序、字节跳动小程序、QQ小程序|\r\n|model|设备型号|全平台支持。H5（3.1.10+）新增`PC`|\r\n|pixelRatio|设备像素比||\r\n|screenWidth|屏幕宽度||\r\n|screenHeight|屏幕高度||\r\n|windowWidth|可使用窗口宽度||\r\n|windowHeight|可使用窗口高度||\r\n|windowTop|可使用窗口的顶部位置|App、H5|\r\n|windowBottom|可使用窗口的底部位置|App、H5|\r\n|statusBarHeight|状态栏的高度|字节跳动小程序不支持|\r\n|navigationBarHeight|导航栏的高度|百度小程序|\r\n|titleBarHeight|标题栏高度|支付宝小程序|\r\n|language|应用设置的语言|字节跳动小程序不支持|\r\n|version|引擎版本号|H5不支持|\r\n|storage|设备磁盘容量|支付宝小程序|\r\n|currentBattery|当前电量百分比|支付宝小程序|\r\n|appName|宿主APP名称|字节跳动小程序|\r\n|AppPlatform|App平台|QQ小程序|\r\n|host|宿主平台|百度小程序|\r\n|app|当前运行的客户端|支付宝小程序|\r\n|cacheLocation|上一次缓存的位置信息|百度小程序|\r\n|system|操作系统版本||\r\n|platform|客户端平台，值域为：`ios`、`android`、`mac（3.1.10+）`、`windows（3.1.10+）`、`linux（3.1.10+）`||\r\n|fontSizeSetting|用户字体大小设置。以“我-设置-通用-字体大小”中的设置为准，单位：px|微信小程序、支付宝小程序、百度小程序、QQ小程序|\r\n|SDKVersion|客户端基础库版本|支付宝小程序和H5不支持|\r\n|swanNativeVersion|宿主平台版本号|百度小程序|\r\n|albumAuthorized\t|\t允许微信使用相册的开关（仅 iOS 有效）\t|微信小程序|\r\n|cameraAuthorized\t|\t允许微信使用摄像头的开关\t|微信小程序|\r\n|locationAuthorized\t|\t允许微信使用定位的开关\t|微信小程序|\r\n|microphoneAuthorized\t|\t允许微信使用麦克风的开关\t|微信小程序|\r\n|notificationAuthorized\t|\t允许微信通知的开关\t|微信小程序|\r\n|notificationAlertAuthorized\t|\t允许微信通知带有提醒的开关（仅 iOS 有效）\t|微信小程序|\r\n|notificationBadgeAuthorized\t|\t允许微信通知带有标记的开关（仅 iOS 有效）\t|微信小程序|\r\n|notificationSoundAuthorized\t|\t允许微信通知带有声音的开关（仅 iOS 有效）\t|微信小程序|\r\n|bluetoothEnabled\t|\t蓝牙的系统开关\t|微信小程序|\r\n|locationEnabled\t|\t地理位置的系统开关\t|微信小程序|\r\n|wifiEnabled\t|\tWi-Fi 的系统开关\t|微信小程序|\r\n|safeArea|在竖屏正方向下的安全区域|App、H5、微信小程序|\r\n|safeAreaInsets|在竖屏正方向下的安全区域插入位置（2.5.3+）|App、H5、微信小程序|\r\n|deviceId|设备 id|非 App 端由 uni-app 框架生成并存储，清空 Storage 会导致改变|\r\n\r\n**Tips**\r\n- 使用注意同上getSystemInfo\r\n\r\n**safeArea 的结构**\r\n\r\n|参数\t|类型\t|说明\t\t\t\t\t\t\t|\r\n|:-\t\t|:-\t\t\t\t\t\t\t\t|:-\t\t\t\t\t\t\t\t|\r\n|left\t|Number\t|安全区域左上角横坐标\t\t\t|\r\n|right\t|Number\t|安全区域右下角横坐标\t\t\t|\r\n|top\t|Number\t|安全区域左上角纵坐标\t\t\t|\r\n|bottom\t|Number\t|安全区域右下角纵坐标\t\t\t|\r\n|width\t|Number\t|安全区域的宽度，单位逻辑像素\t|\r\n|height\t|Number\t|安全区域的高度，单位逻辑像素\t|\r\n\r\n**safeAreaInsets 的结构**\r\n\r\n|参数\t|类型\t|说明\t\t\t\t\t\t\t|\r\n|:-\t\t|:-\t\t\t\t\t\t\t\t|:-\t\t\t\t\t\t\t\t|\r\n|left\t|Number\t|安全区域左侧插入位置\t\t\t|\r\n|right\t|Number\t|安全区域右侧插入位置\t\t\t|\r\n|top\t|Number\t|安全区顶部插入位置\t\t\t|\r\n|bottom\t|Number\t|安全区域底部插入位置\t\t\t|\r\n\r\n**示例**\r\n\r\n```javascript\r\ntry {\r\n\tconst res = uni.getSystemInfoSync();\r\n\tconsole.log(res.model);\r\n\tconsole.log(res.pixelRatio);\r\n\tconsole.log(res.windowWidth);\r\n\tconsole.log(res.windowHeight);\r\n\tconsole.log(res.language);\r\n\tconsole.log(res.version);\r\n\tconsole.log(res.platform);\r\n} catch (e) {\r\n\t// error\r\n}\r\n```\r\n\r\n\r\n**获取设备标记**\r\n\r\nH5、小程序、iOS，属于对用户隐私保护比较严格的平台，在这些平台很难获取有效的设备唯一标记。\r\n\r\nAndroid已经改进用户隐私保护，在很多新手机上，获取imei等信息时需要弹框让用户授权。而Android10已经无法获取imei了。\r\n\r\n- H5平台：\r\n常用的方式是uv，即在uni.storage里存一个随机数，本质是存在浏览器的localstorage里。将随机数发给服务器，进行用户身份识别和统计。当然如果用户浏览器清空了localstorage、更换了浏览器、或使用隐私模式，那么就统计数据就会有误差。\r\n- 小程序平台：\r\n小程序也可以采用与H5类似的方式，在uni.storage里存一个随机数。如果想获取用户的微信唯一ID，也可以弹框请求用户授权。\r\n- App iOS平台：\r\niOS并不提供imei的获取API，可通过[plus.device.getInfo](http://www.html5plus.org/doc/zh_cn/device.htmlplus.device.getInfo) 可以获得设备的唯一标识（uuid），这个id其实也是一种随机数概念，类似于h5的uv计算，卸载app重装会发生变化；\r\n\r\niOS还有一个叫`idfa`的广告识别符，可通过Native.js获取，详见：[idfa介绍](https://ask.dcloud.net.cn/article/36107)。\r\n- App Android平台：\r\nAndroid也可以使用UUID，同iOS。\r\n\r\nAndroid10以下可以得到imei，在[plus.device.getInfo](http://www.html5plus.org/doc/zh_cn/device.htmlplus.device.getInfo) 可以获得设备的国际移动设备身份码（imei）。注意很多新手机在获取imei时会弹框要求用户授权。\r\n\r\nAndroid10以上，部分国产手机支持OAID，详见[匿名设备标识符（OAID）](http://www.html5plus.org/doc/zh_cn/device.htmlplus.device.getOAID)\r\n\r\n`plus.device.getInfo`的API是从HBuilderX 2.0.3+开始提供的，老版需使用plus.devide.uuid或plus.device.imei。\r\n\r\n uni.canIUse(String)\r\n判断应用的 API，回调，参数，组件等是否在当前版本可用。\r\n\r\n平台差异说明\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|x|√|√|√|√|√|\r\n\r\n**String 参数说明**\r\n\r\n使用 ``${API}.${method}.${param}.${options}`` 或者 ``${component}.${attribute}.${option}`` 方式来调用，例如：\r\n\r\n- ``${API}`` 代表 API 名字\r\n- ``${method}`` 代表调用方式，有效值为return, success, object, callback\r\n- ``${param}`` 代表参数或者返回值\r\n- ``${options}`` 代表参数的可选值\r\n- ``${component}`` 代表组件名字\r\n- ``${attribute}`` 代表组件属性\r\n- ``${option}`` 代表组件属性的可选值\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.canIUse('getSystemInfoSync.return.screenWidth');\r\nuni.canIUse('getSystemInfo.success.screenWidth');\r\nuni.canIUse('showToast.object.image');\r\nuni.canIUse('request.object.method.GET');\r\n\r\nuni.canIUse('live-player');\r\nuni.canIUse('text.selectable');\r\nuni.canIUse('button.open-type.contact');\r\n```\r\n","p":"command\\设备 - 系统信息.html"},{"t":"设备/内存","d":" uni.onMemoryWarning(CALLBACK)\r\n\r\n监听内存不足告警事件。\r\n\r\n当 iOS/Android 向小程序进程发出内存警告时，触发该事件。Android 下有告警等级划分，iOS 无等级划分。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|x|x|√|√|√|x|√|\r\n\r\n**CALLBACK返回参数：**\r\n\r\n|参数名|类型|说明|\r\n|---|---|---|\r\n|level|Number|仅 Android 有该字段，对应系统内存告警等级宏定义|\r\n\r\n**level 的合法值**\r\n\r\n|值|说明|\r\n|---|---|\r\n|5|TRIM_MEMORY_RUNNING_MODERATE|\r\n|10|TRIM_MEMORY_RUNNING_LOW|\r\n|15|TRIM_MEMORY_RUNNING_CRITICAL|\r\n\r\n**代码示例**\r\n\r\n```javascript\r\nuni.onMemoryWarning(function () {\r\n  console.log('onMemoryWarningReceive')\r\n})\r\n```\r\n","p":"command\\设备 - 内存.html"},{"t":"设备/网络状态","d":" uni.getNetworkType(OBJECT)\r\n获取网络类型。\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|success|Function|是|接口调用成功，返回网络类型 networkType|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**success 返回参数说明**\r\n\r\n|参数|说明|\r\n|:-|:-|\r\n|networkType|网络类型|\r\n\r\n**networkType 有效值**\r\n\r\n|值|说明|平台差异说明|\r\n|:-|:-|:-|\r\n|wifi|wifi 网络||\r\n|2g|2g 网络||\r\n|3g|3g 网络||\r\n|4g|4g 网络||\r\n|5g|5g 网络||\r\n|ethernet|有线网络|App|\r\n|unknown|Android 下不常见的网络类型||\r\n|none|无网络|&nbsp;|\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.getNetworkType({\r\n\tsuccess: function (res) {\r\n\t\tconsole.log(res.networkType);\r\n\t}\r\n});\r\n```\r\n\r\n uni.onNetworkStatusChange(CALLBACK)\r\n监听网络状态变化。可使用`uni.offNetworkStatusChange`取消监听。\r\n\r\n**CALLBACK 返回参数**\r\n\r\n|参数|类型|说明|平台差异说明|\r\n|:-|:-|:-|:-|\r\n|isConnected|Boolean|当前是否有网络连接|字节跳动小程序不支持|\r\n|networkType|String|网络类型|&nbsp;|\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.onNetworkStatusChange(function (res) {\r\n\tconsole.log(res.isConnected);\r\n\tconsole.log(res.networkType);\r\n});\r\n```\r\n uni.offNetworkStatusChange(CALLBACK)\r\n取消监听网络状态变化。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|HBuilderX 3.0.1+|HBuilderX 3.0.1+|基础库 2.9.3+|x|x|x|x|\r\n\r\n**Tips**\r\n- `CALLBACK`必须为调用`uni.onNetworkStatusChange`时传入的`CALLBACK`\r\n\r\n例如：\r\n```\r\nvar CALLBACK = function(res) {\r\n    // ...这里写你的业务逻辑\r\n}\r\nuni.offNetworkStatusChange(CALLBACK)\r\nuni.onNetworkStatusChange(CALLBACK);\r\n```","p":"command\\设备 - 网络状态.html"},{"t":"设备/系统主题","d":"\n uni.onThemeChange(CALLBACK)\n监听系统主题状态变化。\n\n**CALLBACK 返回参数**\n\n|参数|类型|说明|平台差异说明|\n|:-|:-|:-|:-|\n|theme|String|主题名称(dark, light)|App2.6.5+ 仅iOS|\n\n**示例**\n\n```javascript\nuni.onThemeChange(function (res) {\n\tconsole.log(res.theme);\n});\n```\n\n**注意**\n- 自定义基座生效\n- 仅 V3 编译支持，参考 manifest.json 配置","p":"command\\设备 - 系统主题.html"},{"t":"设备/加速度计","d":" uni.onAccelerometerChange(CALLBACK)\r\n监听加速度数据，频率：5次/秒，接口调用后会自动开始监听，可使用 ``uni.offAccelerometer`` 取消监听。\r\n\r\n**CALLBACK 返回参数**\r\n\r\n|参数|类型|说明|\r\n|:-|:-|:-|\r\n|x|Number|X 轴|\r\n|y|Number|Y 轴|\r\n|z|Number|Z 轴|\r\n\r\n**Tips**\r\n\r\n- H5端获取加速度信息，需要部署在 **https** 服务上，本地预览（localhost）仍然可以使用 http 协议。\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.onAccelerometerChange(function (res) {\r\n\tconsole.log(res.x);\r\n\tconsole.log(res.y);\r\n\tconsole.log(res.z);\r\n});\r\n```\r\n\r\n uni.offAccelerometerChange(CALLBACK)\r\n取消监听加速度数据。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|HBuilderX 2.9.6+|HBuilderX 2.9.6+|基础库 2.9.3+|x|x|x|x|\r\n\r\n uni.startAccelerometer(OBJECT)\r\n开始监听加速度数据。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|√|√|x|√|√|\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|默认|必填|说明|平台差异说明|\r\n|:-|:-|:-|:-|:-|:-|\r\n|interval|String|normal|否|监听加速度数据回调函数的执行频率|微信小程序、百度小程序|\r\n|success|Function||否|接口调用成功的回调||\r\n|fail|Function||否|接口调用失败的回调函数||\r\n|complete|Function||否|接口调用结束的回调函数（调用成功、失败都会执行）|&nbsp;|\r\n\r\n`interval` 的合法值\r\n\r\n|值|说明|\r\n|:-|:-|\r\n|game|适用于更新游戏的回调频率，在 20ms/次 左右|\r\n|ui|适用于更新 UI 的回调频率，在 60ms/次 左右|\r\n|normal|普通的回调频率，在 200ms/次 左右|\r\n\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.startAccelerometer();\r\n```\r\n\r\n uni.stopAccelerometer(OBJECT)\r\n停止监听加速度数据。\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|success|Function|否|接口调用成功的回调|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.stopAccelerometer();\r\n```\r\n","p":"command\\设备 - 加速度计.html"},{"t":"设备/罗盘","d":" uni.onCompassChange(CALLBACK)\r\n监听罗盘数据，频率：5次/秒，接口调用后会自动开始监听，可使用 ``uni.offCompassChange`` 取消监听。\r\n\r\n**CALLBACK 返回参数**\r\n\r\n|参数|类型|说明|\r\n|:-|:-|:-|\r\n|direction|Number|面对的方向度数|\r\n\r\n**Tips**\r\n- H5端获取罗盘信息，需要部署在 **https** 服务上，本地预览（localhost）仍然可以使用 http 协议。\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.onCompassChange(function (res) {\r\n\tconsole.log(res.direction);\r\n});\r\n```\r\n\r\n uni.offCompassChange(CALLBACK)\r\n取消监听罗盘数据。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|HBuilderX 2.9.6+|HBuilderX 2.9.6+|基础库 2.9.3+|x|x|x|x|\r\n\r\n**Tips**\r\n- `CALLBACK`为调用`uni.onCompassChange`时传入的`CALLBACK`\r\n\r\n uni.startCompass(OBJECT)\r\n开始监听罗盘数据。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|√|√|x|√|√|√|\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|success|Function|否|接口调用成功的回调|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.startCompass();\r\n```\r\n\r\n uni.stopCompass(OBJECT)\r\n停止监听罗盘数据。\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|success|Function|否|接口调用成功的回调|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.stopCompass();\r\n```\r\n","p":"command\\设备 - 罗盘.html"},{"t":"设备/陀螺仪","d":" uni.onGyroscopeChange(CALLBACK)\r\n\r\n监听陀螺仪数据变化事件。\r\n\r\n支付宝小程序频率为 500ms/次，微信小程序频率根据 [uni.startGyroscope](/api/system/gyroscope?id=startgyroscope) 的 interval 参数设置。事件只有在调用 [uni.startGyroscope](/api/system/gyroscope?id=startgyroscope) 后才会开始监听，使用 [uni.stopGyroscope](/api/system/gyroscope?id=stopgyroscope) 可以停止监听。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|x|x|√|√|x|x|\r\n\r\n**CALLBACK 参数说明**\r\n\r\n|属性|类型|说明\r\n|--|--|--|\r\n|res|Object|res = {x,y,x}|\r\n\r\n**res 的结构**\r\n\r\n|名称|类型|描述|\r\n|---|---|---|\r\n|x|number|x轴方向角速度|\r\n|y|number|y轴方向角速度|\r\n|z|number|z轴方向角速度|\r\n\r\n uni.startGyroscope(OBJECT)\r\n\r\n开始监听陀螺仪数据。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|x|x|√|√|x|x|\r\n\r\n|属性|类型|默认值|必填|说明|平台说明|\r\n|---|---|---|---|---|\r\n|interval|string|normal|否|监听陀螺仪数据回调函数的执行频率：game（20ms/次）、ui（60ms/次）、normal（200ms/次）|微信小程序|\r\n|success|function||否|接口调用成功的回调函数||\r\n|fail|function||否|接口调用失败的回调函数||\r\n|complete|function||否|接口调用结束的回调函数（调用成功、失败都会执行）|&nbsp;|\r\n\r\n uni.stopGyroscope(OBJECT)\r\n\r\n停止监听陀螺仪数据。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|x|x|√|√|x|x|\r\n\r\n|属性|类型|必填|说明|\r\n|---|---|---|---|\r\n|success|function|否|接口调用成功的回调函数|\r\n|fail|function|否|接口调用失败的回调函数|\r\n|complete|function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**代码示例**\r\n\r\n```html\r\n<template>\r\n    <view>\r\n        <button @click=\"start\">开始监听陀螺仪变化</button>\r\n        <button @click=\"stop\">停止监听陀螺仪变化</button>\r\n    </view>\r\n</template>\r\n```\r\n\r\n```javascript\r\nexport default {\r\n    methods: {\r\n        start() {\r\n            uni.onGyroscopeChange((res) => {\r\n                console.log('gyroData.rotationRate.x = ' + res.x)\r\n                console.log('gyroData.rotationRate.y = ' + res.y)\r\n                console.log('gyroData.rotationRate.z = ' + res.z)\r\n            });\r\n            uni.startGyroscope({\r\n                interval: \"normal\",\r\n                success() {\r\n                    console.log('success')\r\n                },\r\n                fail() {\r\n                    console.log('fail')\r\n                }\r\n            })\r\n        },\r\n        stop(){\r\n            uni.stopGyroscope({\r\n                success() {\r\n                    console.log('stop success!')\r\n                },\r\n                fail() {\r\n                    console.log('stop fail!')\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n**Tips**\r\n\r\n* 陀螺仪 相关 API 在小程序开发工具中调用可能报错，请在真机中测试","p":"command\\设备 - 陀螺仪.html"},{"t":"设备/拨打电话","d":" uni.makePhoneCall(OBJECT)\r\n拨打电话。\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|phoneNumber|String|是|需要拨打的电话号码|\r\n|success|Function|否|接口调用成功的回调|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.makePhoneCall({\r\n\tphoneNumber: '114' //仅为示例\r\n});\r\n```\r\n\r\n\r\n注：App端关于电话短信的扩展文档\r\n- Android不弹出询问框直接拨打电话：[https://ask.dcloud.net.cn/question/4035](https://ask.dcloud.net.cn/question/4035)\r\n- 发送短信：[http://www.html5plus.org/doc/zh_cn/messaging.html](http://www.html5plus.org/doc/zh_cn/messaging.html)\r\n- Android读取短信验证码：[http://ask.dcloud.net.cn/article/676](http://ask.dcloud.net.cn/article/676)\r\n- Android遍历读取短信：[https://ask.dcloud.net.cn/article/12934](https://ask.dcloud.net.cn/article/12934)\r\n注意需要赋予相关权限。\r\n","p":"command\\设备 - 拨打电话.html"},{"t":"设备/扫码","d":" uni.scanCode(OBJECT)\r\n调起客户端扫码界面，扫码成功后返回对应的结果。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|x|√|√|√|√|√|\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|平台差异说明|\r\n|:-|:-|:-|:-|:-:|\r\n|onlyFromCamera|Boolean|否|是否只能从相机扫码，不允许从相册选择图片|字节跳动小程序不支持此参数|\r\n|scanType|Array|否|扫码类型，参数类型是数组，二维码是'qrCode'，一维码是'barCode'，DataMatrix是‘datamatrix’，pdf417是‘pdf417’。|字节跳动小程序不支持此参数|\r\n|success|Function|否|接口调用成功的回调，返回内容详见返回参数说明。||\r\n|fail|Function|否|接口调用失败的回调函数（识别失败、用户取消等情况下触发）||\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|&nbsp;|\r\n\r\n**success 返回参数说明**\r\n\r\n|参数|说明|平台差异说明|\r\n|:-|:-|:-|\r\n|result|所扫码的内容||\r\n|scanType|所扫码的类型|App、微信小程序、百度小程序、QQ小程序|\r\n|charSet|所扫码的字符集|App、微信小程序、百度小程序、QQ小程序|\r\n|path|当所扫的码为当前应用的合法二维码时，会返回此字段，内容为二维码携带的 path。|App、微信小程序、百度小程序、QQ小程序|\r\n\r\n**示例**\r\n\r\n```javascript\r\n// 允许从相机和相册扫码\r\nuni.scanCode({\r\n\tsuccess: function (res) {\r\n\t\tconsole.log('条码类型：' + res.scanType);\r\n\t\tconsole.log('条码内容：' + res.result);\r\n\t}\r\n});\r\n\r\n// 只允许通过相机扫码\r\nuni.scanCode({\r\n\tonlyFromCamera: true,\r\n\tsuccess: function (res) {\r\n\t\tconsole.log('条码类型：' + res.scanType);\r\n\t\tconsole.log('条码内容：' + res.result);\r\n\t}\r\n});\r\n\r\n// 调起条码扫描\r\nuni.scanCode({\r\n\tscanType: ['barCode'],\r\n\tsuccess: function (res) {\r\n\t\tconsole.log('条码类型：' + res.scanType);\r\n\t\tconsole.log('条码内容：' + res.result);\r\n\t}\r\n});\r\n```\r\n\r\n**Tip**\r\n\r\n- App-vue如果想自定义扫码，可参考[uni-app中如何使用5+的原生界面控件](http://ask.dcloud.net.cn/article/35036)和[plus.barcode API](https://www.html5plus.org/doc/zh_cn/barcode.html)\r\n- App-nvue，支持barcode组件，可自定义扫码界面。[详见](https://uniapp.dcloud.io/component/barcode)。App端自定义扫码界面，建议使用nvue方式。\r\n- App的扫码引擎，使用业内开源的通用扫码库，扫码效率比不过微信、支付宝等商业扫码库。如需更强的扫码效果，请使用支付宝提供的扫码插件：[https://ext.dcloud.net.cn/plugin?id=2636](https://ext.dcloud.net.cn/plugin?id=2636)\r\n- 微信小程序自定义扫码界面，可使用camera组件。[详见](https://uniapp.dcloud.io/component/camera)\r\n- 微信内嵌浏览器运行H5版时，可通过js sdk实现扫码，需要引入一个单独的js，[详见](https://ask.dcloud.net.cn/article/35380)\r\n- 在扫码界面点击返回也会进入 `fail` 回调中\r\n- 支付宝小程序不支持 `success` 回调中的 `scanType`，`charSet`，`path`\r\n","p":"command\\设备 - 扫码.html"},{"t":"设备/剪贴板","d":"**剪贴板 API 平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|√|√|√|√|√|√|√|\n uni.setClipboardData(OBJECT)\n设置系统剪贴板的内容。\n\n**OBJECT 参数说明**\n\n|参数名|类型|必填|说明|\n|:-|:-|:-|:-|\n|data|String|是|需要设置的内容|\n|success|Function|否|接口调用成功的回调|\n|fail|Function|否|接口调用失败的回调函数|\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\n\n**示例**\n\n```javascript\nuni.setClipboardData({\n\tdata: 'hello',\n\tsuccess: function () {\n\t\tconsole.log('success');\n\t}\n});\n```\n\n uni.getClipboardData(OBJECT)\n获取系统剪贴板内容。\n\n**OBJECT 参数说明**\n\n|参数名|类型|必填|说明|\n|:-|:-|:-|:-|\n|success|Function|否|接口调用成功的回调|\n|fail|Function|否|接口调用失败的回调函数|\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\n\n**success 返回参数说明**\n\n|参数|类型|说明|\n|:-|:-|:-|\n|data|String|剪贴板的内容|\n\n**示例**\n\n```javascript\nuni.getClipboardData({\n\tsuccess: function (res) {\n\t\tconsole.log(res.data);\n\t}\n});\n```\n\n **注意**\n\n- 设置剪贴板内容后，小程序平台会自动弹出轻提示。App平台默认与小程序保持一致策略。如不希望在App平台弹出提示，可使用Native.js自行操作剪贴板，插件市场有封装好的示例[https://ext.dcloud.net.cn/plugin?id=712](https://ext.dcloud.net.cn/plugin?id=712)。也可以在设置剪切板后立即uni.hideToast()。\n- H5的复制粘贴，可去插件市场搜索[剪贴板](https://ext.dcloud.net.cn/search?q=%E5%89%AA%E8%B4%B4%E6%9D%BF)\n","p":"command\\设备 - 剪贴板.html"},{"t":"设备/屏幕","d":" uni.setScreenBrightness(OBJECT)\r\n设置屏幕亮度。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|x|√|√|√|x|√|\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|value|Number|是|屏幕亮度值，范围 0~1，0 最暗，1 最亮|\r\n|success|Function|否|接口调用成功的回调|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.setScreenBrightness({\r\n\tvalue: 0.5,\r\n\tsuccess: function () {\r\n\t\tconsole.log('success');\r\n\t}\r\n});\r\n```\r\n\r\n>*Tips:* 避免 onshow() 里使用 setScreenBrightness() , 亮度变化会再次触发 onShow() 造成死循环\r\n\r\n uni.getScreenBrightness(OBJECT)\r\n获取屏幕亮度。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|x|√|√|√|x|√|\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|success|Function|否|接口调用成功的回调|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**success 返回参数说明**\r\n\r\n|参数|类型|说明|\r\n|:-|:-|:-|\r\n|value|Number|屏幕亮度值，范围 0~1，0 最暗，1 最亮。|\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.getScreenBrightness({\r\n\tsuccess: function (res) {\r\n\t\tconsole.log('屏幕亮度值：' + res.value);\r\n\t}\r\n});\r\n```\r\n\r\n uni.setKeepScreenOn(OBJECT)\r\n设置是否保持常亮状态。仅在当前应用生效，离开应用后设置失效。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|x|√|√|√|√|√|\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|keepScreenOn|Boolean|是|是否保持屏幕常亮|\r\n|success|Function|否|接口调用成功的回调|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**success 返回参数说明**\r\n\r\n|参数|类型|说明|\r\n|:-|:-|:-|\r\n|errMsg|String|调用结果|\r\n\r\n**示例**\r\n\r\n```javascript\r\n// 保持屏幕常亮\r\nuni.setKeepScreenOn({\r\n\tkeepScreenOn: true\r\n});\r\n```\r\n\r\n","p":"command\\设备 - 屏幕.html"},{"t":"设备/用户截屏事件","d":" uni.onUserCaptureScreen(CALLBACK)\r\n\r\n监听用户主动截屏事件，用户使用系统截屏按键截屏时触发此事件。\r\n \r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|x|x|√|√|√|√|√|\r\n\r\n**CALLBACK返回参数：**\r\n\r\n无\r\n\r\n**代码示例**\r\n\r\n```javascript\r\nuni.onUserCaptureScreen(function() {\r\n    console.log('用户截屏了')\r\n});\r\n```\r\n","p":"command\\设备 - 用户截屏事件.html"},{"t":"设备/振动","d":" uni.vibrate(OBJECT)\r\n使手机发生振动。\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|success|Function|否|接口调用成功的回调|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.vibrate({\r\n\tsuccess: function () {\r\n\t\tconsole.log('success');\r\n\t}\r\n});\r\n```\n\n uni.vibrateLong(OBJECT)\r\n使手机发生较长时间的振动（400ms）。\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|success|Function|否|接口调用成功的回调|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.vibrateLong({\r\n\tsuccess: function () {\r\n\t\tconsole.log('success');\r\n\t}\r\n});\r\n```\r\n\r\n uni.vibrateShort(OBJECT)\r\n使手机发生较短时间的振动（15ms）。\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|success|Function|否|接口调用成功的回调|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.vibrateShort({\r\n\tsuccess: function () {\r\n\t\tconsole.log('success');\r\n\t}\r\n});\r\n```\r\n\r\n**注意**\r\n- iOS上只有长震动，没有短震动\r\n- iOS上需要手机设置“打开响铃时震动”或“静音时震动”，否则无法震动\n- vibrate只适用于钉钉小程序、支付宝小程序","p":"command\\设备 - 振动.html"},{"t":"设备/手机联系人","d":" uni.addPhoneContact(OBJECT)\r\n调用后，用户可以选择将该表单以“新增联系人”或“添加到已有联系人”的方式（APP端目前没有选择步骤，将直接写入），写入手机系统通讯录，完成手机通讯录联系人和联系方式的增加。\r\n\r\nApp平台提供了更多通讯录相关API，包括读取联系人，详见：[https://www.html5plus.org/doc/zh_cn/contacts.html](https://www.html5plus.org/doc/zh_cn/contacts.html)\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|x|√|√|√|x|x|\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|photoFilePath|String|否|头像本地文件路径|\r\n|nickName|String|否|昵称|\r\n|lastName|String|否|姓氏|\r\n|middleName|String|否|中间名|\r\n|firstName|String|是|名字|\r\n|remark|String|否|备注|\r\n|mobilePhoneNumber|String|否|手机号|\r\n|weChatNumber|String|否|微信号|\r\n|addressCountry|String|否|联系地址国家|\r\n|addressState|String|否|联系地址省份|\r\n|addressCity|String|否|联系地址城市|\r\n|addressStreet|String|否|联系地址街道|\r\n|addressPostalCode|String|否|联系地址邮政编码|\r\n|organization|String|否|公司|\r\n|title|String|否|职位|\r\n|workFaxNumber|String|否|工作传真|\r\n|workPhoneNumber|String|否|工作电话|\r\n|hostNumber|String|否|公司电话|\r\n|email|String|否|电子邮件|\r\n|url|String|否|网站|\r\n|workAddressCountry|String|否|工作地址国家|\r\n|workAddressState|String|否|工作地址省份|\r\n|workAddressCity|String|否|工作地址城市|\r\n|workAddressStreet|String|否|工作地址街道|\r\n|workAddressPostalCode|String|否|工作地址邮政编码|\r\n|homeFaxNumber|String|否|住宅传真|\r\n|homePhoneNumber|String|否|住宅电话|\r\n|homeAddressCountry|String|否|住宅地址国家|\r\n|homeAddressState|String|否|住宅地址省份|\r\n|homeAddressCity|String|否|住宅地址城市|\r\n|homeAddressStreet|String|否|住宅地址街道|\r\n|homeAddressPostalCode|String|否|住宅地址邮政编码|\r\n|success|Function|否|接口调用成功的回调|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**回调结果**\r\n\r\n|回调类型|errMsg|说明|\r\n|:-|:-|:-|\r\n|success|ok|添加成功|\r\n|cancel|fail cancel|用户取消操作|\r\n|fail|fail ${detail}|调用失败，detail 加上详细信息。|\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.addPhoneContact({\r\n\tnickName: '昵称',\r\n\tlastName: '姓',\r\n\tfirstName: '名',\r\n\tremark: '备注',\r\n\tmobilePhoneNumber: '114',\r\n\tweChatNumber: 'wx123',\r\n\tsuccess: function () {\r\n\t\tconsole.log('success');\r\n\t},\r\n\tfail: function () {\r\n\t\tconsole.log('fail');\r\n\t}\r\n});\r\n```\r\n\r\n**注意**\r\n\r\n- 手机OS对通讯录访问有严格的权限限制和要求。在小程序中使用时，需注意微信等小程序载体本身已经获得了手机端的授权许可。App端获取通讯录相关权限，参考[https://ext.dcloud.net.cn/plugin?id=594](https://ext.dcloud.net.cn/plugin?id=594)\r\n- 打包App时，云打包则需要在manifest中配置权限和模块，离线打包需自行在原生工程中配置。\r\n","p":"command\\设备 - 手机联系人.html"},{"t":"设备/蓝牙","d":"**蓝牙 API 平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|√|x|√|√|x|x|x|\n\n uni.openBluetoothAdapter(OBJECT)\n\n初始化蓝牙模块\n\n**OBJECT 参数说明**\n\n|属性|类型|默认值|必填|说明|\n|---|---|---|---|---|\n|success|function||否|接口调用成功的回调函数|\n|fail|function||否|接口调用失败的回调函数|\n|complete|function||否|接口调用结束的回调函数（调用成功、失败都会执行）|\n\n 错误\n\n|错误码|错误信息|说明|\n|---|---|---|\n|0|ok|正常|\n|10000|not init|未初始化蓝牙适配器|\n|10001|not available|当前蓝牙适配器不可用|\n|10002|no device|没有找到指定设备|\n|10003|connection fail|连接失败|\n|10004|no service|没有找到指定服务|\n|10005|no characteristic|没有找到指定特征值|\n|10006|no connection|当前连接已断开|\n|10007|property not support|当前特征值不支持此操作|\n|10008|system error|其余所有系统上报的异常|\n|10009|system not support|Android 系统特有，系统版本低于 4.3 不支持 BLE|\n\n**注意**\n\n*   其他蓝牙相关 API 必须在 [`uni.openBluetoothAdapter`](/api/system/bluetooth?id=openbluetoothadapter) 调用之后使用。否则 API 会返回错误（errCode=10000）。\n*   在用户蓝牙开关未开启或者手机不支持蓝牙功能的情况下，调用 [`uni.openBluetoothAdapter`](/api/system/bluetooth?id=openbluetoothadapter) 会返回错误（errCode=10001），表示手机蓝牙功能不可用。此时APP蓝牙模块已经初始化完成，可通过 [`uni.onBluetoothAdapterStateChange`](/api/system/bluetooth?id=onbluetoothadapterstatechange) 监听手机蓝牙状态的改变，也可以调用蓝牙模块的所有API。\n\n**示例代码**\n\n```javascript\nuni.openBluetoothAdapter({\n  success(res) {\n    console.log(res)\n  }\n})\n```\n\n uni.startBluetoothDevicesDiscovery(OBJECT)\n\n开始搜寻附近的蓝牙外围设备。**此操作比较耗费系统资源，请在搜索并连接到设备后调用 [`uni.stopBluetoothDevicesDiscovery`](/api/system/bluetooth?id=stopbluetoothdevicesdiscovery) 方法停止搜索。**\n\n\n**OBJECT 参数说明**\n\n|属性|类型|默认值|必填|说明|\n|---|---|---|---|---|\n|services|Array&lt;String&gt;||否|要搜索但蓝牙设备主 service 的 uuid 列表。某些蓝牙设备会广播自己的主 service 的 uuid。如果设置此参数，则只搜索广播包有对应 uuid 的主服务的蓝牙设备。建议主要通过该参数过滤掉周边不需要处理的其他蓝牙设备。|\n|allowDuplicatesKey|boolean|false|否|是否允许重复上报同一设备。如果允许重复上报，则 `uni.onBlueToothDeviceFound` 方法会多次上报同一设备，但是 RSSI 值会有不同。|\n|interval|number|0|否|上报设备的间隔。0 表示找到新设备立即上报，其他数值根据传入的间隔上报。|\n|success|function||否|接口调用成功的回调函数|\n|fail|function||否|接口调用失败的回调函数|\n|complete|function||否|接口调用结束的回调函数（调用成功、失败都会执行）|\n\n 错误\n\n|错误码|错误信息|说明|\n|---|---|---|\n|0|ok|正常|\n|10000|not init|未初始化蓝牙适配器|\n|10001|not available|当前蓝牙适配器不可用|\n|10002|no device|没有找到指定设备|\n|10003|connection fail|连接失败|\n|10004|no service|没有找到指定服务|\n|10005|no characteristic|没有找到指定特征值|\n|10006|no connection|当前连接已断开|\n|10007|property not support|当前特征值不支持此操作|\n|10008|system error|其余所有系统上报的异常|\n|10009|system not support|Android 系统特有，系统版本低于 4.3 不支持 BLE|\n\n**注意：** \n\n* App 端目前仅支持发现ble蓝牙设备，更多蓝牙设备发现，可以使用 Native.js，参考：[https://ask.dcloud.net.cn/article/114](https://ask.dcloud.net.cn/article/114)。也可以在插件市场获取[原生插件](https://ext.dcloud.net.cn/search?q=%E8%93%9D%E7%89%99&cat1=5&cat2=51&orderBy=UpdatedDate)\n\n\n**示例代码**\n\n```javascript\n// 以微信硬件平台的蓝牙智能灯为例，主服务的 UUID 是 FEE7。传入这个参数，只搜索主服务 UUID 为 FEE7 的设备\nuni.startBluetoothDevicesDiscovery({\n  services: ['FEE7'],\n  success(res) {\n    console.log(res)\n  }\n})\n```\n\n uni.onBluetoothDeviceFound(CALLBACK)\n\n监听寻找到新设备的事件\n\n**CALLBACK 返回参数**\n\n|属性|类型|说明|\n|---|---|---|\n|devices|Array&lt;Object&gt;|新搜索到的设备列表|\n\n**devices 的结构**\n\n|属性|类型|说明|\n|---|---|---|\n|name|string|蓝牙设备名称，某些设备可能没有|\n|deviceId|string|用于区分设备的 id|\n|RSSI|number|当前蓝牙设备的信号强度|\n|advertisData|ArrayBuffer|当前蓝牙设备的广播数据段中的 ManufacturerData 数据段。|\n|advertisServiceUUIDs|Array&lt;String&gt;|当前蓝牙设备的广播数据段中的 ServiceUUIDs 数据段|\n|localName|string|当前蓝牙设备的广播数据段中的 LocalName 数据段|\n|serviceData|Object|当前蓝牙设备的广播数据段中的 ServiceData 数据段|\n\n**注意**\n\n*   若在 [`uni.onBluetoothDeviceFound`](/api/system/bluetooth?id=onbluetoothdevicefound) 回调了某个设备，则此设备会添加到 [`uni.getBluetoothDevices`](/api/system/bluetooth?id=getbluetoothdevices) 接口获取到的数组中。\n\n**示例代码**\n\n```javascript\n// ArrayBuffer转16进度字符串示例\nfunction ab2hex(buffer) {\n  const hexArr = Array.prototype.map.call(\n    new Uint8Array(buffer),\n    function (bit) {\n      return ('00' + bit.toString(16)).slice(-2)\n    }\n  )\n  return hexArr.join('')\n}\nuni.onBluetoothDeviceFound(function (devices) {\n  console.log('new device list has founded')\n  console.dir(devices)\n  console.log(ab2hex(devices[0].advertisData))\n})\n```\n\n uni.stopBluetoothDevicesDiscovery(OBJECT)\n\n停止搜寻附近的蓝牙外围设备。若已经找到需要的蓝牙设备并不需要继续搜索时，建议调用该接口停止蓝牙搜索。\n\n**OBJECT 参数说明**\n\n|属性|类型|默认值|必填|说明|\n|---|---|---|---|---|\n|success|function||否|接口调用成功的回调函数|\n|fail|function||否|接口调用失败的回调函数|\n|complete|function||否|接口调用结束的回调函数（调用成功、失败都会执行）|\n\n 错误\n\n|错误码|错误信息|说明|\n|---|---|---|\n|0|ok|正常|\n|10000|not init|未初始化蓝牙适配器|\n|10001|not available|当前蓝牙适配器不可用|\n|10002|no device|没有找到指定设备|\n|10003|connection fail|连接失败|\n|10004|no service|没有找到指定服务|\n|10005|no characteristic|没有找到指定特征值|\n|10006|no connection|当前连接已断开|\n|10007|property not support|当前特征值不支持此操作|\n|10008|system error|其余所有系统上报的异常|\n|10009|system not support|Android 系统特有，系统版本低于 4.3 不支持 BLE|\n\n**示例代码**\n\n```javascript\nuni.stopBluetoothDevicesDiscovery({\n  success(res) {\n    console.log(res)\n  }\n})\n```\n\n uni.onBluetoothAdapterStateChange(CALLBACK)\n\n监听蓝牙适配器状态变化事件\n\n**CALLBACK 返回参数**\n\n|属性|类型|说明|\n|---|---|---|\n|available|boolean|蓝牙适配器是否可用|\n|discovering|boolean|蓝牙适配器是否处于搜索状态|\n\n**示例代码**\n\n```javascript\nuni.onBluetoothAdapterStateChange(function (res) {\n  console.log('adapterState changed, now is', res)\n})\n```\n\n uni.getConnectedBluetoothDevices(OBJECT)\n\n根据 uuid 获取处于已连接状态的设备。\n\n**OBJECT 参数说明**\n\n|属性|类型|默认值|必填|说明|\n|---|---|---|---|---|\n|services|Array&lt;String&gt;||是|蓝牙设备主 service 的 uuid 列表|\n|success|function||否|接口调用成功的回调函数|\n|fail|function||否|接口调用失败的回调函数|\n|complete|function||否|接口调用结束的回调函数（调用成功、失败都会执行）|\n\n**success 返回参数说明：**\n\n|属性|类型|说明|\n|---|---|---|\n|devices|Array&lt;Object&gt;|搜索到的设备列表|\n\n**res.devices 的结构**\n\n|属性|类型|说明|\n|---|---|---|\n|name|string|蓝牙设备名称，某些设备可能没有|\n|deviceId|string|用于区分设备的 id|\n\n 错误\n\n|错误码|错误信息|说明|\n|---|---|---|\n|0|ok|正常|\n|10000|not init|未初始化蓝牙适配器|\n|10001|not available|当前蓝牙适配器不可用|\n|10002|no device|没有找到指定设备|\n|10003|connection fail|连接失败|\n|10004|no service|没有找到指定服务|\n|10005|no characteristic|没有找到指定特征值|\n|10006|no connection|当前连接已断开|\n|10007|property not support|当前特征值不支持此操作|\n|10008|system error|其余所有系统上报的异常|\n|10009|system not support|Android 系统特有，系统版本低于 4.3 不支持 BLE|\n\n**示例代码** \n\n```javascript\nuni.getConnectedBluetoothDevices({\n  success(res) {\n    console.log(res)\n  }\n})\n```\n\n uni.getBluetoothDevices(OBJECT)\n\n获取在蓝牙模块生效期间所有已发现的蓝牙设备。包括已经和本机处于连接状态的设备。\n\n**OBJECT 参数说明**\n\n|属性|类型|默认值|必填|说明|\n|---|---|---|---|---|\n|success|function||否|接口调用成功的回调函数|\n|fail|function||否|接口调用失败的回调函数|\n|complete|function||否|接口调用结束的回调函数（调用成功、失败都会执行）|\n\n**success 返回参数说明：**\n\n|属性|类型|说明|\n|:-|:-|:-|\n|devices|Array&lt;Object&gt;|uuid 对应的的已连接设备列表|\n\n**res.devices 的结构**\n\n|属性|类型|说明|\n|---|---|---|---|\n|name|string|蓝牙设备名称，某些设备可能没有|\n|deviceId|string|用于区分设备的 id|\n|RSSI|number|当前蓝牙设备的信号强度|\n|advertisData|ArrayBuffer|当前蓝牙设备的广播数据段中的 ManufacturerData 数据段。|\n|advertisServiceUUIDs|Array&lt;String&gt;|当前蓝牙设备的广播数据段中的 ServiceUUIDs 数据段|\n|localName|string|当前蓝牙设备的广播数据段中的 LocalName 数据段|\n|serviceData|Object|当前蓝牙设备的广播数据段中的 ServiceData 数据段|\n\n 错误\n\n|错误码|错误信息|说明|\n|---|---|---|\n|0|ok|正常|\n|10000|not init|未初始化蓝牙适配器|\n|10001|not available|当前蓝牙适配器不可用|\n|10002|no device|没有找到指定设备|\n|10003|connection fail|连接失败|\n|10004|no service|没有找到指定服务|\n|10005|no characteristic|没有找到指定特征值|\n|10006|no connection|当前连接已断开|\n|10007|property not support|当前特征值不支持此操作|\n|10008|system error|其余所有系统上报的异常|\n|10009|system not support|Android 系统特有，系统版本低于 4.3 不支持 BLE|\n\n**示例代码**\n\n```javascript\n// ArrayBuffer转16进度字符串示例\nfunction ab2hex(buffer) {\n  const hexArr = Array.prototype.map.call(\n    new Uint8Array(buffer),\n    function (bit) {\n      return ('00' + bit.toString(16)).slice(-2)\n    }\n  )\n  return hexArr.join('')\n}\nuni.getBluetoothDevices({\n  success(res) {\n    console.log(res)\n    if (res.devices[0]) {\n      console.log(ab2hex(res.devices[0].advertisData))\n    }\n  }\n})\n```\n\n**注意**\n\n*   该接口获取到的设备列表为**蓝牙模块生效期间所有搜索到的蓝牙设备**，若在蓝牙模块使用流程结束后未及时调用 [`uni.closeBluetoothAdapter`](/api/system/bluetooth?id=closebluetoothadapter) 释放资源，会存在调用该接口会返回之前的蓝牙使用流程中搜索到的蓝牙设备，可能设备已经不在用户身边，无法连接。\n*   蓝牙设备在被搜索到时，系统返回的 name 字段一般为广播包中的 LocalName 字段中的设备名称，而如果与蓝牙设备建立连接，系统返回的 name 字段会改为从蓝牙设备上获取到的 `GattName`。若需要动态改变设备名称并展示，建议使用 `localName` 字段。\n\n uni.getBluetoothAdapterState(OBJECT)\n\n获取本机蓝牙适配器状态。\n\n**OBJECT 参数说明**\n\n|属性|类型|默认值|必填|说明|\n|---|---|---|---|---|\n|success|function||否|接口调用成功的回调函数|\n|fail|function||否|接口调用失败的回调函数|\n|complete|function||否|接口调用结束的回调函数（调用成功、失败都会执行）|\n\n**success 返回参数说明：**\n\n|属性|类型|说明|\n|---|---|---|\n|discovering|boolean|是否正在搜索设备|\n|available|boolean|蓝牙适配器是否可用|\n\n 错误\n\n|错误码|错误信息|说明|\n|---|---|---|\n|0|ok|正常|\n|10000|not init|未初始化蓝牙适配器|\n|10001|not available|当前蓝牙适配器不可用|\n|10002|no device|没有找到指定设备|\n|10003|connection fail|连接失败|\n|10004|no service|没有找到指定服务|\n|10005|no characteristic|没有找到指定特征值|\n|10006|no connection|当前连接已断开|\n|10007|property not support|当前特征值不支持此操作|\n|10008|system error|其余所有系统上报的异常|\n|10009|system not support|Android 系统特有，系统版本低于 4.3 不支持 BLE|\n\n**示例代码**\n\n```javascript\nuni.getBluetoothAdapterState({\n  success(res) {\n    console.log(res)\n  }\n})\n```\n\n uni.closeBluetoothAdapter(OBJECT)\n\n关闭蓝牙模块。调用该方法将断开所有已建立的连接并释放系统资源。建议在使用蓝牙流程后，与 [`uni.openBluetoothAdapter`](/api/system/bluetooth?id=openbluetoothadapter) 成对调用。\n\n**OBJECT 参数说明**\n\n|属性|类型|默认值|必填|说明|\n|---|---|---|---|---|\n|success|function||否|接口调用成功的回调函数|\n|fail|function||否|接口调用失败的回调函数|\n|complete|function||否|接口调用结束的回调函数（调用成功、失败都会执行）|\n\n 错误\n\n|错误码|错误信息|说明|\n|---|---|---|\n|0|ok|正常|\n|10000|not init|未初始化蓝牙适配器|\n|10001|not available|当前蓝牙适配器不可用|\n|10002|no device|没有找到指定设备|\n|10003|connection fail|连接失败|\n|10004|no service|没有找到指定服务|\n|10005|no characteristic|没有找到指定特征值|\n|10006|no connection|当前连接已断开|\n|10007|property not support|当前特征值不支持此操作|\n|10008|system error|其余所有系统上报的异常|\n|10009|system not support|Android 系统特有，系统版本低于 4.3 不支持 BLE|\n\n**示例代码**\n\n```javascript\nuni.closeBluetoothAdapter({\n  success(res) {\n    console.log(res)\n  }\n})\n```\n","p":"command\\设备 - 蓝牙.html"},{"t":"设备/低功耗蓝牙","d":"**低功耗蓝牙 API 平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|√|x|√|√|x|x|x|\n\n uni.setBLEMTU(OBJECT)\n\n2.8.4+\n\n设置蓝牙最大传输单元。需在 uni.createBLEConnection调用成功后调用，mtu 设置范围 (22,512)。安卓5.1以上有效。\n\n**OBJECT 参数说明**\n\n|属性|类型|默认值|必填|说明|\n|---|---|---|---|---|\n|deviceId|string||是|用于区分设备的 id|\n|mtu|number||是|最大传输单元(22,512) 区间内，单位 bytes|\n|success|function||否|接口调用成功的回调函数|\n|fail|function||否|接口调用失败的回调函数|\n|complete|function||否|接口调用结束的回调函数（调用成功、失败都会执行）|\n\n uni.writeBLECharacteristicValue(OBJECT)\n\n向低功耗蓝牙设备特征值中写入二进制数据。注意：必须设备的特征值支持 write 才可以成功调用。\n\n**OBJECT 参数说明**\n\n|属性|类型|默认值|必填|说明|\n|---|---|---|---|---|\n|deviceId|string||是|蓝牙设备 id|\n|serviceId|string||是|蓝牙特征值对应服务的 uuid|\n|characteristicId|string||是|蓝牙特征值的 uuid|\n|value|ArrayBuffer||是|蓝牙设备特征值对应的二进制值|\n|success|function||否|接口调用成功的回调函数|\n|fail|function||否|接口调用失败的回调函数|\n|complete|function||否|接口调用结束的回调函数（调用成功、失败都会执行）|\n\n 错误\n\n|错误码|错误信息|说明|\n|---|---|---|\n|0|ok|正常|\n|10000|not init|未初始化蓝牙适配器|\n|10001|not available|当前蓝牙适配器不可用|\n|10002|no device|没有找到指定设备|\n|10003|connection fail|连接失败|\n|10004|no service|没有找到指定服务|\n|10005|no characteristic|没有找到指定特征值|\n|10006|no connection|当前连接已断开|\n|10007|property not support|当前特征值不支持此操作|\n|10008|system error|其余所有系统上报的异常|\n|10009|system not support|Android 系统特有，系统版本低于 4.3 不支持 BLE|\n\n 注意\n\n*   并行调用多次会存在写失败的可能性。\n*   APP不会对写入数据包大小做限制，但系统与蓝牙设备会限制蓝牙4.0单次传输的数据大小，超过最大字节数后会发生写入错误，建议每次写入不超过20字节。\n*   若单次写入数据过长，iOS 上存在系统不会有任何回调的情况（包括错误回调）。\n*   安卓平台上，在调用 `notifyBLECharacteristicValueChange` 成功后立即调用 `writeBLECharacteristicValue` 接口，在部分机型上会发生 10008 系统错误\n\n 示例代码\n\n```js\n// 向蓝牙设备发送一个0x00的16进制数据\nconst buffer = new ArrayBuffer(1)\nconst dataView = new DataView(buffer)\ndataView.setUint8(0, 0)\nuni.writeBLECharacteristicValue({\n  // 这里的 deviceId 需要在 getBluetoothDevices 或 onBluetoothDeviceFound 接口中获取\n  deviceId,\n  // 这里的 serviceId 需要在 getBLEDeviceServices 接口中获取\n  serviceId,\n  // 这里的 characteristicId 需要在 getBLEDeviceCharacteristics 接口中获取\n  characteristicId,\n  // 这里的value是ArrayBuffer类型\n  value: buffer,\n  success(res) {\n    console.log('writeBLECharacteristicValue success', res.errMsg)\n  }\n})\n```\n\n uni.readBLECharacteristicValue(OBJECT)\n\n读取低功耗蓝牙设备的特征值的二进制数据值。注意：必须设备的特征值支持 read 才可以成功调用。\n\n**OBJECT 参数说明**\n\n|属性|类型|默认值|必填|说明|\n|---|---|---|---|---|\n|deviceId|string||是|蓝牙设备 id|\n|serviceId|string||是|蓝牙特征值对应服务的 uuid|\n|characteristicId|string||是|蓝牙特征值的 uuid|\n|success|function||否|接口调用成功的回调函数|\n|fail|function||否|接口调用失败的回调函数|\n|complete|function||否|接口调用结束的回调函数（调用成功、失败都会执行）|\n\n 错误\n\n|错误码|错误信息|说明|\n|---|---|---|\n|0|ok|正常|\n|10000|not init|未初始化蓝牙适配器|\n|10001|not available|当前蓝牙适配器不可用|\n|10002|no device|没有找到指定设备|\n|10003|connection fail|连接失败|\n|10004|no service|没有找到指定服务|\n|10005|no characteristic|没有找到指定特征值|\n|10006|no connection|当前连接已断开|\n|10007|property not support|当前特征值不支持此操作|\n|10008|system error|其余所有系统上报的异常|\n|10009|system not support|Android 系统特有，系统版本低于 4.3 不支持 BLE|\n\n 注意\n\n*   并行调用多次会存在读失败的可能性。\n*   接口读取到的信息需要在 `onBLECharacteristicValueChange` 方法注册的回调中获取。\n\n 示例代码\n\n```js\n// 必须在这里的回调才能获取\nuni.onBLECharacteristicValueChange(function (characteristic) {\n  console.log('characteristic value comed:', characteristic)\n})\nuni.readBLECharacteristicValue({\n  // 这里的 deviceId 需要已经通过 createBLEConnection 与对应设备建立链接\n  deviceId,\n  // 这里的 serviceId 需要在 getBLEDeviceServices 接口中获取\n  serviceId,\n  // 这里的 characteristicId 需要在 getBLEDeviceCharacteristics 接口中获取\n  characteristicId,\n  success(res) {\n    console.log('readBLECharacteristicValue:', res.errCode)\n  }\n})\n```\n\n uni.onBLEConnectionStateChange(CALLBACK)\n\n监听低功耗蓝牙连接状态的改变事件。包括开发者主动连接或断开连接，设备丢失，连接异常断开等等\n\n**CALLBACK 返回参数**\n\n|属性|类型|说明|\n|---|---|---|\n|deviceId|string|蓝牙设备ID|\n|connected|boolean|是否处于已连接状态|\n\n 示例代码\n\n```js\nuni.onBLEConnectionStateChange(function (res) {\n  // 该方法回调中可以用于处理连接意外断开等异常情况\n  console.log(`device ${res.deviceId} state has changed, connected: ${res.connected}`)\n})\n```\n\n uni.onBLECharacteristicValueChange(CALLBACK)\n\n监听低功耗蓝牙设备的特征值变化事件。必须先启用 `notifyBLECharacteristicValueChange` 接口才能接收到设备推送的 notification。\n\n**CALLBACK 返回参数**\n\n|属性|类型|说明|\n|---|---|---|\n|deviceId|string|蓝牙设备 id|\n|serviceId|string|蓝牙特征值对应服务的 uuid|\n|characteristicId|string|蓝牙特征值的 uuid|\n|value|ArrayBuffer|特征值最新的值|\n\n 示例代码\n\n```js\n// ArrayBuffer转16进度字符串示例\nfunction ab2hex(buffer) {\n  const hexArr = Array.prototype.map.call(\n    new Uint8Array(buffer),\n    function (bit) {\n      return ('00' + bit.toString(16)).slice(-2)\n    }\n  )\n  return hexArr.join('')\n}\nuni.onBLECharacteristicValueChange(function (res) {\n  console.log(`characteristic ${res.characteristicId} has changed, now is ${res.value}`)\n  console.log(ab2hex(res.value))\n})\n```\n\n uni.notifyBLECharacteristicValueChange(OBJECT)\n\n启用低功耗蓝牙设备特征值变化时的 notify 功能，订阅特征值。注意：必须设备的特征值支持 notify 或者 indicate 才可以成功调用。\n另外，必须先启用 `notifyBLECharacteristicValueChange` 才能监听到设备 `characteristicValueChange` 事件\n\n**OBJECT 参数说明**\n\n|属性|类型|默认值|必填|说明|\n|---|---|---|---|---|\n|deviceId|string||是|蓝牙设备 id|\n|serviceId|string||是|蓝牙特征值对应服务的 uuid|\n|characteristicId|string||是|蓝牙特征值的 uuid|\n|state|boolean||是|是否启用 notify|\n|success|function||否|接口调用成功的回调函数|\n|fail|function||否|接口调用失败的回调函数|\n|complete|function||否|接口调用结束的回调函数（调用成功、失败都会执行）|\n\n 错误\n\n|错误码|错误信息|说明|\n|---|---|---|\n|0|ok|正常|\n|10000|not init|未初始化蓝牙适配器|\n|10001|not available|当前蓝牙适配器不可用|\n|10002|no device|没有找到指定设备|\n|10003|connection fail|连接失败|\n|10004|no service|没有找到指定服务|\n|10005|no characteristic|没有找到指定特征值|\n|10006|no connection|当前连接已断开|\n|10007|property not support|当前特征值不支持此操作|\n|10008|system error|其余所有系统上报的异常|\n|10009|system not support|Android 系统特有，系统版本低于 4.3 不支持 BLE|\n\n 注意\n\n*   订阅操作成功后需要设备主动更新特征值的 value，才会触发 [`uni.onBLECharacteristicValueChange`](/api/system/ble?id=onblecharacteristicvaluechange) 回调。\n*   安卓平台上，在调用 `notifyBLECharacteristicValueChange` 成功后立即调用 `writeBLECharacteristicValue` 接口，在部分机型上会发生 10008 系统错误\n\n 示例代码\n\n```js\nuni.notifyBLECharacteristicValueChange({\n  state: true, // 启用 notify 功能\n  // 这里的 deviceId 需要已经通过 createBLEConnection 与对应设备建立链接\n  deviceId,\n  // 这里的 serviceId 需要在 getBLEDeviceServices 接口中获取\n  serviceId,\n  // 这里的 characteristicId 需要在 getBLEDeviceCharacteristics 接口中获取\n  characteristicId,\n  success(res) {\n    console.log('notifyBLECharacteristicValueChange success', res.errMsg)\n  }\n})\n```\n\n uni.getBLEDeviceServices(OBJECT)\n\n获取蓝牙设备所有服务(service)。\n\n**OBJECT 参数说明**\n\n|属性|类型|默认值|必填|说明|\n|---|---|---|---|---|\n|deviceId|string||是|蓝牙设备 id|\n|success|function||否|接口调用成功的回调函数|\n|fail|function||否|接口调用失败的回调函数|\n|complete|function||否|接口调用结束的回调函数（调用成功、失败都会执行）|\n\n**success 返回参数说明：**\n\n|属性|类型|说明|\n|---|---|---|\n|services|Array&lt;Object&gt;|设备服务列表|\n\n**res.services 的结构**\n\n|属性|类型|说明|\n|---|---|---|\n|uuid|string|蓝牙设备服务的 uuid|\n|isPrimary|boolean|该服务是否为主服务|\n\n 错误\n\n|错误码|错误信息|说明|\n|---|---|---|\n|0|ok|正常|\n|10000|not init|未初始化蓝牙适配器|\n|10001|not available|当前蓝牙适配器不可用|\n|10002|no device|没有找到指定设备|\n|10003|connection fail|连接失败|\n|10004|no service|没有找到指定服务|\n|10005|no characteristic|没有找到指定特征值|\n|10006|no connection|当前连接已断开|\n|10007|property not support|当前特征值不支持此操作|\n|10008|system error|其余所有系统上报的异常|\n|10009|system not support|Android 系统特有，系统版本低于 4.3 不支持 BLE|\n\n 示例代码\n\n```js\nuni.getBLEDeviceServices({\n  // 这里的 deviceId 需要已经通过 createBLEConnection 与对应设备建立链接\n  deviceId,\n  success(res) {\n    console.log('device services:', res.services)\n  }\n})\n```\n\n\n uni.getBLEDeviceRSSI(OBJECT)\n\n2.8.4+\n\n获取蓝牙设备的信号强度。\n\n**OBJECT 参数说明**\n\n|属性|类型|默认值|必填|说明|\n|---|---|---|---|---|\n|deviceId|string||是|蓝牙设备 id|\n|success|function||否|接口调用成功的回调函数|\n|fail|function||否|接口调用失败的回调函数|\n|complete|function||否|接口调用结束的回调函数（调用成功、失败都会执行）|\n\n\n uni.getBLEDeviceCharacteristics(OBJECT)\n\n获取蓝牙设备某个服务中所有特征值(characteristic)。\n\n**OBJECT 参数说明**\n\n|属性|类型|默认值|必填|说明|\n|---|---|---|---|---|\n|deviceId|string||是|蓝牙设备 id|\n|serviceId|string||是|蓝牙服务 uuid，需要使用 `getBLEDeviceServices` 获取|\n|success|function||否|接口调用成功的回调函数|\n|fail|function||否|接口调用失败的回调函数|\n|complete|function||否|接口调用结束的回调函数（调用成功、失败都会执行）|\n\n**success 返回参数说明：**\n\n|属性|类型|说明|\n|---|---|---|---|\n|characteristics|Array&lt;Object&gt;|设备服务列表|\n\n**res.characteristics 的结构**\n\n|属性|类型|说明|\n|---|---|---|\n|uuid|string|蓝牙设备特征值的 uuid|\n|properties|Object|该特征值支持的操作类型|\n\n**properties 的结构**\n\n|属性|类型|说明|\n|---|---|---|\n|read|boolean|该特征值是否支持 read 操作|\n|write|boolean|该特征值是否支持 write 操作|\n|notify|boolean|该特征值是否支持 notify 操作|\n|indicate|boolean|该特征值是否支持 indicate 操作|\n\n 错误\n\n|错误码|错误信息|说明|\n|---|---|---|\n|0|ok|正常|\n|10000|not init|未初始化蓝牙适配器|\n|10001|not available|当前蓝牙适配器不可用|\n|10002|no device|没有找到指定设备|\n|10003|connection fail|连接失败|\n|10004|no service|没有找到指定服务|\n|10005|no characteristic|没有找到指定特征值|\n|10006|no connection|当前连接已断开|\n|10007|property not support|当前特征值不支持此操作|\n|10008|system error|其余所有系统上报的异常|\n|10009|system not support|Android 系统特有，系统版本低于 4.3 不支持 BLE|\n\n 示例代码\n\n```js\nuni.getBLEDeviceCharacteristics({\n  // 这里的 deviceId 需要已经通过 createBLEConnection 与对应设备建立链接\n  deviceId,\n  // 这里的 serviceId 需要在 getBLEDeviceServices 接口中获取\n  serviceId,\n  success(res) {\n    console.log('device getBLEDeviceCharacteristics:', res.characteristics)\n  }\n})\n```\n\n uni.createBLEConnection(OBJECT)\n\n连接低功耗蓝牙设备。\n\n若APP在之前已有搜索过某个蓝牙设备，并成功建立连接，可直接传入之前搜索获取的 deviceId 直接尝试连接该设备，无需进行搜索操作。\n\n**OBJECT 参数说明**\n\n|属性|类型|默认值|必填|说明|\n|---|---|---|---|---|\n|deviceId|string||是|用于区分设备的 id|\n|timeout|number||否|超时时间，单位ms，不填表示不会超时|\n|success|function||否|接口调用成功的回调函数|\n|fail|function||否|接口调用失败的回调函数|\n|complete|function||否|接口调用结束的回调函数（调用成功、失败都会执行）|\n\n 错误\n\n|错误码|错误信息|说明|\n|---|---|---|\n|0|ok|正常|\n|10000|not init|未初始化蓝牙适配器|\n|10001|not available|当前蓝牙适配器不可用|\n|10002|no device|没有找到指定设备|\n|10003|connection fail|连接失败|\n|10004|no service|没有找到指定服务|\n|10005|no characteristic|没有找到指定特征值|\n|10006|no connection|当前连接已断开|\n|10007|property not support|当前特征值不支持此操作|\n|10008|system error|其余所有系统上报的异常|\n|10009|system not support|Android 系统特有，系统版本低于 4.3 不支持 BLE|\n\n 注意\n\n*   请保证尽量成对的调用 `createBLEConnection` 和 `closeBLEConnection` 接口。安卓如果多次调用 `createBLEConnection` 创建连接，有可能导致系统持有同一设备多个连接的实例，导致调用 `closeBLEConnection` 的时候并不能真正的断开与设备的连接。\n*   蓝牙连接随时可能断开，建议监听 [`uni.onBLEConnectionStateChange`](/api/system/ble?id=onbleconnectionstatechange) 回调事件，当蓝牙设备断开时按需执行重连操作\n*   若对未连接的设备或已断开连接的设备调用数据读写操作的接口，会返回 10006 错误，建议进行重连操作。\n\n 示例代码\n\n```js\nuni.createBLEConnection({\n  // 这里的 deviceId 需要已经通过 createBLEConnection 与对应设备建立链接\n  deviceId,\n  success(res) {\n    console.log(res)\n  }\n})\n```\n\n uni.closeBLEConnection(OBJECT)\n\n断开与低功耗蓝牙设备的连接。\n\n**OBJECT 参数说明**\n\n|属性|类型|默认值|必填|说明|\n|---|---|---|---|---|\n|deviceId|string||是|用于区分设备的 id|\n|success|function||否|接口调用成功的回调函数|\n|fail|function||否|接口调用失败的回调函数|\n|complete|function||否|接口调用结束的回调函数（调用成功、失败都会执行）|\n\n 错误\n\n|错误码|错误信息|说明|\n|---|---|---|\n|0|ok|正常|\n|10000|not init|未初始化蓝牙适配器|\n|10001|not available|当前蓝牙适配器不可用|\n|10002|no device|没有找到指定设备|\n|10003|connection fail|连接失败|\n|10004|no service|没有找到指定服务|\n|10005|no characteristic|没有找到指定特征值|\n|10006|no connection|当前连接已断开|\n|10007|property not support|当前特征值不支持此操作|\n|10008|system error|其余所有系统上报的异常|\n|10009|system not support|Android 系统特有，系统版本低于 4.3 不支持 BLE|\n\n 示例代码\n\n```js\nuni.closeBLEConnection({\n  deviceId,\n  success(res) {\n    console.log(res)\n  }\n})\n```\n","p":"command\\设备 - 低功耗蓝牙.html"},{"t":"设备/iBeacon","d":"**iBeacon API 平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|√|x|√|√|x|x|x|\n\n uni.onBeaconServiceChange(CALLBACK)\n\n监听 iBeacon 服务状态变化事件\n\n**CALLBACK 返回参数**\n\n|属性|类型|说明|\n|:-|:-|:-|\n|available|boolean|服务目前是否可用|\n|discovering|boolean|目前是否处于搜索状态|\n\n uni.onBeaconUpdate(CALLBACK)\n\n监听 iBeacon 设备更新事件\n\n**CALLBACK 返回参数**\n\n|属性|类型|说明|\n|:-|:-|:-|\n|beacons|Array<[IBeaconInfo](/api/system/ibeacon?id=ibeaconinfo)>|当前搜寻到的所有 iBeacon 设备列表|\n\n uni.getBeacons(OBJECT)\n\n获取所有已搜索到的 iBeacon 设备\n\n**OBJECT 参数说明**\n\n|属性|类型|默认值|必填|说明|\n|:-|:-|:-|:-|:-|\n|success|function||否|接口调用成功的回调函数|\n|fail|function||否|接口调用失败的回调函数|\n|complete|function||否|接口调用结束的回调函数（调用成功、失败都会执行）|\n\n**success 返回参数说明：**\n\n|属性|类型|说明|\n|:-|:-|:-|\n|beacons|Array<[IBeaconInfo](/api/system/ibeacon?id=ibeaconinfo)>|iBeacon 设备列表|\n\n 错误\n\n|错误码|错误信息|说明|\n|:-|:-|:-|\n|0|ok|正常|\n|11000|unsupport|系统或设备不支持|\n|11001|bluetooth service unavailable|蓝牙服务不可用|\n|11002|location service unavailable|位置服务不可用|\n|11003|already start|已经开始搜索|\n\n uni.startBeaconDiscovery(OBJECT)\n\n开始搜索附近的 iBeacon 设备\n\n**OBJECT 参数说明**\n\n|属性|类型|默认值|必填|说明|\n|:-|:-|:-|:-|:-|\n|uuids|Array＜String＞||是|iBeacon 设备广播的 uuid 列表|\n|ignoreBluetoothAvailable|boolean|false|否|是否校验蓝牙开关，仅在 iOS 下有效|\n|success|function||否|接口调用成功的回调函数|\n|fail|function||否|接口调用失败的回调函数|\n|complete|function||否|接口调用结束的回调函数（调用成功、失败都会执行）|\n\n 错误\n\n|错误码|错误信息|说明|\n|:-|:-|:-|\n|0|ok|正常|\n|11000|unsupport|系统或设备不支持|\n|11001|bluetooth service unavailable|蓝牙服务不可用|\n|11002|location service unavailable|位置服务不可用|\n|11003|already start|已经开始搜索|\n\n 示例代码\n\n```js\nuni.startBeaconDiscovery({\n  success(res) { }\n})\n```\n\n uni.stopBeaconDiscovery(OBJECT)\n\n停止搜索附近的 iBeacon 设备\n\n**OBJECT 参数说明**\n\n|属性|类型|默认值|必填|说明|\n|:-|:-|:-|:-|:-|\n|success|function||否|接口调用成功的回调函数|\n|fail|function||否|接口调用失败的回调函数|\n|complete|function||否|接口调用结束的回调函数（调用成功、失败都会执行）|\n\n 错误\n\n|错误码|错误信息|说明|\n|:-|:-|:-|\n|0|ok|正常|\n|11000|unsupport|系统或设备不支持|\n|11001|bluetooth service unavailable|蓝牙服务不可用|\n|11002|location service unavailable|位置服务不可用|\n|11003|already start|已经开始搜索|\n\n IBeaconInfo\n\n|属性|类型|说明|\n|:-|:-|:-|\n|uuid|string|iBeacon 设备广播的 uuid|\n|major|string|iBeacon 设备的主 id|\n|minor|string|iBeacon 设备的次 id|\n|proximity|number|表示设备距离的枚举值|\n|accuracy|number|iBeacon 设备的距离|\n|rssi|number|表示设备的信号强度|\n\n\n 注意事项\n\n* 未启用定位将影响 iBeacon 的正常使用。（相关反馈：[2027](https://github.com/dcloudio/uni-app/issues/2027)）","p":"command\\设备 - iBeacon.html"},{"t":"设备/Wi - Fi","d":" Wi-Fi\n\n仅微信小程序平台、App平台、字节跳动小程序支持，各平台开发方式暂未统一，使用时需注意用[条件编译](https://uniapp.dcloud.io/platform)调用不同平台的代码。\n\n微信小程序平台实现参考：[规范详情](https://developers.weixin.qq.com/miniprogram/dev/api/wx.startWifi.html)\n\n字节跳动小程序的wifi API参考：[规范详情](https://developer.toutiao.com/dev/cn/mini-app/develop/api/device/wi-fi/getconnectedwifi)\n\nApp 平台实现参考\n\n**安卓：**\n- [获取WIFI列表](https://ask.dcloud.net.cn/question/12113)\n\n**ios：**\n- [打开ios的WIFI设置页面](https://ask.dcloud.net.cn/question/7797)\n","p":"command\\设备 - Wi - Fi.html"},{"t":"设备/电量","d":" 电量\n\n电量API暂未统一，需分平台条件编译编写。\n\n- 微信小程序平台：[规范详情](https://developers.weixin.qq.com/miniprogram/dev/api/wx.getBatteryInfoSync.html)\n- 百度小程序平台：[规范详情](https://smartprogram.baidu.com/docs/develop/api/device_battery/swan-getBatteryInfo/)\n- 支付宝小程序平台：[规范详情](https://docs.alipay.com/mini/api/nrnziy)\n- QQ小程序平台：[规范详情](https://q.qq.com/wiki/develop/miniprogram/API/equipment/ibeacon_battery.html)\n- App平台：使用 Native.js，[参考](https://ask.dcloud.net.cn/article/992)\n- H5平台：使用 navigator.battery API\n","p":"command\\设备 - 电量.html"},{"t":"设备/NFC","d":" NFC\n\n仅微信小程序平台、App平台支持，各平台开发方式暂未统一，使用时需注意用[条件编译](https://uniapp.dcloud.io/platform)调用不同平台的代码。\n\n- 微信小程序平台实现参考：[规范详情](https://developers.weixin.qq.com/miniprogram/dev/api/wx.startHCE.html)\n\n- App 平台：\n  1. 通过Native.js实现，**安卓：**[NFC数据读取](https://ask.dcloud.net.cn/question/6726)\n  2. 使用原生插件，详见[插件市场](https://ext.dcloud.net.cn/search?q=nfc)\n","p":"command\\设备 - NFC.html"},{"t":"设备/设备方向","d":" 监听设备方向变化\n\n仅微信小程序平台支持，[规范详情](https://developers.weixin.qq.com/miniprogram/dev/api/device/motion/wx.startDeviceMotionListening.html)\n\n在App平台，也可以通过监听窗体大小变化onResize来实现此类需求。[详见](https://uniapp.dcloud.io/collocation/frame/lifecycle?id=%e9%a1%b5%e9%9d%a2%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f)\n","p":"command\\设备 - 设备方向.html"},{"t":"设备/生物认证","d":" 生物认证说明\n\n生物认证，又称活体检测。它包含指纹识别、人脸识别这两部分。即通过人体身体特征来进行身份认证识别。\n\n uni.startSoterAuthentication(OBJECT)\n\n开始 SOTER 生物认证。\n\n**平台差异说明**\n\n|App|H5\t|微信小程序\t|支付宝小程序\t|百度小程序\t|字节跳动小程序\t|QQ小程序\t|\n|:-\t|:-\t|:-\t\t\t\t\t|:-\t\t\t\t\t\t|:-\t\t\t\t\t|:-\t\t\t\t\t|:-\t\t\t\t|\n|√（2.3.8+）\t|x\t|√\t\t\t\t\t|x\t\t\t\t\t\t|x\t\t\t\t\t|x\t\t\t\t\t|x\t\t\t\t|\n\nApp端在2.3.8版以前，可在插件市场获取[指纹相关插件](https://ext.dcloud.net.cn/plugin?id=358)。\n\n**OBJECT参数说明**\n\n|属性\t\t\t\t\t\t\t|类型\t\t\t|默认值\t|必填\t|说明\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t| 平台差异说明\t|\n|:-\t\t\t\t\t\t\t\t|:-\t\t\t\t|:-\t\t\t|:-\t\t|:-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|:-\t\t\t\t\t\t\t|\n|requestAuthModes\t|Array\t\t|\t\t\t\t|是\t\t|请求使用的可接受的生物认证方式\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|APP、微信小程序|\n|challenge\t\t\t\t|String\t\t|\t\t\t\t|是\t\t|挑战因子。挑战因子为调用者为此次生物鉴权准备的用于签名的字符串关键识别信息，将作为 resultJSON 的一部分，供调用者识别本次请求。例如：如果场景为请求用户对某订单进行授权确认，则可以将订单号填入此参数。\t|微信小程序\t\t\t|\n|authContent\t\t\t|String\t\t|''\t\t\t|否\t\t|验证描述，即识别过程中显示在界面上的对话框提示内容\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|APP、微信小程序|\n|success\t\t\t\t\t|Function\t|\t\t\t\t|否\t\t|接口调用成功的回调函数\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\t\t\t\t\t\t\t\t|\n|fail\t\t\t\t\t\t\t|Function\t|\t\t\t\t|否\t\t|接口调用失败的回调函数\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\t\t\t\t\t\t\t\t|\n|complete\t\t\t\t\t|Function\t|\t\t\t\t|否\t\t|接口调用结束的回调函数（调用成功、失败都会执行）\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\t\t\t\t\t\t\t\t|\n\n**OBJECT.requestAuthModes说明**\n\n|值\t\t\t\t\t|说明\t\t\t|\n|:-\t\t\t\t\t|:-\t\t\t\t|\n|fingerPrint|指纹识别\t|\n|facial\t\t\t|人脸识别\t|\n\n注意：\n- App端指纹识别，Android平台从Android6.0起才提供了官方API，uni-app也是从Android6起支持。对于更低版本的安卓，某些rom私有的指纹识别API，uni-app并不支持。\n- App端人脸识别，iOS平台使用自带的faceID，而Android平台需要依赖三方SDK方可实现，可在插件市场搜索[人脸识别](https://ext.dcloud.net.cn/search?q=%E4%BA%BA%E8%84%B8%E8%AF%86%E5%88%AB)插件\n\n\n**OBJECT.success返回值说明**\n\n|属性\t\t\t\t\t\t\t\t|类型\t\t|说明\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|平台差异说明\t\t|\n|:-\t\t\t\t\t\t\t\t\t|:-\t\t\t|:-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|:-\t\t\t\t\t\t\t|\n|authMode\t\t\t\t\t\t|string\t|生物认证方式\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|APP、微信小程序|\n|resultJSON\t\t\t\t\t|string\t|在设备安全区域（TEE）内获得的本机安全信息（如TEE名称版本号等以及防重放参数）以及本次认证信息（仅Android支持，本次认证的指纹ID）。具体说明见下文\t\t\t\t\t\t\t|微信小程序\t\t\t|\n|resultJSONSignature|string\t|用SOTER安全密钥对 resultJSON 的签名(SHA256 with RSA/PSS, saltlen=20)\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|微信小程序\t\t\t|\n|errCode\t\t\t\t\t\t|number\t|错误码\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\t\t\t\t\t\t\t\t|\n|errMsg\t\t\t\t\t\t\t|string\t|错误信息\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\t\t\t\t\t\t\t\t|\n\n**resultJSON说明**\n\n此数据为设备TEE中，将传入的challenge和TEE内其他安全信息组成的数据进行组装而来的JSON，对下述字段的解释如下表。例子如下：\n\n|字段名\t|说明\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|:-\t\t\t|:-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|raw\t\t|调用者传入的challenge\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|fid\t\t|（仅Android支持）本次生物识别认证的生物信息编号（如指纹识别则是指纹信息在本设备内部编号）|\n|counter|防重放特征参数\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|tee_n\t|TEE名称（如高通或者trustonic等）\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|tee_v\t|TEE版本号\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|fp_n\t\t|指纹以及相关逻辑模块提供商（如FPC等）\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|fp_v\t\t|指纹以及相关模块版本号\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|cpu_id\t|机器唯一识别ID\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|uid\t\t|概念同Android系统定义uid，即应用程序编号\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n\n**错误码说明**\n\n|错误码\t|错误码说明\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|:-\t\t\t|:-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|0\t\t\t|识别成功\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|90001\t|本设备不支持生物认证\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|90002\t|用户未授权使用该生物认证接口\t\t\t\t\t\t\t\t\t\t\t|\n|90003\t|请求使用的生物认证方式不支持\t\t\t\t\t\t\t\t\t\t\t|\n|90004\t|未传入challenge或challenge长度过长（最长512字符）|\n|90005\t|auth_content长度超过限制（最长42个字符）\t\t\t\t\t|\n|90007\t|内部错误\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|90008\t|用户取消授权\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|90009\t|识别失败\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|90010\t|重试次数过多被冻结\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|90011\t|用户未录入所选识别方式\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n\n uni.checkIsSupportSoterAuthentication(OBJECT)\n\n获取本机支持的 SOTER 生物认证方式\n\n**OBJECT参数说明**\n\n|属性\t\t\t|类型\t\t\t|默认值\t|必填\t|说明\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|:-\t\t\t\t|:-\t\t\t\t|:-\t\t\t|:-\t\t|:-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|success\t|function\t|\t\t\t\t|否\t\t|接口调用成功的回调函数\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|fail\t\t\t|function\t|\t\t\t\t|否\t\t|接口调用失败的回调函数\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|complete\t|function\t|\t\t\t\t|否\t\t|接口调用结束的回调函数（调用成功、失败都会执行）\t|\n\n**OBJECT.success返回值说明**\n\n|属性\t\t\t\t|类型\t|说明\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|:-\t\t\t\t\t|:-\t\t|:-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|supportMode|Array|该设备支持的可被SOTER识别的生物识别方式|\n\n uni.checkIsSoterEnrolledInDevice(OBJECT)\n\n获取设备内是否录入如指纹等生物信息的接口\n\n**OBJECT参数说明**\n\n|属性\t\t\t\t\t|类型\t\t\t|默认值\t|必填\t|说明\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|:-:\t\t\t\t\t|:-:\t\t\t|:-:\t\t|:-:\t|:-:\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|checkAuthMode|string\t\t|\t\t\t\t|是\t\t|认证方式\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|success\t\t\t|function\t|\t\t\t\t|否\t\t|接口调用成功的回调函数\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|fail\t\t\t\t\t|function\t|\t\t\t\t|否\t\t|接口调用失败的回调函数\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|complete\t\t\t|function\t|\t\t\t\t|否\t\t|接口调用结束的回调函数（调用成功、失败都会执行）\t|\n\n**OBJECT.checkAuthMode合法值**\n\n|值\t\t\t\t\t|说明\t\t\t|\n|:-\t\t\t\t\t|:-\t\t\t\t|\n|fingerPrint|指纹识别\t|\n|facial\t\t\t|人脸识别\t|\n\n**OBJECT.success返回值说明**\n\n|属性\t\t\t\t|类型\t\t|说明\t\t\t\t\t\t|\n|:-\t\t\t\t\t|:-\t\t\t|:-\t\t\t\t\t\t\t|\n|isEnrolled\t|boolean|是否已录入信息\t|\n|errMsg\t\t\t|string\t|错误信息\t\t\t\t|\n\n 代码示例\n\n```html\n\n<template>\n\t<view class=\"content\">\n\t\t<button type=\"primary\" @click=\"checkIsSupportSoterAuthentication\">检查支持的认证方式</button>\n\t\t<button type=\"primary\" @click=\"checkIsSoterEnrolledInDeviceFingerPrint\">检查是否录入指纹</button>\n\t\t<button type=\"primary\" @click=\"checkIsSoterEnrolledInDeviceFaceID\">检查是否录入FaceID</button>\n\t\t<button type=\"primary\" @click=\"startSoterAuthenticationFingerPrint\">开始指纹认证</button>\n\t\t<button type=\"primary\" @click=\"startSoterAuthenticationFaceID\">开始FaceID认证</button>\n\t</view>\n</template>\n\n<script>\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t}\n\t\t},\n\t\tonLoad() {\n\n\t\t},\n\t\tmethods: {\n\t\t\tcheckIsSupportSoterAuthentication() {\n\t\t\t\tuni.checkIsSupportSoterAuthentication({\n\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t},\n\t\t\t\t\tfail(err) {\n\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t},\n\t\t\t\t\tcomplete(res) {\n\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tcheckIsSoterEnrolledInDeviceFingerPrint() {\n\t\t\t\tuni.checkIsSoterEnrolledInDevice({\n\t\t\t\t\tcheckAuthMode: 'fingerPrint',\n\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t},\n\t\t\t\t\tfail(err) {\n\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t},\n\t\t\t\t\tcomplete(res) {\n\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tcheckIsSoterEnrolledInDeviceFaceID() {\n\t\t\t\tuni.checkIsSoterEnrolledInDevice({\n\t\t\t\t\tcheckAuthMode: 'facial',\n\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t},\n\t\t\t\t\tfail(err) {\n\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t},\n\t\t\t\t\tcomplete(res) {\n\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tstartSoterAuthenticationFingerPrint() {\n\t\t\t\tuni.startSoterAuthentication({\n\t\t\t\t\trequestAuthModes: ['fingerPrint'],\n\t\t\t\t\tchallenge: '123456',\n\t\t\t\t\tauthContent: '请用指纹解锁',\n\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t},\n\t\t\t\t\tfail(err) {\n\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t},\n\t\t\t\t\tcomplete(res) {\n\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tstartSoterAuthenticationFaceID() {\n\t\t\t\tuni.startSoterAuthentication({\n\t\t\t\t\trequestAuthModes: ['facial'],\n\t\t\t\t\tchallenge: '123456',\n\t\t\t\t\tauthContent: '请用FaceID解锁',\n\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t},\n\t\t\t\t\tfail(err) {\n\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t},\n\t\t\t\t\tcomplete(res) {\n\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\tbutton {\n\t\twidth: 200px;\n\t\tmargin: 20px auto;\n\t}\n</style>\n\n\n```\n\n 注意事项\n\n- App端自2.3.8版本起开始支持生物认证，更低版本或想使用指纹功能，可在插件市场获取[插件](https://ext.dcloud.net.cn/plugin?id=358)\n- App端的人脸识别，仅支持iOS端的faceID。Android端需要依赖三方SDK方可实现，可在插件市场搜索[人脸识别](https://ext.dcloud.net.cn/search?q=%E4%BA%BA%E8%84%B8%E8%AF%86%E5%88%AB)插件\n- App端打包时，注意需要在manifest的模块中选择指纹和faceID，否则打包后无法运行相关功能。\n- hello uni-app已经集成相关示例，最新版HBuilderX新建新版hello uni-app示例项目真机运行可见，在API-设备-生物认证里。\n- 微信小程序如果使用腾讯云的SDK，可参考[网友分享](https://segmentfault.com/a/1190000020102601)\n- 支付宝小程序只支持人脸识别，[规范详情](https://docs.alipay.com/mini/api/facecapture)\n- 百度小程序只支持人脸识别，[规范详情](https://smartprogram.baidu.com/docs/develop/api/ai_face/swan-ai-faceDetect/)\n","p":"command\\设备 - 生物认证.html"},{"t":"键盘/Keyboard","d":" uni.hideKeyboard()\r\n\r\n隐藏软键盘\r\n\r\n隐藏已经显示的软键盘，如果软键盘没有显示则不做任何操作。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|√|√|√|x|√|√|\r\n\r\n\r\n uni.onKeyboardHeightChange(CALLBACK)\r\n\r\n监听键盘高度变化\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|HBuilderX 2.2.3+|x|基础库2.7+|x|x|x|√|\r\n\r\n**CALLBACK 返回参数**\r\n\r\n|参数|类型|说明|\r\n|:-|:-|:-|\r\n|height|Number|键盘高度|\r\n\r\n**示例代码**\r\n\r\n```js\r\nuni.onKeyboardHeightChange(res => {\r\n  console.log(res.height)\r\n})\r\n```\r\n\r\n uni.offKeyboardHeightChange(CALLBACK)\r\n\r\n取消监听键盘高度变化事件\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|HBuilderX 3.1.0+|x|基础库2.9.2+|x|x|x|x|\r\n\r\n**示例代码**\r\n\r\n```js\r\nuni.offKeyboardHeightChange(callback)\r\n```\r\n\r\n uni.getSelectedTextRange(OBJECT)\r\n\r\n在input、textarea等focus之后，获取输入框的光标位置。注意：只有在focus的时候调用此接口才有效。目前仅支持 vue 页面，nvue 可以直接使用 weex 的 [getSelectionRange](https://weex.apache.org/zh/docs/components/input.htmlgetSelectionRange)。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|HBuilderX 2.8.12+|HBuilderX 2.8.12+|基础库 2.7.0+|x|x|x|x|\r\n\r\n**OBJECT 参数说明：**\r\n\r\n| 参数名 | 类型 | 默认值 | 必填 | 说明 |\r\n| --- | --- | --- | --- | --- |\r\n| success | Function |  | 否 | 接口调用成功的回调函数 |\r\n| fail | Function |  | 否 | 接口调用失败的回调函数 |\r\n| complete | Function |  | 否 | 接口调用结束的回调函数（调用成功、失败都会执行） |\r\n\r\n**success 返回参数说明：**\r\n\r\n| 属性 | 类型 | 说明 |\r\n| --- | --- | --- |\r\n| start | Number | 输入框光标起始位置 |\r\n| end | Number | 输入框光标结束位置 |\r\n\r\n**示例代码**\r\n\r\n```js\r\nuni.getSelectedTextRange({\r\n  success: res => {\r\n    console.log('getSelectedTextRange res', res.start, res.end)\r\n  }\r\n})\r\n```\r\n","p":"command\\键盘 - Keyboard.html"},{"t":"界面/设置TabBar","d":" uni.setTabBarItem(OBJECT)\r\n\r\n动态设置 tabBar 某一项的内容\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|√|√|√（钉钉小程序不支持）|√|x|√|\r\n\r\n**OBJECT参数说明：**\r\n\r\n|属性|类型|默认值|必填|说明|平台差异|\r\n|:-|:-|:-|:-|:-|:-|\r\n|index|number||是|tabBar 的哪一项，从左边算起||\r\n|text|String||否|tab 上的按钮文字||\r\n|iconPath|String||否|图片路径，icon 大小限制为 40kb，建议尺寸为 81px * 81px，当 position 为 top 时，此参数无效，不支持网络图片||\r\n|selectedIconPath|String||否|选中时的图片路径，icon 大小限制为 40kb，建议尺寸为 81px * 81px ，当 position 为 top 时，此参数无效||\r\n|pagePath|String||否|页面绝对路径，必须在 [pages](/collocation/pages?id=pages) 中先定义，被替换掉的 pagePath 不会变成普通页面（仍然需要使用 uni.swichTab 跳转）|App（2.8.4+）、H5（2.8.4+）|\r\n|success|Funtion||否|接口调用成功的回调函数||\r\n|fail|Funtion||否|接口调用失败的回调函数||\r\n|complete|Funtion||否|接口调用结束的回调函数（调用成功、失败都会执行）||\r\n\r\n**示例代码**\r\n\r\n```js\r\nuni.setTabBarItem({\r\n  index: 0,\r\n  text: 'text',\r\n  iconPath: '/path/to/iconPath',\r\n  selectedIconPath: '/path/to/selectedIconPath'\r\n})\r\n```\r\n\r\n uni.setTabBarStyle(OBJECT)\r\n\r\n动态设置 tabBar 的整体样式\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|√|√|√|√|x|√|\r\n\r\n**OBJECT参数说明：**\r\n\r\n|属性|类型|默认值|必填|说明|\r\n|:-|:-|:-|:-|:-|\r\n|color|String||否|tab 上的文字默认颜色，HexColor|\r\n|selectedColor|String||否|tab 上的文字选中时的颜色，HexColor|\r\n|backgroundColor|String||否|tab 的背景色，HexColor|\r\n|backgroundImage|String||否|图片背景。支持设置本地图片或创建线性渐变如，优先级高于 backgroundColor，仅 App 2.7.1+ 支持|\r\n|backgroundRepeat|String||否|背景图平铺方式。repeat：背景图片在垂直方向和水平方向平铺；repeat-x：背景图片在水平方向平铺，垂直方向拉伸；repeat-y：背景图片在垂直方向平铺，水平方向拉伸；no-repeat：背景图片在垂直方向和水平方向都拉伸。 默认使用 no-repeat。仅 App 2.7.1+ 支持|\r\n|borderStyle|String||否|tabBar上边框的颜色， 仅支持 black/white|\r\n|success|Funtion||否|接口调用成功的回调函数|\r\n|fail|Funtion||否|接口调用失败的回调函数|\r\n|complete|Funtion||否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**backgroundImage创建线性渐变说明**\r\n\r\n`backgroundImage: linear-gradient(to top, a80077, 66ff00);`\r\n\r\n目前暂不支持 radial-gradient（径向渐变）。\r\n\r\n目前只支持两种颜色的渐变，渐变方向如下：\r\n\r\n- to right：从左向右渐变\r\n- to left：从右向左渐变\r\n- to bottom：从上到下渐变\r\n- to top：从下到上渐变\r\n- to bottom right：从左上角到右下角\r\n- to top left：从右下角到左上角\r\n\r\n**示例代码**\r\n\r\n```js\r\nuni.setTabBarStyle({\r\n  color: 'FF0000',\r\n  selectedColor: '00FF00',\r\n  backgroundColor: '0000FF',\r\n  borderStyle: 'white'\r\n})\r\n```\r\n\r\n uni.hideTabBar(OBJECT)\r\n\r\n隐藏 tabBar\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|√|√|√|√|x|√|\r\n\r\n**OBJECT参数说明：**\r\n\r\n|属性|类型|默认值|必填|说明|\r\n|:-|:-|:-|:-|:-|\r\n|animation|boolean|false|否|是否需要动画效果，仅微信小程序和百度小程序支持|\r\n|success|Funtion||否|接口调用成功的回调函数|\r\n|fail|Funtion||否|接口调用失败的回调函数|\r\n|complete|Funtion||否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n uni.showTabBar(OBJECT)\r\n\r\n显示 tabBar\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|√|√|√|√|x|√|\r\n\r\n**OBJECT参数说明：**\r\n\r\n|属性|类型|默认值|必填|说明|\r\n|:-|:-|:-|:-|:-|\r\n|animation|boolean|false|否|是否需要动画效果，仅微信小程序和百度小程序支持|\r\n|success|Funtion||否|接口调用成功的回调函数|\r\n|fail|Funtion||否|接口调用失败的回调函数|\r\n|complete|Funtion||否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n uni.setTabBarBadge(OBJECT)\r\n为 tabBar 某一项的右上角添加文本。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|√|√|√|√|x|√|\r\n\r\n**OBJECT参数说明：**\r\n\r\n|参数|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|index|Number|是|tabBar的哪一项，从左边算起|\r\n|text|String|是|显示的文本，不超过 3 个半角字符|\r\n|success|Function|否|接口调用成功的回调函数|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nuni.setTabBarBadge({\r\n  index: 0,\r\n  text: '1'\r\n})\r\n```\r\n\r\n uni.removeTabBarBadge(OBJECT)\r\n移除 tabBar 某一项右上角的文本。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|√|√|√|√|x|√|\r\n\r\n**OBJECT参数说明：**\r\n\r\n|参数|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|index|Number|是|tabBar的哪一项，从左边算起|\r\n|success|Function|否|接口调用成功的回调函数|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n uni.showTabBarRedDot(OBJECT)\r\n显示 tabBar 某一项的右上角的红点。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|√|√|√|√|x|√|\r\n\r\n**OBJECT参数说明：**\r\n\r\n|参数|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|index|Number|是|tabBar的哪一项，从左边算起|\r\n|success|Function|否|接口调用成功的回调函数|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n uni.hideTabBarRedDot(OBJECT)\r\n隐藏 tabBar 某一项的右上角的红点。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|√|√|√|√|x|√|\r\n\r\n**OBJECT参数说明：**\r\n\r\n|参数|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|index|Number|是|tabBar的哪一项，从左边算起|\r\n|success|Function|否|接口调用成功的回调函数|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n uni.onTabBarMidButtonTap(CALLBACK)\r\n监听中间按钮的点击事件\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√（HBuilderX 2.3.4+）|x|x|x|x|x|x|\r\n\r\n\r\n**Tip**\r\n- tabbar是原生的，层级高于前端元素\r\n- [uni-app插件市场](https://ext.dcloud.net.cn/search?q=%E5%BA%95%E9%83%A8%E5%9B%BE%E6%A0%87%E8%8F%9C%E5%8D%95)有封装的前端tabbar，但性能不如原生tabbar\r\n- 如果想要一个中间带+号的tabbar，在HBuilderX中新建uni-app项目、选择 底部选项卡 模板\r\n- 以上大部分操作 tabbar 的 API 需要在 tabbar 渲染后才能使用，避免在 tabbar 未初始化前使用\r\n","p":"command\\界面 - 设置TabBar.html"},{"t":"界面/背景","d":" uni.setBackgroundColor(OBJECT)\r\n\r\n动态设置窗口的背景色。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|x|x|√|x|√|x|√|\r\n\r\n**参数说明**\r\n\r\n|属性|类型|默认值|必填|说明|\r\n|:-|:-|:-|:-|:-|\r\n|backgroundColor|String||否|窗口的背景色，必须为十六进制颜色值|\r\n|backgroundColorTop|String||否|顶部窗口的背景色，必须为十六进制颜色值，仅 iOS 支持|\r\n|backgroundColorBottom|String||否|底部窗口的背景色，必须为十六进制颜色值，仅 iOS 支持|\r\n|success|Function||否|接口调用成功的回调函数|\r\n|fail|Function||否|接口调用失败的回调函数|\r\n|complete|Function||否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**代码示例**\r\n\r\n```javascript\r\nuni.setBackgroundColor({\r\n    backgroundColor: 'ffffff',\r\n    backgroundColorTop: '222222',\r\n    backgroundColorBottom: '333333'\r\n});\r\n```\r\n\r\n uni.setBackgroundTextStyle(OBJECT)\r\n\r\n动态设置下拉背景字体、loading 图的样式。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|x|x|√|x|√|x|√|\r\n\r\n**参数说明**\r\n\r\n|属性|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|textStyle|String|是|下拉背景字体、loading 图的样式，值为：dark、light|\r\n|success|Function|否|接口调用成功的回调函数|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**代码示例**\r\n\r\n```javascript\r\nuni.setBackgroundTextStyle({\r\n  textStyle: 'dark' // 下拉背景字体、loading 图的样式为dark\r\n})\r\n```\r\n","p":"command\\界面 - 背景.html"},{"t":"界面/动画","d":" uni.createAnimation(OBJECT)\r\n\r\n创建一个动画实例 [animation](animation)。调用实例的方法来描述动画。最后通过动画实例的export方法导出动画数据传递给组件的animation属性。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|HBuilderX 2.0.4+|√|√|√|√|√|\r\n\r\n**注意:**\r\n- export 方法每次调用后会清掉之前的动画操作\r\n- nvue 暂不支持\r\n\r\n**OBJECT参数说明：**\r\n\r\n|参数|类型|必填|默认值|说明|\r\n|---|---|---|---|---|\r\n|duration|Integer|否|400|动画持续时间，单位ms|\r\n|timingFunction|String|否|\"linear\"|定义动画的效果|\r\n|delay|Integer|否|0|动画延迟时间，单位 ms|\r\n|transformOrigin|String|否|\"50% 50% 0\"|设置transform-origin||\r\n\r\n**timingFunction 有效值：**\r\n\r\n|值|说明|\r\n|----|----|\r\n|linear|动画从头到尾的速度是相同的|\r\n|ease|动画以低速开始，然后加快，在结束前变慢|\r\n|ease-in|动画以低速开始|\r\n|ease-in-out|动画以低速开始和结束|\r\n|ease-out|动画以低速结束|\r\n|step-start|动画第一帧就跳至结束状态直到结束|\r\n|step-end|动画一直保持开始状态，最后一帧跳到结束状态|\r\n\r\n```javascript\r\nvar animation = uni.createAnimation({\r\n  transformOrigin: \"50% 50%\",\r\n  duration: 1000,\r\n  timingFunction: \"ease\",\r\n  delay: 0\r\n})\r\n```\r\n\r\n\r\n**animation**\r\n\r\n动画实例可以调用以下方法来描述动画，调用结束后会返回自身，支持链式调用的写法。\r\n\r\n**animation 对象的方法列表：**\r\n\r\n样式：\r\n\r\n|方法|参数|说明|\r\n|---|---|---|\r\n|opacity|value|透明度，参数范围 0~1|\r\n|backgroundColor|color|颜色值|\r\n|width|length|长度值，如果传入 Number 则默认使用 px，可传入其他自定义单位的长度值|\r\n|height|length|长度值，如果传入 Number 则默认使用 px，可传入其他自定义单位的长度值|\r\n|top|length|长度值，如果传入 Number 则默认使用 px，可传入其他自定义单位的长度值|\r\n|left|length|长度值，如果传入 Number 则默认使用 px，可传入其他自定义单位的长度值|\r\n|bottom|length|长度值，如果传入 Number 则默认使用 px，可传入其他自定义单位的长度值|\r\n|right|length|长度值，如果传入 Number 则默认使用 px，可传入其他自定义单位的长度值|\r\n\r\n\r\n旋转：\r\n\r\n|方法|参数|说明|\r\n|---|---|---|\r\n|rotate|deg|deg的范围-180~180，从原点顺时针旋转一个deg角度|\r\n|rotateX|deg|deg的范围-180~180，在X轴旋转一个deg角度|\r\n|rotateY|deg|deg的范围-180~180，在Y轴旋转一个deg角度|\r\n|rotateZ|deg|deg的范围-180~180，在Z轴旋转一个deg角度|\r\n|rotate3d|(x,y,z,deg)|同[transform-function rotate3d](https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/rotate3d)|\r\n\r\n缩放：\r\n\r\n|方法|参数|说明|\r\n|---|---|---|\r\n|scale|sx,[sy]|一个参数时，表示在X轴、Y轴同时缩放sx倍数；两个参数时表示在X轴缩放sx倍数，在Y轴缩放sy倍数|\r\n|scaleX|sx|在X轴缩放sx倍数|\r\n|scaleY|sy|在Y轴缩放sy倍数|\r\n|scaleZ|sz|在Z轴缩放sy倍数|\r\n|scale3d|(sx,sy,sz)|在X轴缩放sx倍数，在Y轴缩放sy倍数，在Z轴缩放sz倍数|\r\n\r\n偏移：\r\n\r\n|方法|参数|说明|\r\n|---|---|---|\r\n|translate|tx,[ty]|一个参数时，表示在X轴偏移tx，单位px；两个参数时，表示在X轴偏移tx，在Y轴偏移ty，单位px。|\r\n|translateX|tx|在X轴偏移tx，单位px|\r\n|translateY|ty|在Y轴偏移tx，单位px|\r\n|translateZ|tz|在Z轴偏移tx，单位px|\r\n|translate3d|(tx,ty,tz)|在X轴偏移tx，在Y轴偏移ty，在Z轴偏移tz，单位px|\r\n\r\n倾斜：\r\n\r\n|方法|参数|说明|\r\n|---|---|---|\r\n|skew|ax,[ay]|参数范围-180~180；一个参数时，Y轴坐标不变，X轴坐标延顺时针倾斜ax度；两个参数时，分别在X轴倾斜ax度，在Y轴倾斜ay度|\r\n|skewX|ax|参数范围-180~180；Y轴坐标不变，X轴坐标延顺时针倾斜ax度|\r\n|skewY|ay|参数范围-180~180；X轴坐标不变，Y轴坐标延顺时针倾斜ay度|\r\n\r\n矩阵变形：\r\n\r\n|方法|参数|说明|\r\n|---|---|---|\r\n|matrix|(a,b,c,d,tx,ty)|同\t[transform-function matrix](https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/matrix)|\r\n|matrix3d||同[transform-function matrix3d](https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/matrix3d)|\r\n\r\n**动画队列**\r\n\r\n调用动画操作方法后要调用 ```step()``` 来表示一组动画完成，可以在一组动画中调用任意多个动画方法，一组动画中的所有动画会同时开始，一组动画完成后才会进行下一组动画。```step``` 可以传入一个跟 ```uni.createAnimation()``` 一样的配置参数用于指定当前组动画的配置。\r\n\r\n**示例代码**\r\n\r\n```html\r\n<view :animation=\"animationData\" style=\"background:red;height:100rpx;width:100rpx\"></view>\r\n```\r\n\r\n```javascript\r\nexport default{\r\n  data() {\r\n    return {\r\n      animationData: {}\r\n    }\r\n  },\r\n  onShow: function(){\r\n    var animation = uni.createAnimation({\r\n      duration: 1000,\r\n        timingFunction: 'ease',\r\n    })\r\n\r\n    this.animation = animation\r\n\r\n    animation.scale(2,2).rotate(45).step()\r\n\r\n    this.animationData = animation.export()\r\n\r\n    setTimeout(function() {\r\n      animation.translate(30).step()\r\n      this.animationData = animation.export()\r\n    }.bind(this), 1000)\r\n  },\r\n  methods:{\r\n    rotateAndScale: function () {\r\n      // 旋转同时放大\r\n      this.animation.rotate(45).scale(2, 2).step()\r\n      this.animationData = this.animation.export()\r\n    },\r\n    rotateThenScale: function () {\r\n      // 先旋转后放大\r\n      this.animation.rotate(45).step()\r\n      this.animation.scale(2, 2).step()\r\n      this.animationData = this.animation.export()\r\n    },\r\n    rotateAndScaleThenTranslate: function () {\r\n      // 先旋转同时放大，然后平移\r\n      this.animation.rotate(45).scale(2, 2).step()\r\n      this.animation.translate(100, 100).step({ duration: 1000 })\r\n      this.animationData = this.animation.export()\r\n    }\r\n  }\r\n}\r\n```","p":"command\\界面 - 动画.html"},{"t":"界面/滚动","d":" uni.pageScrollTo(OBJECT)\r\n\r\n将页面滚动到目标位置。\r\n\r\n\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|华为快应用|360小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√(nvue不支持)|√|√|√|√|√|√|√|√|\r\n\r\n\r\n\r\n\r\n\r\n**OBJECT参数说明**\r\n\r\n|参数名\t\t|类型\t\t\t|必填\t|说明\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|:-\t\t\t\t|:-\t\t\t\t|:-\t\t|:-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|scrollTop|Number\t\t|否\t\t|滚动到页面的目标位置（单位px）\t\t\t\t\t\t\t\t\t\t|\r\n|selector\t|String\t\t|否\t\t|选择器，微信小程序2.7.3+ 、支付宝小程序1.20.0+支持\t\t|\r\n|duration\t|Number\t\t|否\t\t|滚动动画的时长，默认300ms，单位 ms\t\t\t\t\t\t\t\t|\r\n|success\t|function\t|否\t\t|接口调用成功的回调函数\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|fail\t\t\t|function\t|否\t\t|接口调用失败的回调函数\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|complete\t|function\t|否\t\t|接口调用结束的回调函数（调用成功、失败都会执行）\t|\r\n\r\n**selector 语法**\r\nselector类似于 CSS 的选择器，但仅支持下列语法。\r\n\r\n- ID选择器：the-id\r\n- class选择器（可以连续指定多个）：`.a-class.another-class`\r\n- 子元素选择器：`.the-parent > .the-child`\r\n- 后代选择器：`.the-ancestor .the-descendant`\r\n- 跨自定义组件的后代选择器：`.the-ancestor >>> .the-descendant`\r\n- 多选择器的并集：`a-node, .some-other-nodes`\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.pageScrollTo({\r\n\tscrollTop: 0,\r\n\tduration: 300\r\n});\r\n```\r\n\r\n","p":"command\\界面 - 滚动.html"},{"t":"界面/窗口","d":" 窗口样式相关的 API\n\n获取对应窗口的样式，返回一个 css 属性值对象;\n设置对应窗口的样式，传入一个 css 属性值对象\n\n uni.getTopWindowStyle()\n\n获取 topWindow 的样式\n\n> 3.1.0 新增\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|x|√|x|x|x|x|x|\n\n**代码示例**\n\n```javascript\nuni.getTopWindowStyle()\n```\n\n uni.getLeftWindowStyle()\n\n获取 leftWindow 的样式\n\n> 3.1.0 新增\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|x|√|x|x|x|x|x|\n\n**代码示例**\n\n```javascript\nuni.getLeftWindowStyle()\n```\n\n uni.getRightWindowStyle()\n\n获取 rightWindow 的样式\n\n> 3.1.0 新增\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|x|√|x|x|x|x|x|\n\n**代码示例**\n\n```javascript\nuni.getRightWindowStyle()\n```\n\n uni.setTopWindowStyle(OBJECT)\n\n设置 topWindow 的样式\n\n> 3.0.5 新增\n\n**OBJECT 参数说明**\n\n|参数|类型|说明|\n|---|---|---|\n|OBJECT|Object|css 样式对象，需写驼峰css属性 ，{height: '100px', backgroundColor: 'red'}|\n\n**代码示例**\n\n```javascript\nuni.setTopWindowStyle({\n    height: '100px', \n    backgroundColor: 'red'\n})\n```\n\n uni.setLeftWindowStyle(OBJECT)\n\n设置 leftWindow 的样式\n\n> 3.0.5 新增\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|x|√|x|x|x|x|x|\n\n**OBJECT 参数说明**\n\n|参数|类型|说明|\n|---|---|---|\n|OBJECT|Object|css 样式对象，需写驼峰css属性 ，{width: '500px', backgroundColor: 'blue'}|\n\n**代码示例**\n\n```javascript\nuni.setLeftWindowStyle({\n    width: '500px', \n    backgroundColor: 'blue'\n})\n```\n\n uni.setRightWindowStyle(OBJECT)\n\n设置 rightWindow 的样式\n\n> 3.0.5 新增\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|x|√|x|x|x|x|x|\n\n**OBJECT 参数说明**\n\n|参数|类型|说明|\n|---|---|---|\n|OBJECT|Object|css 样式对象，需写驼峰css属性 ，{width: '500px', backgroundColor: 'blue'}|\n\n**代码示例**\n\n```javascript\nuni.setRightWindowStyle({\n    width: '500px', \n    backgroundColor: 'blue'\n})\n```\n\n<!-- \n 显示或隐藏窗口的 API\n\n显示或隐藏对应的窗口\n\n uni.showTopWindow()\n\n显示 topWindow\n\n> 3.0.5 新增\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|x|√|x|x|x|x|x|\n\n**代码示例**\n\n```javascript\nuni.showTopWindow()\n```\n\n uni.showLeftWindow()\n\n显示 leftWindow\n\n> 3.0.5 新增\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|x|√|x|x|x|x|x|\n\n**代码示例**\n\n```javascript\nuni.showLeftWindow()\n```\n\n uni.showRightWindow()\n\n显示 rightWindow\n\n> 3.0.5 新增\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|x|√|x|x|x|x|x|\n\n**代码示例**\n\n```javascript\nuni.showRightWindow()\n```\n\n uni.hideTopWindow()\n\n隐藏 topWindow\n\n> 3.0.5 新增\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|x|√|x|x|x|x|x|\n\n**代码示例**\n\n```javascript\nuni.hideTopWindow()\n```\n\n uni.hideLeftWindow()\n\n隐藏 leftWindow\n\n> 3.0.5 新增\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|x|√|x|x|x|x|x|\n\n**代码示例**\n\n```javascript\nuni.hideLeftWindow()\n```\n\n uni.hideRightWindow()\n\n隐藏 rightWindow\n\n> 3.0.5 新增\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|x|√|x|x|x|x|x|\n\n**代码示例**\n\n```javascript\nuni.hideRightWindow()\n``` \n-->\n","p":"command\\界面 - 窗口.html"},{"t":"界面/字体","d":" uni.loadFontFace(Object object)\r\n\r\n动态加载网络字体，文件地址需为下载类型。微信小程序 `'2.10.0'`起支持全局生效，需在 `app.vue` 中调用。\r\n\r\n注意: \r\n\r\n1. 引入中文字体，体积过大时会发生错误，建议抽离出部分中文，减少体积，或者用图片替代\r\n2. 微信小程序端只支持网络字体，字体链接必须是https。App支持网络或本地的字体（本地字体需使用[平台绝对路径](http://www.html5plus.org/doc/zh_cn/io.htmlplus.io.convertLocalFileSystemURL)）。\r\n3. 微信小程序端字体链接必须是同源下的，或开启了cors支持，微信小程序的域名是servicewechat.com\r\n4. canvas等原生组件不支持使用接口添加的字体\r\n5. 工具里提示 Faild to load font可以忽略\r\n\r\n**平台差异说明**\r\n\r\n|5+App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|1.9.0+ [自定义组件编译模式](https://ask.dcloud.net.cn/article/35843)|2.3.4+|基础库 2.1.0+| 1.11.0+ |x|x|x|\r\n\r\n**参数说明**\r\n\r\n|属性|类型|默认值|必填|说明|\r\n|:-|:-|:-|:-|:-|\r\n|family|String||是|定义的字体名称|\r\n|source|String||是|字体资源的地址。建议格式为 TTF 和 WOFF，WOFF2 在低版本的iOS上会不兼容。|\r\n|desc|Object||否|可选的字体描述符|\r\n|success|Function||否|接口调用成功的回调函数|\r\n|fail|Function||否|接口调用失败的回调函数|\r\n|complete|Function||否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**Object.desc 的结构**\r\n\r\n|属性|类型|默认值|必填|说明|\r\n|:-|:-|:-|:-|:-|\r\n|style|String|normal|否|字体样式，可选值为 normal / italic / oblique|\r\n|weight|String|normal|否|字体粗细，可选值为 normal / bold / 100 / 200../ 900|\r\n|variant|String|normal|否|设置小型大写字母的字体显示文本，可选值为 normal / small-caps / inherit|\r\n\r\n**代码示例**\r\n\r\n```javascript\r\nuni.loadFontFace({\r\n  family: 'Bitstream Vera Serif Bold',\r\n  source: 'url(\"https://sungd.github.io/Pacifico.ttf\")',\r\n  success() {\r\n\t  console.log('success')\r\n  }\r\n})\r\n```\r\n\r\n**Tips**\r\n\r\n插件市场有加载字体的例子：[https://ext.dcloud.net.cn/plugin?id=954](https://ext.dcloud.net.cn/plugin?id=954)\r\n","p":"command\\界面 - 字体.html"},{"t":"界面/下拉刷新","d":" onPullDownRefresh\r\n在 js 中定义 onPullDownRefresh 处理函数（和onLoad等生命周期函数同级），监听该页面用户下拉刷新事件。\r\n\r\n- 需要在 ``pages.json`` 里，找到的当前页面的pages节点，并在 ``style`` 选项中开启 ``enablePullDownRefresh``。\r\n- 当处理完数据刷新后，``uni.stopPullDownRefresh`` 可以停止当前页面的下拉刷新。\r\n\r\n uni.startPullDownRefresh(OBJECT)\r\n开始下拉刷新，调用后触发下拉刷新动画，效果与用户手动下拉刷新一致。\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|success|Function|否|接口调用成功的回调|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**success 返回参数说明**\r\n\r\n|参数|类型|说明|\r\n|:-|:-|:-|\r\n|errMsg|String|接口调用结果|\r\n\r\n uni.stopPullDownRefresh()\r\n停止当前页面下拉刷新。\r\n\r\n**示例**\r\n\r\npages.json\r\n\r\n```javascript\r\n{\r\n    \"pages\": [\r\n        {\r\n        \t\"path\": \"pages/index/index\",\r\n        \t\"style\": {\r\n        \t\t\"navigationBarTitleText\": \"uni-app\",\r\n        \t\t\"enablePullDownRefresh\": true\r\n        \t}\r\n        }\r\n    ],\r\n    \"globalStyle\": {\r\n    \t\"navigationBarTextStyle\": \"white\",\r\n    \t\"navigationBarBackgroundColor\": \"0faeff\",\r\n    \t\"backgroundColor\": \"fbf9fe\"\r\n    }\r\n}\r\n```\r\n\r\nindex.vue\r\n```javascript\r\n// 仅做示例，实际开发中延时根据需求来使用。\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\ttext: 'uni-app'\r\n\t\t}\r\n\t},\r\n\tonLoad: function (options) {\r\n\t\tsetTimeout(function () {\r\n\t\t\tconsole.log('start pulldown');\r\n\t\t}, 1000);\r\n\t\tuni.startPullDownRefresh();\r\n\t},\r\n\tonPullDownRefresh() {\r\n\t\tconsole.log('refresh');\r\n\t\tsetTimeout(function () {\r\n\t\t\tuni.stopPullDownRefresh();\r\n\t\t}, 1000);\r\n\t}\r\n}\r\n```\r\n\r\n**注意**\r\n\r\n- 支付宝小程序```startPullDownRefresh```在开发者工具里会提示``暂未开放，请勿使用``\r\n- 支付宝小程序```startPullDownRefresh```请使用真机调试（非真机预览）\r\n- 后续支付宝小程序开发工具更新可能会有所修改\r\n\r\n FAQ\r\nQ：如何暂时禁用掉下拉刷新，待需要的时候再重新开启？\r\nA：`App` 平台下可以处理此类场景，详细参考：[uni-app 中实现动态禁用/开启下拉刷新](https://ask.dcloud.net.cn/article/35134)\r\n\r\nQ：自定义title如何让下拉刷新在title之下\r\nA：App和H5端使用circle方式的下拉刷新，设offset在title高度之下。hello uni-app的模板-导航栏中有示例。小程序端无法实现，除非放弃原生下拉刷新，自己模拟下拉刷新，插件市场有类似插件，但性能不如原生下拉刷新。\r\n\r\nQ：如何自定义下拉刷新样式\r\nA：小程序端的原生下拉刷新样式是固定的；App端原生的下拉刷新有2种样式可选择，下拉漏出雪花和下拉circle圈。如果使用nvue，可以使用[refresh组件](https://uniapp.dcloud.io/component/refresh)自定义下拉刷新，都是原生渲染。如果想使用scroll-view在前端实现自定义下拉刷新，需要注意列表不可太长和太复杂，否则会有性能问题。[插件市场](https://ext.dcloud.net.cn/)搜索下拉刷新有示例。\r\n","p":"command\\界面 - 下拉刷新.html"},{"t":"界面/节点信息","d":" uni.createSelectorQuery()\n\n返回一个 ``SelectorQuery`` 对象实例。可以在这个实例上使用 ``select`` 等方法选择节点，并使用 ``boundingClientRect`` 等方法选择需要查询的信息。 \n\n**Tips:** \n\n* 使用 `uni.createSelectorQuery()` 需要在生命周期 `mounted` 后进行调用。\n* 自定义组件编译模式（默认模式），需要使用到 `selectorQuery.in` 方法。\n\n SelectorQuery\n\n查询节点信息的对象\n\n selectorQuery.in(component)\n\n将选择器的选取范围更改为自定义组件 ``component`` 内，返回一个 ``SelectorQuery`` 对象实例。（初始时，选择器仅选取页面范围的节点，不会选取任何自定义组件中的节点）。\n\n**代码示例**\n```javascript\nconst query = uni.createSelectorQuery().in(this);\nquery.select('id').boundingClientRect(data => {\n  console.log(\"得到布局位置信息\" + JSON.stringify(data));\n  console.log(\"节点离页面顶部的距离为\" + data.top);\n}).exec();\n```\n\n**注意**\n\n- 支付宝小程序不支持in(component)，使用无效果\n\n selectorQuery.select(selector)\n\n在当前页面下选择第一个匹配选择器 ``selector`` 的节点，返回一个 ``NodesRef`` 对象实例，可以用于获取节点信息。\n\n**selector 说明：**\n\n``selector`` 类似于 CSS 的选择器，但仅支持下列语法。\n- ID选择器：``the-id``\n- class选择器（可以连续指定多个）：``.a-class.another-class``\n- 子元素选择器：``.the-parent > .the-child``\n- 后代选择器：``.the-ancestor .the-descendant``\n- 跨自定义组件的后代选择器：``.the-ancestor >>> .the-descendant``\n- 多选择器的并集：``a-node, .some-other-nodes``\n\n selectorQuery.selectAll(selector)\n\n在当前页面下选择匹配选择器 ``selector`` 的所有节点，返回一个 ``NodesRef`` 对象实例，可以用于获取节点信息。\n\n selectorQuery.selectViewport()\n\n选择显示区域，可用于获取显示区域的尺寸、滚动位置等信息，返回一个 ``NodesRef`` 对象实例。\n\n\n selectorQuery.exec(callback)\n\n执行所有的请求。请求结果按请求次序构成数组，在callback的第一个参数中返回。\n\n NodesRef\n\n用于获取节点信息的对象\n\n nodesRef.fields(object,callback)\n\n获取节点的相关信息。第一个参数是节点相关信息配置（必选）；第二参数是方法的回调函数，参数是指定的相关节点信息。\n\n**object 参数说明**\n\n|字段名|类型|默认值|必填|说明|平台差异说明|\n|:-|:-|:-|:-|:-|:-|\n|id|Boolean|false|否|是否返回节点 ``id``||\n|dataset|Boolean|false|否|是否返回节点 ``dataset``| App、微信小程序、H5 |\n|rect|Boolean|false|否|是否返回节点布局位置（``left`` ``right`` ``top`` ``bottom``）||\n|size|Boolean|false|否|是否返回节点尺寸（``width`` ``height``）||\n|scrollOffset|Boolean|false|否|是否返回节点的 ``scrollLeft`` ``scrollTop``，节点必须是 ``scroll-view`` 或者 ``viewport``||\n| properties | Array＜string＞ | [] | 否 | 指定属性名列表，返回节点对应属性名的当前属性值（只能获得组件文档中标注的常规属性值，id class style 和事件绑定的属性值不可获取） | 仅 App 和微信小程序支持 |\n| computedStyle | Array＜string＞ | [] | 否 | 指定样式名列表，返回节点对应样式名的当前值 | 仅 App 和微信小程序支持 |\n| context | Boolean | false | 否 | 是否返回节点对应的 Context 对象 | 仅 App 和微信小程序支持 |\n\n nodesRef.boundingClientRect(callback)\n\n添加节点的布局位置的查询请求。相对于显示区域，以像素为单位。其功能类似于 DOM 的 ``getBoundingClientRect``。返回 ``NodesRef`` 对应的 ``SelectorQuery``。\n\n**callback 返回参数**\n\n|属性\t|类型\t\t|说明\t\t|\n|---|---|---|\n|id\t|String\t|节点的 ID|\t\t\n|dataset\t|Object\t|节点的 dataset|\t\t\n|left\t|Number\t|节点的左边界坐标|\t\t\n|right\t|Number\t|节点的右边界坐标|\t\t\n|top\t|Number\t|节点的上边界坐标|\t\t\n|bottom\t|Number\t|节点的下边界坐标|\t\t\n|width\t|Number\t|节点的宽度|\t\t\n|height\t|Number\t|节点的高度|\n\n nodesRef.scrollOffset(callback)\n\n添加节点的滚动位置查询请求。以像素为单位。节点必须是 ``scroll-view`` 或者 ``viewport``。返回 ``NodesRef`` 对应的 ``SelectorQuery``。\n\n**callback 返回参数**\n\n|属性\t|类型\t\t\t\t|说明\t\t|\n|---|---|---|\n|id\t|String\t\t\t|节点的 ID|\t\t\t\t\t\t\t\t\n|dataset\t|Object\t\t\t|节点的 dataset|\t\t\t\t\t\t\t\t\n|scrollLeft\t|Number\t\t\t|节点的水平滚动位置|\t\t\t\t\t\t\t\n|scrollTop\t|Number\t|节点的竖直滚动位置\t|\n\n nodesRef.context(callback)\n\n添加节点的 Context 对象查询请求。支持 [`VideoContext`](/api/media/video-context)、[`CanvasContext`](/api/canvas/CanvasContext)、和 [`MapContext`](/api/location/map) 等的获取。\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|√|HBuilderX 2.4.7+|√|x|x|x|√|\n\n**callback 返回参数**\n\n| 属性 | 类型 | 说明 |\n| --- | --- | --- |\n| context | Object | 节点对应的 Context 对象 |\n\n nodesRef.node(callback)\n\n获取 `Node` 节点实例。目前支持 `Canvas` 的获取。\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|x|x|√|x|x|x|√|\n\n**callback 返回参数**\n\n| 属性 | 类型 | 说明 |\n| --- | --- | --- |\n| node | Object | 节点对应的 Node 实例 |\n\n**注意**\n\n- 目前仅能用于`canvas`\n- `canvas`需设置`type=\"webgl\"`才能正常使用\n\n 代码示例\n\n```javascript\nuni.createSelectorQuery().selectViewport().scrollOffset(res => {\n  console.log(\"竖直滚动位置\" + res.scrollTop);\n}).exec();\n\nlet view = uni.createSelectorQuery().in(this).select(\".test\");\n\nview.fields({\n  size: true,\n  scrollOffset: true\n}, data => {\n  console.log(\"得到节点信息\" + JSON.stringify(data));\n  console.log(\"节点的宽为\" + data.width);\n}).exec();\n\nview.boundingClientRect(data => {\n  console.log(\"得到布局位置信息\" + JSON.stringify(data));\n  console.log(\"节点离页面顶部的距离为\" + data.top);\n}).exec();\n```\n\n**注意**\n- nvue 暂不支持 uni.createSelectorQuery，暂时使用下面的方案\n\n```\n<template>\n  <view class=\"wrapper\">\n    <view ref=\"box\" class=\"box\">\n      <text class=\"info\">Width: {{size.width}}</text>\n      <text class=\"info\">Height: {{size.height}}</text>\n      <text class=\"info\">Top: {{size.top}}</text>\n      <text class=\"info\">Bottom: {{size.bottom}}</text>\n      <text class=\"info\">Left: {{size.left}}</text>\n      <text class=\"info\">Right: {{size.right}}</text>\n    </view>\n  </view>\n</template>\n\n<script>\n  // 注意平台差异\n  // ifdef APP-NVUE\n  const dom = weex.requireModule('dom')\n  // endif\n\n  export default {\n    data () {\n      return {\n        size: {\n          width: 0,\n          height: 0,\n          top: 0,\n          bottom: 0,\n          left: 0,\n          right: 0\n        }\n      }\n    },\n    onReady () {\n      const result = dom.getComponentRect(this.$refs.box, option => {\n        console.log('getComponentRect:', option)\n        this.size = option.size\n      })\n      console.log('return value:', result)\n      console.log('viewport:', dom.getComponentRect('viewport'))\n    }\n  }\n</script>\n```\n","p":"command\\界面 - 节点信息.html"},{"t":"界面/节点布局相交状态","d":"节点布局交叉状态 API 可用于监听两个或多个组件节点在布局位置上的相交状态。这一组API常常可以用于推断某些节点是否可以被用户看见、有多大比例可以被用户看见。\r\n\r\n uni.createIntersectionObserver([this], [options])\r\n创建并返回一个 ``IntersectionObserver`` 对象实例。\r\n\n**this说明：**\n\n自定义组件实例。**支付宝小程序不支持此参数，传入仅为抹平写法差异**\n\r\n**options 的可选参数为：**\r\n\r\n|字段名|类型|说明|\r\n|:-|:-|:-|\r\n|thresholds|Array|一个数值数组，包含所有阈值。默认为 ``[0]``。|\r\n|initialRatio|Number|初始的相交比例，如果调用时检测到的相交比例与这个值不相等且达到阈值，则会触发一次监听器的回调函数。默认为 ``0``。|\r\n|observeAll|Boolean|是否同时观测多个参照节点（而非一个），如果设为 ``true``，``observe`` 的 ``targetSelector`` 将选中多个节点（注意：同时选中过多节点将影响渲染性能）|\r\n\r\n IntersectionObserver 对象的方法列表\r\n\r\n|方法|说明|\r\n|:-|:-|\r\n|IntersectionObserver.relativeTo(selector,[margins])|使用选择器指定一个节点，作为参照区域之一。|\r\n|IntersectionObserver.relativeToViewport([margins])|指定页面显示区域作为参照区域之一|\r\n|IntersectionObserver.observe(selector,[callback])|指定目标节点并开始监听相交状态变化情况。回调函数 ``callback`` 包含一个参数 ``result``|\r\n|IntersectionObserver.disconnect()|停止监听。回调函数将不再触发。|\r\n\r\n**margins 参数：** 用来扩展（或收缩）参照节点布局区域的边界。\r\n\r\n|属性|类型|默认值|是否必填|说明|\r\n|:-|:-|:-|:-|:-|\r\n|left|number||否|节点布局区域的左边界|\r\n|right|number||否|节点布局区域的右边界|\r\n|top|number||否|节点布局区域的上边界|\r\n|bottom|number||否|节点布局区域的下边界|\r\n\r\n下面的示例代码中，如果目标节点 ``\".test\"`` 进入 ``\".scroll\"`` 区域以下 100px 时，就会触发回调函数。\r\n```\r\nuni.createIntersectionObserver(this).relativeTo('.scroll',{bottom: 100}).observe('.test', (res) => {\r\n  console.log(res);\r\n})\r\n```\r\n\r\n**observe 回调函数 result 包含的字段**\r\n\r\n|字段名|类型|说明|\r\n|:-|:-|:-|\r\n|intersectionRatio|Number|相交比例|\r\n|intersectionRect|Object|相交区域的边界，包含 ``left``、``right``、``top``、``bottom`` 四项|\r\n|boundingClientRect|Object|目标节点布局区域的边界，包含 ``left``、``right``、``top``、``bottom`` 四项|\r\n|relativeRect|Object|参照区域的边界，包含 ``left``、``right``、``top``、``bottom`` 四项|\r\n|time|Number|相交检测时的时间戳|\r\n\r\n\r\n**Tips**\r\n\r\n- 与页面显示区域的相交区域并不准确代表用户可见的区域，因为参与计算的区域是“布局区域”，布局区域可能会在绘制时被其他节点裁剪隐藏（如祖先节点中 overflow 样式为 hidden 的节点）或遮盖（如 fixed 定位的节点）。\r\n- 节点交互状态 ``API`` 建议在 ``onReady`` 生命周期里监听，因为此 ``API`` 需要查找页面元素，``onReady`` 时页面已经完成初次渲染，已经能查找到对应的元素。\r\n\r\n 代码示例\r\n\r\n```\r\n<template>\r\n\t<view class=\"container\">\r\n\t\t<text>{{appear ? '小球出现' : '小球消失'}}</text>\r\n\t\t<view class=\"page-section\">\r\n\t\t\t<scroll-view class=\"scroll-view\" scroll-y>\r\n\t\t\t\t<view class=\"scroll-area\">\r\n\t\t\t\t\t<text class=\"notice\">向下滚动让小球出现</text>\r\n\t\t\t\t\t<view class=\"ball\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n<script>\r\n\tlet observer = null;\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tappear: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t\tobserver = uni.createIntersectionObserver(this);\r\n            observer.relativeTo('.scroll-view').observe('.ball', (res) => {\r\n              if (res.intersectionRatio > 0 && !this.appear) {\r\n                this.appear = true;\r\n              } else if (!res.intersectionRatio > 0 && this.appear) {\r\n                this.appear = false;\r\n              }\r\n            })\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\tif (observer) {\r\n\t\t\t\tobserver.disconnect()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n<style>\r\n\tview,page {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\r\n\t.scroll-view {\r\n\t\theight: 400rpx;\r\n\t\tbackground: fff;\r\n\t\tborder: 1px solid ccc;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.scroll-area {\r\n\t\theight: 1300rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\ttransition: .5s;\r\n\t}\r\n\r\n\t.notice {\r\n\t\tmargin-top: 150rpx;\r\n\t\tmargin: 150rpx 0 400rpx 0;\r\n\t}\r\n\r\n\t.ball {\r\n\t\twidth: 200rpx;\r\n\t\theight: 200rpx;\r\n\t\tbackground: 1AAD19;\r\n\t\tborder-radius: 50%;\r\n\t}\r\n</style>\r\n\r\n```\r\n","p":"command\\界面 - 节点布局相交状态.html"},{"t":"界面/媒体查询","d":"MediaQueryObserver 对象，用于监听页面 media query 状态的变化，如界面的宽高是不是在某个指定的范围内。\n\n uni.createMediaQueryObserver([this])\n创建并返回一个 ``MediaQueryObserver`` 对象实例。\n\n**this说明：**\n\n自定义组件实例。**小程序端不支持此参数，传入仅为抹平写法差异**\n\n**平台兼容性**\n\n|app|微信小程序|支付宝小程序|qq小程序|百度小程序|字节小程序|360小程序|快应用|\n|:-|:-|:-|:-|:-|:-|:-|:-|\n|2.8.12+，app-vue|基础库 2.11.1+|√|√|√|√|√|X|\n\n注意：支付宝小程序、qq小程序、百度小程序、字节小程序，暂不支持监听屏幕动态改变，即只执行一次媒体查询。\n\n MediaQueryObserver 对象的方法列表\n\n>tips: 和 UI 相关的 api 在组件 mountd 后执行\n\n|方法|说明|\n|:-|:-|:-|\n|MediaQueryObserver.observe(Object descriptor, function callback)|开始监听页面 media query 变化情况|\n|MediaQueryObserver.disconnect()|停止监听，回调函数将不再触发|\n\n**Object descriptor**\n\n|属性名|类型|默认值|必填|说明|\n|:-|:-|:-|:-|:-|\n|min-width|number||否|页面最小宽度（ px 为单位）|\n|max-width|number||否|页面最大宽度（ px 为单位）|\n|width|number||否|页面宽度（ px 为单位）|\n|min-height|number||否|页面最小高度（ px 为单位）|\n|max-height|number||否|页面最大高度（ px 为单位）|\n|height|number||否|页面高度（ px 为单位）|\n|orientation|string||否|屏幕方向（ landscape 或 portrait ）|\n\n**observe 回调函数包含一个参数**\n\n|参数|类型|说明|\n|:-|:-|:-|\n|matches|boolean|页面的当前状态是否满足所指定的 media query|\n\n 代码示例\n\n以下示例代码，推荐使用HBuilderX，新建uni-app项目，可直接体验完整示例。\n\n```\n<template>\n    <view class=\"content\">\n        <view class=\"\">\n            要求页面最小宽度 375px， 且页面宽度最大 500px，是否匹配: {{matches}}\n        </view>\n        <view>\n            要求屏幕方向为纵向，是否匹配: {{landscape}}\n        </view>\n    </view>\n</template>\n\n<script>\n    let landscapeOb\n    export default {\n        data() {\n            return {\n                matches: false,\n                landscape: false,\n                mediaQueryOb: null\n            }\n        },\n        onLoad() {\n\n        },\n        \n        // 和 UI 相关的 api 在组件 mountd 后执行\n        mounted() {\n            this.testMediaQueryObserver()\n            this.landscapeObserver()\n        },\n\n        methods: {\n            testMediaQueryObserver() {\n                this.mediaQueryOb = uni.createMediaQueryObserver(this)\n\n                this.mediaQueryOb.observe({\n                    minWidth: 375,  //页面最小宽度 375px\n                    maxWidth: 500  //页面宽度最大 500px\n                }, matches => {\n                    this.matches = matches;\n                })\n            },\n            landscapeObserver() {\n                landscapeOb = uni.createMediaQueryObserver(this)\n                landscapeOb.observe({\n                    orientation: 'landscape'  //屏幕方向为纵向\n                }, matches => {\n                        this.landscape = matches\n                })\n            },\n            destroyed () {\n                this.mediaQueryOb.disconnect()  //组件销毁时停止监听\n                landscapeOb.disconnect()\n            }\n        }\n    }\n</script>\n\n<style>\n    .content {\n        text-align: center;\n        height: 400upx;\n    }\n</style>\n```\n","p":"command\\界面 - 媒体查询.html"},{"t":"界面/菜单","d":" getMenuButtonBoundingClientRect()\r\n\r\n在小程序平台，如果原生导航栏被隐藏，仍然在右上角会有一个悬浮按钮，微信下也被称为胶囊按钮。本API用于获取小程序下该菜单按钮的布局位置信息，方便开发者布局顶部内容时避开该按钮。\r\n\r\n坐标信息以屏幕左上角为原点。\r\n\r\n**平台差异说明**\r\n\r\n|App\t|H5\t|微信小程序\t|支付宝小程序\t|百度小程序\t|字节跳动小程序\t|QQ小程序\t|\r\n|:-:\t|:-:|:-:\t\t|:-:\t\t\t|:-:\t\t|:-:\t\t|:-:\t\t|\r\n|x\t\t|x\t|√\t\t\t|x\t\t\t\t|√\t\t\t|√\t\t\t|√\t\t\t|\r\n\r\n**返回值说明**\r\n\r\n|属性\t  |类型\t  |说明\t\t\t\t\t      |\r\n|:-:\t  |:-:    |:-:\t\t            |\r\n|width\t|number\t|宽度，单位：px\t\t\t  |\r\n|height\t|number\t|高度，单位：px\t\t\t  |\r\n|top\t  |number\t|上边界坐标，单位：px\t|\r\n|right\t|number\t|右边界坐标，单位：px\t|\r\n|bottom\t|number\t|下边界坐标，单位：px\t|\r\n|left\t  |number\t|左边界坐标，单位：px\t|\r\n\r\n**示例**\r\n\r\n```javascript\r\n  let menuButtonInfo = uni.getMenuButtonBoundingClientRect()\r\n```\r\n\r\n**注意**\r\n\r\n- 支付宝小程序：其逻辑与微信小程序不同，它提供了菜单点击后按钮的自定义功能，可以选择显示那些系统按钮，[规范详情](https://docs.alipay.com/mini/api/optionmenuitem)\r\n","p":"command\\界面 - 菜单.html"},{"t":"页面和窗体/页面","d":"\r\n getCurrentPages()\r\n\r\n```getCurrentPages()``` 函数用于获取当前页面栈的实例，以数组形式按栈的顺序给出，第一个元素为首页，最后一个元素为当前页面。\r\n\r\n**注意：** ``getCurrentPages()``仅用于展示页面栈的情况，请勿修改页面栈，以免造成页面状态错误。\r\n\r\n每个页面实例的方法属性列表：\r\n\r\n|方法|描述|平台说明|\r\n|---|---|---|\r\n|page.$getAppWebview()|获取当前页面的webview对象实例|App|\r\n|page.route|获取当前页面的路由|&nbsp;|\r\n\r\nTips：\r\n* ``navigateTo``, ``redirectTo`` 只能打开非 tabBar 页面。\r\n* ``switchTab`` 只能打开 ``tabBar`` 页面。\r\n* ``reLaunch`` 可以打开任意页面。\r\n* 页面底部的 ``tabBar`` 由页面决定，即只要是定义为 ``tabBar`` 的页面，底部都有 ``tabBar``。\r\n* 不能在 ```App.vue``` 里面进行页面跳转。\r\n\r\n $getAppWebview()\r\n\r\n```uni-app``` 在 ```getCurrentPages()```获得的页面里内置了一个方法 ```$getAppWebview()``` 可以得到当前webview的对象实例，从而实现对 webview 更强大的控制。在 html5Plus 中，plus.webview具有强大的控制能力，可参考：[WebviewObject](http://www.html5plus.org/doc/zh_cn/webview.htmlplus.webview.WebviewObject)。\r\n\r\n但`uni-app`框架有自己的窗口管理机制，请不要自己创建和销毁webview，如有需求覆盖子窗体上去，请使用[原生子窗体subNvue](/api/window/subNVues)。\r\n\r\n**注意：此方法仅 App 支持**\r\n\r\n**示例：**\r\n\r\n获取当前页面 webview 的对象实例\r\n```javascript\r\nexport default {\r\n  data() {\r\n    return {\r\n      title: 'Hello'\r\n    }\r\n  },\r\n  onLoad() {\r\n    // ifdef APP-PLUS\r\n    const currentWebview = this.$scope.$getAppWebview(); //此对象相当于html5plus里的plus.webview.currentWebview()。在uni-app里vue页面直接使用plus.webview.currentWebview()无效，非v3编译模式使用this.$mp.page.$getAppWebview()\r\n    currentWebview.setBounce({position:{top:'100px'},changeoffset:{top:'0px'}}); //动态重设bounce效果\r\n    // endif\r\n  }\r\n}\r\n```\r\n\r\n获取指定页面 webview 的对象实例\r\n\r\n`getCurrentPages()`可以得到所有页面对象，然后根据数组，可以取指定的页面webview对象\r\n```javascript\r\nvar pages = getCurrentPages();\r\nvar page = pages[pages.length - 1];\r\n// ifdef APP-PLUS\r\nvar currentWebview = page.$getAppWebview();\r\nconsole.log(currentWebview.id);//获得当前webview的id\r\nconsole.log(currentWebview.isVisible());//查询当前webview是否可见\r\n);\r\n// endif\r\n```\r\n\r\nuni-app自带的web-view组件，是页面中新插入的一个子webview。获取该对象的方法见：[https://ask.dcloud.net.cn/article/35036](https://ask.dcloud.net.cn/article/35036)\r\n","p":"command\\页面和窗体 - 页面.html"},{"t":"页面和窗体/页面通讯","d":"> 自 HBuilderX 2.0.0 起自定义组件编译模式支持，[使用指南](https://ask.dcloud.net.cn/article/36010)\r\n\r\n uni.$emit(eventName,OBJECT)\r\n\r\n触发全局的自定义事件，附加参数都会传给监听器回调函数。\r\n\r\n|属性\t\t|类型\t|描述\t\t\t\t|\r\n|---\t\t|---\t|---\t\t\t\t|\r\n|eventName\t|String\t|事件名\t\t\t\t|\r\n|OBJECT\t\t|Object\t|触发事件携带的附加参数\t|\r\n\r\n**代码示例**\r\n```javascript\r\n\tuni.$emit('update',{msg:'页面更新'})\r\n```\r\n\r\n\r\n uni.$on(eventName,callback)\r\n\r\n监听全局的自定义事件，事件由 `uni.$emit` 触发，回调函数会接收事件触发函数的传入参数。\r\n\r\n|属性\t\t|类型\t\t|描述\t\t\t|\r\n|---\t\t|---\t\t|---\t\t\t|\r\n|eventName\t|String\t\t|事件名\t\t\t|\r\n|callback\t|Function\t|事件的回调函数\t|\r\n\r\n\r\n**代码示例**\r\n```javascript\r\n\tuni.$on('update',function(data){\r\n\t\tconsole.log('监听到事件来自 update ，携带参数 msg 为：' + data.msg);\r\n\t})\r\n```\r\n\r\n\r\n uni.$once(eventName,callback)\r\n\r\n监听全局的自定义事件，事件由 `uni.$emit` 触发，但仅触发一次，在第一次触发之后移除该监听器。\r\n\r\n|属性\t\t|类型\t\t|描述\t\t\t|\r\n|---\t\t|---\t\t|---\t\t\t|\r\n|eventName\t|String\t\t|事件名\t\t\t|\r\n|callback\t|Function\t|事件的回调函数\t|\r\n\r\n\r\n**代码示例**\r\n```javascript\r\n\tuni.$once('update',function(data){\r\n\t\tconsole.log('监听到事件来自 update ，携带参数 msg 为：' + data.msg);\r\n\t})\r\n```\r\n\r\n uni.$off([eventName, callback])\r\n\r\n移除全局自定义事件监听器。\r\n\r\n|属性\t\t|类型\t\t\t|描述\t\t\t|\r\n|---\t\t|---\t\t\t|---\t\t\t|\r\n|eventName\t|Array＜String＞ |事件名\t\t\t|\r\n|callback\t|Function\t\t|事件的回调函数\t|\r\n\r\n**Tips**\r\n- 如果uni.$off没有传入参数，则移除App级别的所有事件监听器；\r\n- 如果只提供了事件名（eventName），则移除该事件名对应的所有监听器；\r\n- 如果同时提供了事件与回调，则只移除这个事件回调的监听器；\r\n- 提供的回调必须跟$on的回调为同一个才能移除这个回调的监听器；\r\n\r\n**代码示例**\r\n\r\n`$emit`、`$on`、`$off`常用于跨页面、跨组件通讯，这里为了方便演示放在同一个页面\r\n\r\n```html\r\n\t<template>\r\n\t\t<view class=\"content\">\r\n\t\t\t<view class=\"data\">\r\n\t\t\t\t<text>{{val}}</text>\r\n\t\t\t</view>\r\n\t\t\t<button type=\"primary\" @click=\"comunicationOff\">结束监听</button>\r\n\t\t</view>\r\n\t</template>\r\n\t\r\n\t<script>\r\n\t\texport default {\r\n\t\t\tdata() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tval: 0\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonLoad() {\r\n\t\t\t\tsetInterval(()=>{\r\n\t\t\t\t\tuni.$emit('add', {\r\n\t\t\t\t\t\tdata: 2\r\n\t\t\t\t\t})\r\n\t\t\t\t},1000)\r\n\t\t\t\tuni.$on('add', this.add)\r\n\t\t\t},\r\n\t\t\tmethods: {\r\n\t\t\t\tcomunicationOff() {\r\n\t\t\t\t\tuni.$off('add', this.add)\r\n\t\t\t\t},\r\n\t\t\t\tadd(e) {\r\n\t\t\t\t\tthis.val += e.data\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t</script>\r\n\t\r\n\t<style>\r\n\t\t.content {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\t\t}\r\n\t\r\n\t\t.data {\r\n\t\t\ttext-align: center;\r\n\t\t\tline-height: 40px;\r\n\t\t\tmargin-top: 40px;\r\n\t\t}\r\n\t\r\n\t\tbutton {\r\n\t\t\twidth: 200px;\r\n\t\t\tmargin: 20px 0;\r\n\t\t}\r\n\t</style>\r\n\t\r\n```\r\n\r\n\r\n**注意事项**\r\n- uni.$emit、 uni.$on 、 uni.$once 、uni.$off 触发的事件都是 App 全局级别的，跨任意组件，页面，nvue，vue 等\r\n- 使用时，注意及时销毁事件监听，比如，页面 onLoad 里边 uni.$on 注册监听，onUnload 里边 uni.$off 移除，或者一次性的事件，直接使用 uni.$once 监听\r\n","p":"command\\页面和窗体 - 页面通讯.html"},{"t":"页面和窗体/subNVue原生子窗体","d":"subNvue，是 vue 页面的原生子窗体，把weex渲染的原生界面当做 vue 页面的子窗体覆盖在页面上。它不是全屏页面，它给App平台vue页面中的层级覆盖和原生界面自定义提供了更强大和灵活的解决方案。它也不是组件，就是一个原生子窗体。\r\n\r\n它的设计背景和用途详见：[subNVue 原生子窗体开发指南](https://ask.dcloud.net.cn/article/35948)\r\n\r\n> subNvue 自1.9.10 起支持 ，仅支持 app 平台\r\n\r\n uni.getSubNVueById(subNvueId)@app-getsubnvuebyid\r\n\r\n通过 `ID` 获取 `subNVues` 原生子窗体的实例。  [subNVues 配置](/collocation/pages?id=app-subNVues)\r\n\r\n|参数\t|类型\t|说明\t\t\t\t|\r\n|---\t|---\t|---\t\t\t\t|\r\n|subNvueId |String\t| 原生子窗体的 ID|\r\n\r\n**代码示例**\r\n\r\n```javascript\r\nconst subNVue = uni.getSubNVueById('popup');\r\n```\r\n\r\n 返回值\r\n返回一个 [subNVue](/api/window/subNVues?id=subnvue) 对象\r\n\r\n\r\n uni.getCurrentSubNVue()@app-getCurrentSubNVue\r\n\r\n在一个subnvue窗体的nvue页面代码中，获取当前 `subNVues` 原生子窗体的实例。\r\n\r\n**代码示例（注意执行在nvue页面中）**\r\n\r\n```javascript\r\nconst subNVue = uni.getCurrentSubNVue();\r\n```\r\n\r\n 返回值\r\n返回一个 [subNVue](/api/window/subNVues?id=subnvue) 对象\r\n\r\n\r\n subNVue 对象的方法列表@subNVue\r\n\r\n|方法\t\t\t|说明\t\t\t\t|\r\n|---\t\t\t|---\t\t\t\t|\r\n|show\t\t\t| 显示原生子窗体\t\t|\r\n|hide\t\t\t| 隐藏原生子窗体\t\t|\r\n|setStyle\t\t| 设置原生子窗体的样式\t|\r\n\r\n\r\n subNVue.show (aniShow,duration,showedCB)\r\n显示原生子窗体\r\n\r\n|参数\t\t|类型|默认值\t|说明\t\t\t\t\t\t\t\t|\r\n|---\t\t|---\t|---\t\t|---\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|aniShow\t|String| auto\t|显示原生子窗体的动画效果 ，如果没有指定窗口动画类型，则使用默认值“auto”，即自动选择上一次显示窗口的动画效果，如果之前没有显示过，则使用“none”动画效果。[详见动画类型](/api/window/subNVues?id=动画类型)|\r\n|duration\t|Number| 600\t|显示原生子窗体的动画持续时间，单位为ms，如果没有设置则使用默认窗口动画时间 600ms。|\r\n|showedCB\t|Function|\t\t|显示完成的回调函数，当指定原生子窗体显示动画执行完毕时触发回调函数，窗口无动画效果（如\"none\"动画效果）时也会触发此回调。\t|\r\n\r\n\r\n**代码示例**\r\n\r\n```javascript\r\nsubNVue.show('slide-in-left',200,()=>{\r\n\tconsole.log('subNVue 原生子窗体显示成功');\r\n})\r\n```\r\n\r\n\r\n subNVue.hide (aniShow,duration)\r\n隐藏原生子窗体\r\n\r\n|参数\t\t|类型|默认值\t|说明\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|---\t\t|---|---\t|---\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|aniShow\t|String| auto\t|隐藏原生子窗体的动画效果 ，如果没有指定窗口动画类型，则使用默认值“auto”，即自动选择上一次显示窗口的动画效果，如果之前没有显示过，则使用“none”动画效果。[详见动画类型](/api/window/subNVues?id=动画类型)|\r\n|duration\t|Number| 600\t|隐藏原生子窗体的动画持续时间，单位为ms，如果没有设置则使用默认窗口动画时间 600ms。\t|\r\n\r\n**代码示例**\r\n\r\n```javascript\r\nsubNVue.hide('slide-out-left',200);\r\n```\r\n\r\n\r\n subNVue.setStyle (style)\r\n设置原生子窗体的样式\r\n\r\n|参数\t|类型\t|说明\t\t\t\t\t|\r\n|---\t|---\t|---\t\t\t\t\t|\r\n|style\t|Object\t| 原生子窗体的样式\t|\r\n\r\n**原生子窗体的样式**\r\n\r\n|属性|类型|默认值|描述|\r\n|:-|:-|:-|:-|\r\n|position|String|absolute|原生子窗体的排版位置，排版位置决定原生子窗体在父窗口中的定位方式。 可取值：\"static\"，原生子窗体在页面中正常定位，如果页面存在滚动条则随窗口内容滚动；\"absolute\"，原生子窗体在页面中绝对定位，如果页面存在滚动条不随窗口内容滚动；\"dock\"，原生子窗体在页面中停靠，停靠的位置由dock属性值决定。 默认值为\"absolute\"。|\r\n|dock|String|bottom|原生子窗体的停靠方式,仅当原生子窗体 \"position\" 属性值设置为 \"dock\" 时才生效，可取值：\"top\"，原生子窗体停靠则页面顶部；\"bottom\"，原生子窗体停靠在页面底部；\"right\"，原生子窗体停靠在页面右侧；\"left\"，原生子窗体停靠在页面左侧。 默认值为\"bottom\"。|\r\n|mask|HexColor|rgba(0,0,0,0.5)|原生子窗体的遮罩层,仅当原生子窗体 \"type\" 属性值设置为 \"popup\" 时才生效，可取值： rgba格式字符串，定义纯色遮罩层样式，如\"rgba(0,0,0,0.5)\"，表示黑色半透明；|\r\n|width|String|100%|原生子窗体的宽度,支持百分比、像素值，默认为100%。未设置width属性值时，可同时设置left和right属性值改变窗口的默认宽度。|\r\n|height|String|100%|原生子窗体的高度,支持百分比、像素值，默认为100%。 当未设置height属性值时，优先通过top和bottom属性值来计算原生子窗体的高度。|\r\n|top|String|0px|原生子窗体垂直向下的偏移量，支持百分比、像素值，默认值为0px。 未设置top属性值时，优先通过bottom和height属性值来计算原生子窗体的top位置。|\r\n|bottom|String||原生子窗体垂直向上偏移量,支持百分比、像素值，默认值无值（根据top和height属性值来自动计算）。 当同时设置了top和height值时，忽略此属性值； 当未设置height值时，可通过top和bottom属性值来确定原生子窗体的高度。|\r\n|left|String|0px|原生子窗体水平向左的偏移量，支持百分比、像素值，默认值为0px。 未设置left属性值时，优先通过right和width属性值来计算原生子窗体的left位置。|\r\n|right|String||原生子窗体水平向右的偏移量，支持百分比、像素值，默认无值（根据left和width属性值来自动计算）。 当设置了left和width值时，忽略此属性值； 当未设置width值时，可通过left和bottom属性值来确定原生子窗体的宽度。|\r\n|margin|String||原生子窗体的边距，用于定位原生子窗体的位置，支持auto，auto表示居中。若设置了left、right、top、bottom则对应的边距值失效。|\r\n|zindex|Number||原生子窗体的窗口的堆叠顺序值，拥有更高堆叠顺序的窗口总是会处于堆叠顺序较低的窗口的前面，拥有相同堆叠顺序的窗口后调用show方法则在前面。|\r\n\r\n**代码示例**\r\n\r\n```javascript\r\n\r\nsubNVue.setStyle({\r\n\t\"position\": \"absolute\", //除 popup 外，其他值域参考 5+ webview position 文档\r\n\t\"width\": \"50%\",\r\n\t\"height\": \"50%\",\r\n\t\"left\":\"20px\",\r\n\t\"top\":\"100px\"\r\n})\r\n```\r\n\r\n\r\n subNVue.postMessage(OBJECT)\n\r\n发送消息，此通讯方式已过时，请使用`uni.$emit`进行通讯，[参考](/collocation/frame/communication?id=emit)\r\n\r\n**代码示例**\r\n\r\n```javascript\r\n\r\nconst subNVue = uni.getSubNVueById('subNvue');\r\nsubNvue.postMessage({\r\n\tid:'1'\r\n\tname:'subNvues'\r\n})\r\n```\r\n\r\n subNVue.onMessage(CallBack)\n\r\n监听消息，此通讯方式已过时，请使用`uni.$on`进行通讯，[参考](/collocation/frame/communication?id=on)\r\n\r\n**代码示例**\r\n\r\n```javascript\r\n\r\nconst subNVue = uni.getSubNVueById('subNvue');\r\nsubNvue.onMessage(function(data){\r\n\tconsole.log('监听来自所属页面的 message' + JSON.stringify(data));\r\n})\r\n```\r\n\r\n\r\n 动画类型\r\n显示动画与关闭动画，会有默认的对应规则。但是如果通过 API 原生子窗体的关闭动画类型，则不会使用默认的类型。\r\n\r\n|显示动画|关闭动画|显示动画描述（关闭动画与之相反）\r\n|:-|:-|:-|\r\n|slide-in-right|slide-out-right|新窗体从右侧进入|\r\n|slide-in-left|slide-out-left|新窗体从左侧进入|\r\n|slide-in-top|slide-out-top|新窗体从顶部进入|\r\n|slide-in-bottom|slide-out-bottom|新窗体从底部进入|\r\n|fade-in|fade-out|新窗体从透明到不透明逐渐显示|\r\n|zoom-out|zoom-in|新窗体从小到大缩放显示|\r\n|zoom-fade-out|zoom-fade-in|新窗体从小到大逐渐放大并且从透明到不透明逐渐显示|\r\n|pop-in|pop-out|新窗体从左侧进入，且老窗体被挤压而出|\r\n|none|none|无动画|\r\n\r\n详细的窗口动画说明，请参考：\r\n\r\n- 窗口显示的动画：[AnimationTypeShow](https://www.html5plus.org/doc/zh_cn/webview.htmlplus.webview.AnimationTypeShow)\r\n- 窗口关闭的动画：[AnimationTypeClose](https://www.html5plus.org/doc/zh_cn/webview.htmlplus.webview.AnimationTypeClose)\r\n\r\n**注意事项**\r\n- 了解更多 `subNVue` 原生子窗体的用途，请详读[subNVues 原生子窗体开发指南](https://ask.dcloud.net.cn/article/35948)\r\n- 在hello uni-app的接口-界面-原生子窗体中，有完整的subNVue示例，包括带渐变色的原生导航栏、可遮盖地图的侧滑菜单、可从顶部弹出的popup、可在视频上滚动的消息列表\r\n- 每个 `subNVue` 页面都要在 pages.json 中注册。如果需要全局弹窗，也可以直接弹出nvue页面，参考这个[插件](https://ext.dcloud.net.cn/plugin?id=953)\r\n- `subNVue` 比cover-view和plus.nativeObj.view更强大，也占用更多内存，为了保证更好的性能体验，一个vue页面不要加载太多 `subNVue` 子窗体，建议控制在三个以内\r\n","p":"command\\页面和窗体 - subNVue原生子窗体.html"},{"t":"文件/uni.saveFile","d":" uni.saveFile(OBJECT)\r\n保存文件到本地。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|x|√|√|√|√|√|\r\n\r\n**注意：saveFile 会把临时文件移动，因此调用成功后传入的 tempFilePath 将不可用。**\r\n\r\n**OBJECT 参数说明：**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|tempFilePath|String|是|需要保存的文件的临时路径|\r\n|success|Function|否|返回文件的保存路径，res = {savedFilePath: '文件的保存路径'}|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**success 返回参数说明：**\r\n\r\n|参数|说明|\r\n|:-|:-|\r\n|savedFilePath|文件的保存路径|\r\n\r\n**示例代码：**\r\n\r\n```javascript\r\nuni.chooseImage({\r\n  success: function (res) {\r\n    var tempFilePaths = res.tempFilePaths;\r\n    uni.saveFile({\r\n      tempFilePath: tempFilePaths[0],\r\n      success: function (res) {\r\n        var savedFilePath = res.savedFilePath;\r\n      }\r\n    });\r\n  }\r\n});\r\n```\r\n\r\n uni.getSavedFileList(OBJECT)\r\n获取本地已保存的文件列表。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|x|√|√|√|√|√|\r\n\r\n**OBJECT 参数说明：**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|success|Function|否|接口调用成功的回调函数，返回结果见 success 返回参数说明|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**success 返回参数说明：**\r\n\r\n|参数|类型|说明|\r\n|:-|:-|:-|\r\n|errMsg|String|接口调用结果|\r\n|fileList|Array&lt;Object&gt;|文件列表|\r\n\r\n**fileList 中的项目说明：**\r\n\r\n|键|类型|说明|\r\n|:-|:-|:-|\r\n|filePath|String|文件的本地路径|\r\n|createTime|Number|文件的保存时的时间戳，从 `1970/01/01 08:00:00` 到该时刻的秒数。|\r\n|size|Number|文件大小，以字节为单位。|\r\n\r\n**示例代码：**\r\n\r\n```javascript\r\nuni.getSavedFileList({\r\n  success: function (res) {\r\n    console.log(res.fileList);\r\n  }\r\n});\r\n```\r\n\r\n uni.getSavedFileInfo(OBJECT)\r\n获取本地文件的文件信息。此接口只能用于获取已保存到本地的文件。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|x|√|√|√|x|√|\r\n\r\n**OBJECT 参数说明：**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|filePath|String|是|文件路径|\r\n|success|Function|否|接口调用成功的回调函数，返回结果见 success 返回参数说明|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**success 返回参数说明：**\r\n\r\n|参数|类型|说明|\r\n|:-|:-|:-|\r\n|errMsg|String|接口调用结果|\r\n|size|Number|文件大小，以字节为单位。|\r\n|createTime|Number|文件保存时的时间戳，从 `1970/01/01 08:00:00` 到该时刻的秒数。|\r\n\r\n**示例代码：**\r\n\r\n```javascript\r\nuni.getSavedFileInfo({\r\n  filePath: 'unifile://somefile', //仅做示例用，非真正的文件路径\r\n  success: function (res) {\r\n    console.log(res.size);\r\n    console.log(res.createTime);\r\n  }\r\n});\r\n```\r\n\r\n uni.removeSavedFile(OBJECT)\r\n删除本地存储的文件。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|x|√|√|√|√|√|\r\n\r\n**OBJECT 参数说明：**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|filePath|String|是|需要删除的文件路径|\r\n|success|Function|否|接口调用成功的回调函数|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**示例代码：**\r\n\r\n```javascript\r\nuni.getSavedFileList({\r\n  success: function (res) {\r\n    if (res.fileList.length > 0) {\r\n      uni.removeSavedFile({\r\n        filePath: res.fileList[0].filePath,\r\n        complete: function (res) {\r\n          console.log(res);\r\n        }\r\n      });\r\n    }\r\n  }\r\n});\r\n```\r\n\r\n uni.getFileInfo(OBJECT)\r\n获取文件信息\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|√|√|√|√|√|√|\r\n\r\n**OBJECT 参数说明：**\r\n\r\n|参数名|类型|默认值|必填|说明|平台差异说明|\r\n|:-|:-|:-|:-|:-|:-|\r\n|filePath|String||是|本地文件路径||\r\n|digestAlgorithm|String|md5|否|计算文件摘要的算法，可取值 md5、sha1。|微信小程序、App 2.9.0+|\r\n|success|Function||否|接口调用成功的回调函数||\r\n|fail|Function||否|接口调用失败的回调函数||\r\n|complete|Function||否|接口调用结束的回调函数（调用成功、失败都会执行）|&nbsp;|\r\n\r\n**success 返回参数说明：**\r\n\r\n|参数|类型|说明|平台差异说明|\r\n|:-|:-|:-|:-|\r\n|errMsg|String|接口调用结果||\r\n|size|Number|文件大小，以字节为单位。||\r\n|digest|String|按照传入的 digestAlgorithm 计算得出的的文件摘要|微信小程序、App 2.9.0+|\r\n\r\n uni.openDocument(OBJECT)\r\n新开页面打开文档，支持格式：doc, xls, ppt, pdf, docx, xlsx, pptx。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|x|√|√|√|√|√|\r\n\r\n**OBJECT 参数说明：**\r\n\r\n|参数名|类型|必填|说明|平台差异说明|\r\n|:-|:-|:-|:-|\r\n|filePath|String|是|文件路径，可通过 downFile 获得||\r\n|fileType|String|否|文件类型，指定文件类型打开文件，有效值 doc, xls, ppt, pdf, docx, xlsx, pptx|微信小程序|\r\n|success|String|否|接口调用成功的回调函数||\r\n|fail|String|否|接口调用失败的回调函数|微信小程序|\r\n|complete|String|否|接口调用结束的回调函数（调用成功、失败都会执行）|&nbsp;|\r\n\r\n**示例代码：**\r\n\r\n```javascript\r\nuni.downloadFile({\r\n  url: 'https://example.com/somefile.pdf',\r\n  success: function (res) {\r\n    var filePath = res.tempFilePath;\r\n    uni.openDocument({\r\n      filePath: filePath,\r\n      success: function (res) {\r\n        console.log('打开文档成功');\r\n      }\r\n    });\r\n  }\r\n});\r\n```\r\n\r\n**平台差异**\r\n\r\n|平台|打开方式|\r\n|:-|:-|\r\n|小程序|在小程序的入口应用内打开|\r\n|App iOS|在当前应用内打开|\r\n|App Android|调用系统相关应用打开，无相关应用则不能打开|\r\n|H5|使用浏览器打开，当前浏览器不支持则不能打开|\r\n\r\n**Tips**\r\n\r\n- App端，io操作还可以用更强大的plus.io API。[https://www.html5plus.org/doc/zh_cn/io.html](https://www.html5plus.org/doc/zh_cn/io.html)\r\n- App端，打开各种格式的文件，如office、pdf等，还可以用更强大的三方插件，详见[插件市场](https://ext.dcloud.net.cn/search?q=pdf)\r\n- 选择文件上传，uni-app有自带的api：[uni.chooseImage](https://uniapp.dcloud.io/api/media/image?id=chooseimage)和[uni.chooseVideo](https://uniapp.dcloud.io/api/media/video?id=choosevideo)。App端如需选择非媒体文件，可在插件市场搜索[文件选择](https://ext.dcloud.net.cn/search?q=文件选择)，其中Android端可以使用Native.js，无需原生插件，而iOS端需要原生插件。\r\n","p":"command\\文件 - uni.saveFile.html"},{"t":"文件/uni.getFileSystemManager","d":"\n uni.getFileSystemManager()\n\n获取全局唯一的文件管理器\n\n- 微信小程序平台，[规范详情](https://developers.weixin.qq.com/miniprogram/dev/api/wx.getFileSystemManager.html)\n- 字节跳动小程序平台，[规范详情](https://developer.toutiao.com/dev/cn/mini-app/develop/api/file/getfilesystemmanager)\n- QQ小程序平台，[规范详情](https://q.qq.com/wiki/develop/miniprogram/API/file/qq.getFileSystemManager.html)","p":"command\\文件 - uni.getFileSystemManager.html"},{"t":"绘画/uni.createOffscreenCanvas","d":"\n uni.createOffscreenCanvas()\n\n创建离屏 canvas 实例\n\n仅微信小程序平台支持，[规范详情](https://developers.weixin.qq.com/miniprogram/dev/api/wx.createOffscreenCanvas.html)\n","p":"command\\绘画 - uni.createOffscreenCanvas.html"},{"t":"绘画/uni.createCanvasContext","d":" uni.createCanvasContext(canvasId, this)\r\n\r\n 定义\r\n\r\n创建 ```canvas``` 绘图上下文（指定 canvasId）。在自定义组件下，第二个参数传入组件实例this，以操作组件内 ```<canvas/>``` 组件\r\n\r\n**Tip:** 需要指定 canvasId，该绘图上下文只作用于对应的 `<canvas/>`\r\n\r\n 参数\r\n\r\n|参数|类型|说明|\r\n|----|----|-----|\r\n|canvasId|String\t|画布表示，传入定义在 `<canvas/>` 的 canvas-id或id（支付宝小程序是id、其他平台是canvas-id）\t|\r\n|componentInstance|Object\t|自定义组件实例 this ，表示在这个自定义组件下查找拥有 canvas-id 的 `<canvas/>` ，如果省略，则不在任何自定义组件内查找\t|\r\n\r\n 返回值\r\n\r\n[CanvasContext](/api/canvas/CanvasContext.md)","p":"command\\绘画 - uni.createCanvasContext.html"},{"t":"绘画/uni.canvasToTempFilePath","d":" uni.canvasToTempFilePath(object, component)\r\n\r\n把当前画布指定区域的内容导出生成指定大小的图片，并返回文件路径。在自定义组件下，第二个参数传入自定义组件实例，以操作组件内 `<canvas>` 组件。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|√|√|x（[CanvasContext.toTempFilePath](https://opendocs.alipay.com/mini/api/rod3ti)）|√|√|√|\r\n\r\n**object参数说明：**\r\n\r\n|参数\t|类型\t\t|必填\t\t|说明\t|\r\n|---|---|---|---|---|\r\n|x\t|Number\t\t|否\t\t\t|画布x轴起点（默认0）|\t\t\t\t\t\r\n|y\t|Number\t\t|否\t\t\t|画布y轴起点（默认0）|\t\t\t\t\t\r\n|width\t|Number\t\t|否\t\t\t|画布宽度（默认为canvas宽度-x）|\t\t\t\t\t\r\n|height\t|Number\t\t|否\t\t\t|画布高度（默认为canvas高度-y）|\t\t\t\t\t\r\n|destWidth\t|Number\t\t|否\t\t\t|输出图片宽度（默认为 width * 屏幕像素密度）|\t\t\t\t\t\r\n|destHeight\t|Number\t\t|否\t\t\t|输出图片高度（默认为 height * 屏幕像素密度）|\t\t\t\t\t\r\n|canvasId\t|String\t\t|是\t\t\t|画布标识，传入 ``<canvas/>`` 的 canvas-id（支付宝小程序是id、其他平台是canvas-id）|\t\t\t\t\t\t\r\n|fileType\t|String\t\t|否\t\t\t|目标文件的类型，只支持 'jpg' 或 'png'。默认为 'png'|\t\t\r\n|quality\t|Number\t\t|否\t\t\t|图片的质量，取值范围为 (0, 1]，不在范围内时当作1.0处理|\t\t\r\n|success\t|Function\t|否\t\t\t|接口调用成功的回调函数|\t\t\t\t\t\t\r\n|fail\t|Function\t|否\t\t\t|接口调用失败的回调函数|\t\t\t\t\t\t\r\n|complete\t|Function\t|否\t\t|接口调用结束的回调函数（调用成功、失败都会执行）\t\t|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nuni.canvasToTempFilePath({\r\n  x: 100,\r\n  y: 200,\r\n  width: 50,\r\n  height: 50,\r\n  destWidth: 100,\r\n  destHeight: 100,\r\n  canvasId: 'myCanvas',\r\n  success: function(res) {\r\n    // 在H5平台下，tempFilePath 为 base64\r\n    console.log(res.tempFilePath)\r\n  } \r\n})\r\n```\r\n\r\n**Tips**\r\n\r\n- H5端 Canvas 内绘制的图像需要支持跨域访问才能成功。","p":"command\\绘画 - uni.canvasToTempFilePath.html"},{"t":"绘画/uni.canvasPutImageData","d":" uni.canvasPutImageData(OBJECT,this)\r\n\r\n将像素数据绘制到画布的方法，在自定义组件下，第二个参数传入自定义组件实例 this，以操作组件内 `<canvas>` 组件\r\n\r\n**OBJECT参数说明：**\r\n\r\n|参数|类型|必填|说明|最低版本|\r\n|---|---|---|---|--|\r\n|canvasId|String|是|画布标识，传入 ```<canvas />``` 的 canvas-id（支付宝小程序是id、其他平台是canvas-id）||\r\n|data|Uint8ClampedArray|是|图像像素点数据，一维数组，每四项表示一个像素点的rgba||\r\n|x|Number|是|源图像数据在目标画布中的位置偏移量（x 轴方向的偏移量）||\r\n|y|Number|是|源图像数据在目标画布中的位置偏移量（y 轴方向的偏移量）||\r\n|width|Number|是|源图像数据矩形区域的宽度||\r\n|height|Number|否|源图像数据矩形区域的高度||\r\n|success|Function|否|接口调用成功的回调函数||\r\n|fail|Function|否|接口调用失败的回调函数||\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|&nbsp;|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst data = new Uint8ClampedArray([255, 0, 0, 255])\r\nuni.canvasPutImageData({\r\n  canvasId: 'myCanvas',\r\n  x: 0,\r\n  y: 0,\r\n  width: 1,\r\n  data: data,\r\n  success(res) {}\r\n})\r\n```\r\n","p":"command\\绘画 - uni.canvasPutImageData.html"},{"t":"绘画/uni.canvasGetImageData","d":" uni.canvasGetImageData(OBJECT,this)\r\n\r\n返回一个数组，用来描述 canvas 区域隐含的像素数据，在自定义组件下，第二个参数传入自定义组件实例 this，以操作组件内 `<canvas>` 组件。\r\n\r\n**OBJECT参数说明：**\r\n\r\n|参数|类型|必填|说明|\r\n|---|---|---|---|\r\n|canvasId|String|是|画布标识，传入 ```<canvas />``` 的 canvas-id（支付宝小程序是id、其他平台是canvas-id）|\r\n|x|Number|是|将要被提取的图像数据矩形区域的左上角 x 坐标|\r\n|y|Number|是|将要被提取的图像数据矩形区域的左上角 y 坐标|\r\n|width|Number|是|将要被提取的图像数据矩形区域的宽度|\r\n|height|Number|是|将要被提取的图像数据矩形区域的高度|\r\n|success|Function|否|接口调用成功的回调函数|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**success回调返回参数：**\r\n\r\n|参数|类型|说明|\r\n|---|---|---|\r\n|errMsg|String||\r\n|width|Number|图像数据矩形的宽度|\r\n|height|Number|图像数据矩形的高度|\r\n|data|Uint8ClampedArray|图像像素点数据，一维数组，每四项表示一个像素点的rgba|\r\n\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nuni.canvasGetImageData({\r\n  canvasId: 'myCanvas',\r\n  x: 0,\r\n  y: 0,\r\n  width: 100,\r\n  height: 100,\r\n  success(res) {\r\n    console.log(res.width) // 100\r\n    console.log(res.height) // 100\r\n    console.log(res.data instanceof Uint8ClampedArray) // true\r\n    console.log(res.data.length) // 100 * 100 * 4\r\n  }\r\n})\r\n```\r\n\r\n","p":"command\\绘画 - uni.canvasGetImageData.html"},{"t":"绘画/CanvasContext","d":"**属性**\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|√|√|√|√|√|√|\r\n\r\nApp-nvue下如需使用canvas，暂未封装为uni API，可参考[文档](https://github.com/dcloudio/NvueCanvasDemo)使用。\r\n\r\n CanvasContext.fillStyle string\r\n\r\n填充颜色。用法同 [CanvasContext.setFillStyle()](canvascontextsetfillstyle)。\r\n\r\n CanvasContext.strokeStyle string\r\n\r\n边框颜色。用法同 [CanvasContext.setStrokeStyle()](canvascontextsetstrokestyle)。\r\n\r\n CanvasContext.shadowOffsetX number\r\n\r\n阴影相对于形状在水平方向的偏移\r\n\r\n CanvasContext.shadowOffsetY number\r\n\r\n阴影相对于形状在竖直方向的偏移\r\n\r\n CanvasContext.shadowColor number\r\n\r\n阴影的颜色\r\n\r\n CanvasContext.shadowBlur number\r\n\r\n阴影的模糊级别\r\n\r\n CanvasContext.lineWidth number\r\n\r\n线条的宽度。用法同 [CanvasContext.setLineWidth()](canvascontextsetlinewidth)。\r\n\r\n CanvasContext.lineCap number\r\n\r\n线条的端点样式。用法同 [CanvasContext.setLineCap()](canvascontextsetlinecap)。\r\n\r\n CanvasContext.lineJoin number\r\n\r\n线条的交点样式。用法同 [CanvasContext.setLineJoin()](canvascontextsetlinejoin)。\r\n\r\n CanvasContext.miterLimit number\r\n\r\n最大斜接长度。用法同 [CanvasContext.setMiterLimit()](canvascontextsetmiterlimit)。\r\n\r\n CanvasContext.lineDashOffset number\r\n\r\n虚线偏移量，初始值为0\r\n\r\n CanvasContext.font string\r\n\r\n当前字体样式的属性。符合 [CSS font 语法](https://developer.mozilla.org/zh-CN/docs/Web/CSS/font) 的 DOMString 字符串，至少需要提供字体大小和字体族名。默认值为 10px sans-serif。\r\n\r\n CanvasContext.globalAlpha number\r\n\r\n全局画笔透明度。范围 0-1，0 表示完全透明，1 表示完全不透明。\r\n\r\n CanvasContext.globalCompositeOperation string\r\n\r\n在绘制新形状时应用的合成操作的类型。目前安卓版本只适用于 `fill` 填充块的合成，用于 `stroke` 线段的合成效果都是 `source-over`。\r\n\r\n目前支持的操作有\r\n* App和H5端：source-over、destination-over、source-in、destination-in、source-out、destination-out、source-atop、destination-atop、lighter、darker、xor、copy\r\n* 微信小程序安卓端：xor, source-over, source-atop, destination-out, lighter, overlay, darken, lighten, hard-light\r\n* 微信小程序iOS端：xor, source-over, source-atop, destination-over, destination-out, lighter, multiply, overlay, darken, lighten, color-dodge, color-burn, hard-light, soft-light, difference, exclusion, saturation, luminosity\r\n\r\n**方法**\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|√|√|√|√|√|\r\n\r\n CanvasContext.arc\r\n\r\n画一条弧线。创建一个圆可以用 ```arc()``` 方法指定起始弧度为0，终止弧度为 ```2 * Math.PI```。用 ```stroke()``` 或者 ```fill()``` 方法来在 ```canvas``` 中画弧线。\r\n\r\n**参数**\r\n\r\n|参数|类型\t|说明|\r\n|---|---\t|---\t|\r\n|x\t|Number\t|圆的x坐标\t|\r\n|y\t|Number\t|圆的y坐标|\r\n|r|Number\t|圆的半径|\r\n|sAngle\t|Number\t|起始弧度，单位弧度（在3点钟方向）|\r\n|eAngle\t|Number\t|终止弧度|\r\n|counterclockwise\t|Boolean|可选。指定弧度的方向是逆时针还是顺时针。默认是false，即顺时针。|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\n\r\n// Draw coordinates\r\nctx.arc(100, 75, 50, 0, 2 * Math.PI)\r\nctx.setFillStyle('EEEEEE')\r\nctx.fill()\r\n\r\nctx.beginPath()\r\nctx.moveTo(40, 75)\r\nctx.lineTo(160, 75)\r\nctx.moveTo(100, 15)\r\nctx.lineTo(100, 135)\r\nctx.setStrokeStyle('AAAAAA')\r\nctx.stroke()\r\n\r\nctx.setFontSize(12)\r\nctx.setFillStyle('black')\r\nctx.fillText('0', 165, 78)\r\nctx.fillText('0.5*PI', 83, 145)\r\nctx.fillText('1*PI', 15, 78)\r\nctx.fillText('1.5*PI', 83, 10)\r\n\r\n// Draw points\r\nctx.beginPath()\r\nctx.arc(100, 75, 2, 0, 2 * Math.PI)\r\nctx.setFillStyle('lightgreen')\r\nctx.fill()\r\n\r\nctx.beginPath()\r\nctx.arc(100, 25, 2, 0, 2 * Math.PI)\r\nctx.setFillStyle('blue')\r\nctx.fill()\r\n\r\nctx.beginPath()\r\nctx.arc(150, 75, 2, 0, 2 * Math.PI)\r\nctx.setFillStyle('red')\r\nctx.fill()\r\n\r\n// Draw arc\r\nctx.beginPath()\r\nctx.arc(100, 75, 50, 0, 1.5 * Math.PI)\r\nctx.setStrokeStyle('333333')\r\nctx.stroke()\r\n\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/687c12e0-4f28-11eb-bdc1-8bd33eb6adaa.png)\r\n\r\n针对 ```arc(100, 75, 50, 0, 1.5 * Math.PI)```的三个关键坐标如下：\r\n* 绿色: 圆心 (100, 75)\r\n* 红色: 起始弧度 (0)\r\n* 蓝色: 终止弧度 (1.5 * Math.PI)\r\n\r\n CanvasContext.arcTo\r\n\r\n根据控制点和半径绘制圆弧路径。\r\n\r\n```javascript\r\nCanvasContext.arcTo(x1, y1, x2, y2, radius)\r\n```\r\n\r\n**参数**\r\n\r\n|属性值\t|类型\t|说明|\r\n|---\t|---\t|---\t|\r\n|x1|Number\t|第一个控制点的 x 轴坐标|\r\n|y1|Number\t|第一个控制点的 y 轴坐标|\r\n|x2|Number\t|第二个控制点的 x 轴坐标|\r\n|y2|Number\t|第二个控制点的 y 轴坐标|\r\n|radius\t|Number\t|圆弧的半径\t|\r\n\r\n CanvasContext.beginPath\r\n\r\n开始创建一个路径，需要调用fill或者stroke才会使用路径进行填充或描边。\r\n\r\n**Tip:** 在最开始的时候相当于调用了一次 ```beginPath()```。\r\n**Tip:** 同一个路径内的多次```setFillStyle()```、``setStrokeStyle()```、```setLineWidth()```等设置，以最后一次设置为准。\r\n\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\n// begin path\r\nctx.rect(10, 10, 100, 30)\r\nctx.setFillStyle('yellow')\r\nctx.fill()\r\n\r\n// begin another path\r\nctx.beginPath()\r\nctx.rect(10, 40, 100, 30)\r\n\r\n// only fill this rect, not in current path\r\nctx.setFillStyle('blue')\r\nctx.fillRect(10, 70, 100, 30)\r\n\r\nctx.rect(10, 100, 100, 30)\r\n\r\n// it will fill current path\r\nctx.setFillStyle('red')\r\nctx.fill()\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/1b5714b0-4f28-11eb-8a36-ebb87efcf8c0.png)\r\n CanvasContext.bezierCurveTo\r\n\r\n创建三次方贝塞尔曲线路径。\r\n\r\n**Tip:** 曲线的起始点为路径中前一个点。\r\n\r\n**参数**\r\n\r\n|参数\t|类型\t|说明|\r\n|---\t|---\t|---|\r\n|cp1x\t|Number\t|第一个贝塞尔控制点的 x 坐标|\r\n|cp1y\t|Number\t|第一个贝塞尔控制点的 y 坐标|\r\n|cp2x\t|Number\t|第二个贝塞尔控制点的 x 坐标|\r\n|cp2y\t|Number\t|第二个贝塞尔控制点的 y 坐标|\r\n|x|Number\t|结束点的 x 坐标|\r\n|y|Number\t|结束点的 y 坐标|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\n\r\n// Draw points\r\nctx.beginPath()\r\nctx.arc(20, 20, 2, 0, 2 * Math.PI)\r\nctx.setFillStyle('red')\r\nctx.fill()\r\n\r\nctx.beginPath()\r\nctx.arc(200, 20, 2, 0, 2 * Math.PI)\r\nctx.setFillStyle('lightgreen')\r\nctx.fill()\r\n\r\nctx.beginPath()\r\nctx.arc(20, 100, 2, 0, 2 * Math.PI)\r\nctx.arc(200, 100, 2, 0, 2 * Math.PI)\r\nctx.setFillStyle('blue')\r\nctx.fill()\r\n\r\nctx.setFillStyle('black')\r\nctx.setFontSize(12)\r\n\r\n// Draw guides\r\nctx.beginPath()\r\nctx.moveTo(20, 20)\r\nctx.lineTo(20, 100)\r\nctx.lineTo(150, 75)\r\n\r\nctx.moveTo(200, 20)\r\nctx.lineTo(200, 100)\r\nctx.lineTo(70, 75)\r\nctx.setStrokeStyle('AAAAAA')\r\nctx.stroke()\r\n\r\n// Draw quadratic curve\r\nctx.beginPath()\r\nctx.moveTo(20, 20)\r\nctx.bezierCurveTo(20, 100, 200, 100, 200, 20)\r\nctx.setStrokeStyle('black')\r\nctx.stroke()\r\n\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/03cf3750-4f28-11eb-b997-9918a5dda011.png)\r\n\r\n针对 ```moveTo(20, 20)`` ```bezierCurveTo(20, 100, 200, 100, 200, 20)``` 的三个关键坐标如下：\r\n\r\n* 红色：起始点(20, 20)\r\n* 蓝色：两个控制点(20, 100) (200, 100)\r\n* 绿色：终止点(200, 20)\r\n\r\n CanvasContext.clearRect\r\n\r\n清除画布上在该矩形区域内的内容。\r\n\r\n\r\n**参数**\r\n\r\n|参数|类型|说明|\r\n|---\t|---\t|---\t|\r\n|x\t|Number\t|矩形区域左上角的x坐标|\r\n|y\t|Number\t|矩形区域左上角的y坐标|\r\n|width\t|Number\t|矩形区域的宽度|\r\n|height\t|Number\t|矩形区域的高度|\r\n\r\n**示例代码**\r\n\r\nclearRect 并非画一个白色的矩形在地址区域，而是清空，为了有直观感受，对 canvas 加了一层背景色。\r\n\r\n```javascript\r\n<canvas canvas-id=\"myCanvas\" id=\"myCanvas\" style=\"border: 1px solid; background: 123456;\"/>\r\n```\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\nctx.setFillStyle('red')\r\nctx.fillRect(0, 0, 150, 200)\r\nctx.setFillStyle('blue')\r\nctx.fillRect(150, 0, 150, 200)\r\nctx.clearRect(10, 10, 150, 75)\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/05afde30-4f28-11eb-a16f-5b3e54966275.png)\r\n\r\n\r\n CanvasContext.clip\r\n从原始画布中剪切任意形状和尺寸。一旦剪切了某个区域，则所有之后的绘图都会被限制在被剪切的区域内（不能访问画布上的其他区域）。可以在使用 clip() 方法前通过使用 save() 方法对当前画布区域进行保存，并在以后的任意时间对其进行恢复（通过 restore() 方法）。\r\n\r\n**Tip:** 用 setFillStroke() 设置矩形线条的颜色，如果没设置默认是黑色。\r\n\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst context = uni.createCanvasContext('myCanvas')\r\n\r\nuni.downloadFile({\r\n\turl: 'https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/d8590190-4f28-11eb-b680-7980c8a877b8.png',\r\n\tsuccess: function (res) {\r\ncontext.save()\r\ncontext.beginPath()\r\ncontext.arc(96, 96, 48, 0, 2 * Math.PI)\r\ncontext.clip()\r\ncontext.drawImage(res.tempFilePath, 48, 48)\r\n\t\tcontext.restore()\r\n\t\tcontext.draw()\r\n\t}\r\n})\r\n\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/067a3310-4f28-11eb-b997-9918a5dda011.png)\r\n\r\n CanvasContext.closePath\r\n关闭一个路径。\r\n\r\n**Tip:** 关闭路径会连接起点和终点。\r\n**Tip:** 如果关闭路径后没有调用 ```fill()``` 或者 ```stroke()``` 并开启了新的路径，那之前的路径将不会被渲染。\r\n\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\nctx.moveTo(10, 10)\r\nctx.lineTo(100, 10)\r\nctx.lineTo(100, 100)\r\nctx.closePath()\r\nctx.stroke()\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/074e9a10-4f28-11eb-8a36-ebb87efcf8c0.png)\r\n\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\n// begin path\r\nctx.rect(10, 10, 100, 30)\r\nctx.closePath()\r\n\r\n// begin another path\r\nctx.beginPath()\r\nctx.rect(10, 40, 100, 30)\r\n\r\n// only fill this rect, not in current path\r\nctx.setFillStyle('blue')\r\nctx.fillRect(10, 70, 100, 30)\r\n\r\nctx.rect(10, 100, 100, 30)\r\n\r\n// it will fill current path\r\nctx.setFillStyle('red')\r\nctx.fill()\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/02d34b20-4f28-11eb-b680-7980c8a877b8.png)\r\n\r\n CanvasContext.createCircularGradient\r\n创建一个从圆心开始的渐变。返回的 [CanvasGradient](/api/canvas/CanvasGradient) 对象，需要使用 ```CanvasGradient.addColorStop()``` 来指定渐变点，至少要两个。\r\n\r\n**参数**\r\n\r\n|参数\t|类型\t\t|定义\t|\r\n|---\t|---\t|---\t\t|\r\n|x\t\t|Number\t|圆心的x坐标|\r\n|y\t\t|Number\t|圆心的y坐标|\r\n|r\t\t|Number\t|圆的半径\t\t|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\n\r\n// Create circular gradient\r\nconst grd = ctx.createCircularGradient(75, 50, 50)\r\ngrd.addColorStop(0, 'red')\r\ngrd.addColorStop(1, 'white')\r\n\r\n// Fill with gradient\r\nctx.setFillStyle(grd)\r\nctx.fillRect(10, 10, 150, 80)\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/04c3f790-4f28-11eb-8a36-ebb87efcf8c0.png)\r\n\r\n CanvasContext.createLinearGradient\r\n创建一个线性的渐变颜色。返回的 [CanvasGradient](/api/canvas/CanvasGradient) 对象，需要使用 ```CanvasGradient.addColorStop()``` 来指定渐变点，至少要两个。\r\n\r\n**参数**\r\n\r\n|参数\t|类型\t\t|定义\t|\r\n|---\t|---\t|---\t\t|\r\n|x0\t\t|Number\t|起点的x坐标|\r\n|y0\t\t|Number\t|起点的y坐标|\r\n|x1\t\t|Number\t|终点的x坐标|\r\n|y1\t\t|Number\t|终点的y坐标|\r\n\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\n\r\n// Create linear gradient\r\nconst grd = ctx.createLinearGradient(0, 0, 200, 0)\r\ngrd.addColorStop(0, 'red')\r\ngrd.addColorStop(1, 'white')\r\n\r\n// Fill with gradient\r\nctx.setFillStyle(grd)\r\nctx.fillRect(10, 10, 150, 80)\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/24a94010-4f28-11eb-bdc1-8bd33eb6adaa.png)\r\n\r\n CanvasContext.createPattern\r\n对指定的图像创建模式的方法，可在指定的方向上重复元图像\r\n\r\n**参数**\r\n\r\n|参数\t\t|类型\t|说明\t\t\t\t|\r\n|---\t\t|---\t|---\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|image\t\t|String\t|重复的图像源，仅支持包内路径和临时路径\t\t\t\t\t\t\t\t|\r\n|repetition\t|String\t|指定如何重复图像，有效值有: repeat, repeat-x, repeat-y, no-repeat\t|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\nconst pattern = ctx.createPattern('/path/to/image', 'repeat-x')\r\nctx.fillStyle = pattern\r\nctx.fillRect(0, 0, 300, 150)\r\nctx.draw()\r\n```\r\n\r\n CanvasContext.draw\r\n将之前在绘图上下文中的描述（路径、变形、样式）画到 canvas 中。\r\n\r\n**参数**\r\n\r\n|参数|类型|说明|最低版本\t|\r\n|---|---|---|---|\r\n|reserve\t|Boolean\t|非必填。本次绘制是否接着上一次绘制，即reserve参数为false，则在本次调用drawCanvas绘制之前native层应先清空画布再继续绘制；若reserver参数为true，则保留当前画布上的内容，本次调用drawCanvas绘制的内容覆盖在上面，默认 false\t|\t|\r\n|callback\t|Function\t|绘制完成后回调|1.7.0|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\n\r\nctx.setFillStyle('red')\r\nctx.fillRect(10, 10, 150, 100)\r\nctx.draw()\r\nctx.fillRect(50, 50, 150, 100)\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/33d7d100-4f28-11eb-97b7-0dc4655d6e68.png)\r\n\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\n\r\nctx.setFillStyle('red')\r\nctx.fillRect(10, 10, 150, 100)\r\nctx.draw()\r\nctx.fillRect(50, 50, 150, 100)\r\nctx.draw(true)\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/2ad88090-4f28-11eb-8ff1-d5dcf8779628.png)\r\n\r\n CanvasContext.drawImage\r\n绘制图像到画布。\r\n\r\n**参数**\r\n\r\n|参数|类型\t|说明\t\t\t\t|\r\n|---\t|---|---\t|\r\n|imageResource\t|String\t|所要绘制的图片资源\t\t\t\t|\r\n|dx\t|Number\t|图像的左上角在目标canvas上 X 轴的位置\t\t|\r\n|dy\t|Number\t|图像的左上角在目标canvas上 Y 轴的位置\t\t|\r\n|dWidth|Number\t|在目标画布上绘制图像的宽度，允许对绘制的图像进行缩放\t|\r\n|dHeight|Number\t|在目标画布上绘制图像的高度，允许对绘制的图像进行缩放\t|\r\n|sx\t|Number\t|源图像的矩形选择框的左上角 X 坐标\t\t\t|\r\n|sy\t|Number\t|源图像的矩形选择框的左上角 Y 坐标\t\t\t|\r\n|sWidth|Number\t|源图像的矩形选择框的高度\t\t|\r\n|sHeight\t\t|Number\t|源图像的矩形选择框的高度\t\t|\r\n\r\n有三个版本的写法：\r\n\r\n* ```drawImage(dx, dy)```\r\n* ```drawImage(dx, dy, dWidth, dHeight)```\r\n* ```drawImage(sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight)```\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\n\r\nuni.chooseImage({\r\n  success: function(res){\r\n    ctx.drawImage(res.tempFilePaths[0], 0, 0, 150, 100)\r\n    ctx.draw()\r\n  }\r\n})\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/1946d250-4f28-11eb-8a36-ebb87efcf8c0.png)\r\n\r\n CanvasContext.fill\r\n对当前路径中的内容进行填充。默认的填充色为黑色。\r\n\r\n**Tip:** 如果当前路径没有闭合，```fill()``` 方法会将起点和终点进行连接，然后填充，详情见例一。\r\n\r\n**Tip:** ```fill()``` 填充的的路径是从 ```beginPath()``` 开始计算，但是不会将 ```fillRect()``` 包含进去，详情见例二。\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\nctx.moveTo(10, 10)\r\nctx.lineTo(100, 10)\r\nctx.lineTo(100, 100)\r\nctx.fill()\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/1a366270-4f28-11eb-a16f-5b3e54966275.png)\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\n// begin path\r\nctx.rect(10, 10, 100, 30)\r\nctx.setFillStyle('yellow')\r\nctx.fill()\r\n\r\n// begin another path\r\nctx.beginPath()\r\nctx.rect(10, 40, 100, 30)\r\n\r\n// only fill this rect, not in current path\r\nctx.setFillStyle('blue')\r\nctx.fillRect(10, 70, 100, 30)\r\n\r\nctx.rect(10, 100, 100, 30)\r\n\r\n// it will fill current path\r\nctx.setFillStyle('red')\r\nctx.fill()\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/1b5714b0-4f28-11eb-8a36-ebb87efcf8c0.png)\r\n\r\n CanvasContext.fillRect\r\n填充一个矩形。\r\n\r\n**Tip:** 用 ```setFillStyle()``` 设置矩形的填充色，如果没设置默认是黑色。\r\n\r\n**参数**\r\n\r\n|参数\t|类型\t|定义\t\t\t\t\t|\r\n|---\t|---\t|---\t\t\t\t\t|\r\n|x\t\t|Number\t|矩形路径左上角的x坐标\t|\r\n|y\t\t|Number\t|矩形路径左上角的y坐标\t|\r\n|width\t|Number\t|矩形路径的宽度\t\t\t|\r\n|height\t|Number\t|矩形路径的高度\t\t\t|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\nctx.setFillStyle('red')\r\nctx.fillRect(10, 10, 150, 75)\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/1c4656b0-4f28-11eb-a16f-5b3e54966275.png)\r\n\r\n CanvasContext.fillText\r\n在画布上绘制被填充的文本。\r\n\r\n**参数**\r\n\r\n|参数\t\t|类型\t|说明\t\t\t\t\t\t|\r\n|---\t\t|---\t|---\t\t\t\t\t\t|\r\n|text\t\t|String\t|在画布上输出的文本\t\t\t|\r\n|x\t\t\t|Number\t|绘制文本的左上角x坐标位置\t|\r\n|y\t\t\t|Number\t|绘制文本的左上角y坐标位置\t|\r\n|maxWidth\t|Number\t|需要绘制的最大宽度，可选\t|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\n\r\nctx.setFontSize(20)\r\nctx.fillText('Hello', 20, 20)\r\nctx.fillText('MINA', 100, 100)\r\n\r\nctx.draw()\r\n```\r\n\r\n\r\n CanvasContext.lineTo\r\n增加一个新点，然后创建一条从上次指定点到目标点的线。\r\n\r\n**Tip:** 用 ```stroke()``` 方法来画线条\r\n\r\n**参数**\r\n\r\n|参数\t|类型|说明\t\t\t|\r\n|---\t|---\t|---\t|\r\n|x\t\t|Number\t|目标位置的x坐标|\r\n|y\t\t|Number\t|目标位置的y坐标|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\nctx.moveTo(10, 10)\r\nctx.rect(10, 10, 100, 50)\r\nctx.lineTo(110, 60)\r\nctx.stroke()\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/27097730-4f28-11eb-bdc1-8bd33eb6adaa.png)\r\n\r\n CanvasContext.measureText\r\n测量文本尺寸信息，目前仅返回文本宽度。同步接口。（App 端 2.8.12+ 支持）\r\n\r\n**参数**\r\n\r\n|参数\t|类型\t|说明\t\t\t|\r\n|---\t|---\t|---\t\t\t|\r\n|text\t|String\t|要测量的文本\t|\r\n\r\n**返回**\r\n\r\n返回 ```TextMetrics``` 对象，结构如下：\r\n\r\n|参数\t|类型\t|说明\t\t|\r\n|---\t|---\t|---\t\t\t|\r\n|width\t|Number\t|文本的宽度\t|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\nctx.font = 'italic bold 20px cursive'\r\nconst metrics = ctx.measureText('Hello World')\r\nconsole.log(metrics.width)\r\n```\r\n\r\n CanvasContext.moveTo\r\n把路径移动到画布中的指定点，不创建线条。用 ```stroke()``` 方法来画线条。\r\n\r\n**参数**\r\n\r\n|参数\t|类型|说明\t\t\t|\r\n|---\t|---\t|---\t|\r\n|x\t\t|Number\t|目标位置的x坐标|\r\n|y\t\t|Number\t|目标位置的y坐标|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\nctx.moveTo(10, 10)\r\nctx.lineTo(100, 10)\r\n\r\nctx.moveTo(10, 50)\r\nctx.lineTo(100, 50)\r\nctx.stroke()\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/2945d2a0-4f28-11eb-bdc1-8bd33eb6adaa.png)\r\n\r\n CanvasContext.quadraticCurveTo\r\n创建二次贝塞尔曲线路径。曲线的起始点为路径中前一个点。\r\n\r\n**参数**\r\n\r\n|参数\t|类型\t|说明\t\t\t\t|\r\n|---\t|---\t|---\t\t\t\t|\r\n|cpx\t|Number\t|贝塞尔控制点的x坐标|\r\n|cpy\t|Number\t|贝塞尔控制点的y坐标|\r\n|x\t\t|Number\t|结束点的x坐标\t\t|\r\n|y\t\t|Number\t|结束点的y坐标\t\t|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\n\r\n// Draw points\r\nctx.beginPath()\r\nctx.arc(20, 20, 2, 0, 2 * Math.PI)\r\nctx.setFillStyle('red')\r\nctx.fill()\r\n\r\nctx.beginPath()\r\nctx.arc(200, 20, 2, 0, 2 * Math.PI)\r\nctx.setFillStyle('lightgreen')\r\nctx.fill()\r\n\r\nctx.beginPath()\r\nctx.arc(20, 100, 2, 0, 2 * Math.PI)\r\nctx.setFillStyle('blue')\r\nctx.fill()\r\n\r\nctx.setFillStyle('black')\r\nctx.setFontSize(12)\r\n\r\n// Draw guides\r\nctx.beginPath()\r\nctx.moveTo(20, 20)\r\nctx.lineTo(20, 100)\r\nctx.lineTo(200, 20)\r\nctx.setStrokeStyle('AAAAAA')\r\nctx.stroke()\r\n\r\n// Draw quadratic curve\r\nctx.beginPath()\r\nctx.moveTo(20, 20)\r\nctx.quadraticCurveTo(20, 100, 200, 20)\r\nctx.setStrokeStyle('black')\r\nctx.stroke()\r\n\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/2a0a0d00-4f28-11eb-bd01-97bc1429a9ff.png)\r\n\r\n针对 ```moveTo(20, 20)`` ```quadraticCurveTo(20, 100, 200, 20)``` 的三个关键坐标如下：\r\n\r\n* 红色：起始点(20, 20)\r\n* 蓝色：控制点(20, 100)\r\n* 绿色：终止点(200, 20)\r\n\r\n CanvasContext.rect\r\n创建一个矩形。\r\n\r\n**Tip:** 用 fill() 或者 stroke() 方法将矩形真正的画到 canvas 中。\r\n\r\n**参数**\r\n\r\n|参数\t|类型\t|说明\t\t\t\t|\r\n|---\t|---\t|---\t\t\t\t\t|\r\n|x\t\t|Number\t|矩形路径左上角的x坐标\t|\r\n|y\t\t|Number\t|矩形路径左上角的y坐标\t|\r\n|width\t|Number\t|矩形路径的宽度\t\t\t|\r\n|height\t|Number\t|矩形路径的高度\t\t\t|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\nctx.rect(10, 10, 150, 75)\r\nctx.setFillStyle('red')\r\nctx.fill()\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/1c4656b0-4f28-11eb-a16f-5b3e54966275.png)\r\n\r\n CanvasContext.restore\r\n恢复之前保存的绘图上下文。\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\n\r\n// save the default fill style\r\nctx.save() \r\nctx.setFillStyle('red')\r\nctx.fillRect(10, 10, 150, 100)\r\n\r\n// restore to the previous saved state\r\nctx.restore()\r\nctx.fillRect(50, 50, 150, 100)\r\n\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/2c8d0e60-4f28-11eb-8ff1-d5dcf8779628.png)\r\n\r\n CanvasContext.rotate\r\n以原点为中心，原点可以用 translate方法修改。顺时针旋转当前坐标轴。多次调用rotate，旋转的角度会叠加。\r\n\r\n**参数**\r\n\r\n|参数\t|类型\t|说明\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|---\t|---\t|---\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|rotate\t|Number\t|旋转角度，以弧度计(degrees * Math.PI/180；degrees范围为0~360)\t|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\n\r\nctx.strokeRect(100, 10, 150, 100)\r\nctx.rotate(20 * Math.PI / 180)\r\nctx.strokeRect(100, 10, 150, 100)\r\nctx.rotate(20 * Math.PI / 180)\r\nctx.strokeRect(100, 10, 150, 100)\r\n\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/2bbd8960-4f28-11eb-bd01-97bc1429a9ff.png)\r\n\r\n CanvasContext.save\r\n保存当前的绘图上下文。\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = wx.createCanvasContext('myCanvas')\r\n\r\n// save the default fill style\r\nctx.save()\r\nctx.setFillStyle('red')\r\nctx.fillRect(10, 10, 150, 100)\r\n\r\n// restore to the previous saved state\r\nctx.restore()\r\nctx.fillRect(50, 50, 150, 100)\r\n\r\nctx.draw()\r\n```\r\n\r\n CanvasContext.scale\r\n在调用```scale```方法后，之后创建的路径其横纵坐标会被缩放。多次调用```scale```，倍数会相乘。\r\n\r\n**参数**\r\n\r\n|参数\t\t|类型\t|说明\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|---\t\t|---\t|---\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|scaleWidth\t|Number\t|横坐标缩放的倍数 (1 = 100%，0.5 = 50%，2 = 200%)\t|\r\n|scaleHeight|Number\t|纵坐标轴缩放的倍数 (1 = 100%，0.5 = 50%，2 = 200%)\t|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\n\r\nctx.strokeRect(10, 10, 25, 15)\r\nctx.scale(2, 2)\r\nctx.strokeRect(10, 10, 25, 15)\r\nctx.scale(2, 2)\r\nctx.strokeRect(10, 10, 25, 15)\r\n\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/2d528140-4f28-11eb-8ff1-d5dcf8779628.png)\r\n\r\n CanvasContext.setFillStyle\r\n设置填充色，如果没有设置 fillStyle，默认颜色为 black。\r\n\r\n**语法**\r\n\r\n```javascript\r\ncanvasContext.setFillStyle(color)\r\ncanvasContext.fillStyle = color\r\n```\r\n\r\n**参数**\r\n\r\n|参数\t|类型|定义\t\t|说明|\r\n|---|---|---|---|\r\n|color|Color|Gradient Object|填充色\t|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\nctx.setFillStyle('red')\r\nctx.fillRect(10, 10, 150, 75)\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/1c4656b0-4f28-11eb-a16f-5b3e54966275.png)\r\n\r\n CanvasContext.setFontSize\r\n设置字体的字号。\r\n\r\n|参数\t|类型\t|说明\t\t\t\t\t|\r\n|---\t|---\t|---\t\t\t\t\t|\r\n|fontSize\t|Number\t|字体的字号|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\n\r\nctx.setFontSize(20)\r\nctx.fillText('20', 20, 20)\r\nctx.setFontSize(30)\r\nctx.fillText('30', 40, 40)\r\nctx.setFontSize(40)\r\nctx.fillText('40', 60, 60)\r\nctx.setFontSize(50)\r\nctx.fillText('50', 90, 90)\r\n\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/1855bb90-4f28-11eb-a16f-5b3e54966275.png)\r\n\r\n\r\n CanvasContext.setGlobalAlpha\r\n设置全局画笔透明度。\r\n\r\n**参数**\r\n\r\n|参数\t|类型\t|范围|说明\t\t\t\t\t\t\t\t\t\t|\r\n|---\t|---\t|---\t|---\t\t\t\t\t\t\t\t\t|\r\n|alpha\t|Number\t|0~1\t|透明度，0 表示完全透明，1 表示完全不透明\t|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\n\r\nctx.setFillStyle('red')\r\nctx.fillRect(10, 10, 150, 100)\r\nctx.setGlobalAlpha(0.2)\r\nctx.setFillStyle('blue')\r\nctx.fillRect(50, 50, 150, 100)\r\nctx.setFillStyle('yellow')\r\nctx.fillRect(100, 100, 150, 100)\r\n\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/23c43740-4f28-11eb-bdc1-8bd33eb6adaa.png)\r\n\r\n CanvasContext.setLineCap\r\n设置线条的端点样式。\r\n\r\n**参数**\r\n\r\n|参数\t|类型\t\t\t\t\t\t|说明\t\t\t\t|\r\n|---\t|---\t\t\t\t\t\t|---\t\t\t\t|\r\n|lineCap|String\t|'butt'、'round'、'square'\t|线条的结束端点样式\t|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\nctx.beginPath()\r\nctx.moveTo(10, 10)\r\nctx.lineTo(150, 10)\r\nctx.stroke()\r\n\r\nctx.beginPath()\r\nctx.setLineCap('butt')\r\nctx.setLineWidth(10)\r\nctx.moveTo(10, 30)\r\nctx.lineTo(150, 30)\r\nctx.stroke()\r\n\r\nctx.beginPath()\r\nctx.setLineCap('round')\r\nctx.setLineWidth(10)\r\nctx.moveTo(10, 50)\r\nctx.lineTo(150, 50)\r\nctx.stroke()\r\n\r\nctx.beginPath()\r\nctx.setLineCap('square')\r\nctx.setLineWidth(10)\r\nctx.moveTo(10, 70)\r\nctx.lineTo(150, 70)\r\nctx.stroke()\r\n\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/2577dab0-4f28-11eb-bdc1-8bd33eb6adaa.png)\r\n\r\n CanvasContext.setLineDash\r\n设置线条宽度。\r\n\r\n**参数**\r\n\r\n|参数\t|类型\t|定义\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|---\t|---\t|---\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|pattern|Array\t|一组描述交替绘制线段和间距（坐标空间单位）长度的数字\t|\r\n|offset\t|Number\t|虚线偏移量\t\t\t\t\t\t\t\t\t\t\t\t|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\n\r\nctx.setLineDash([10, 20], 5);\r\n\r\nctx.beginPath();\r\nctx.moveTo(0,100);\r\nctx.lineTo(400, 100);\r\nctx.stroke();\r\n\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/2e1d4b50-4f28-11eb-8ff1-d5dcf8779628.png)\r\n\r\n CanvasContext.setLineJoin\r\n设置线条的交点样式。\r\n\r\n**参数**\r\n\r\n|参数\t|类型\t\t\t\t\t\t|范围\t\t\t\t|说明|\r\n|---\t|---\t\t\t\t\t\t|---\t\t\t\t|---|\r\n|lineJoin\t|String\t|'bevel'、'round'、'miter'\t|线条的结束交点样式\t|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\nctx.beginPath()\r\nctx.moveTo(10, 10)\r\nctx.lineTo(100, 50)\r\nctx.lineTo(10, 90)\r\nctx.stroke()\r\n\r\nctx.beginPath()\r\nctx.setLineJoin('bevel')\r\nctx.setLineWidth(10)\r\nctx.moveTo(50, 10)\r\nctx.lineTo(140, 50)\r\nctx.lineTo(50, 90)\r\nctx.stroke()\r\n\r\nctx.beginPath()\r\nctx.setLineJoin('round')\r\nctx.setLineWidth(10)\r\nctx.moveTo(90, 10)\r\nctx.lineTo(180, 50)\r\nctx.lineTo(90, 90)\r\nctx.stroke()\r\n\r\nctx.beginPath()\r\nctx.setLineJoin('miter')\r\nctx.setLineWidth(10)\r\nctx.moveTo(130, 10)\r\nctx.lineTo(220, 50)\r\nctx.lineTo(130, 90)\r\nctx.stroke()\r\n\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/264f9d10-4f28-11eb-bd01-97bc1429a9ff.png)\r\n\r\n CanvasContext.setLineWidth\r\n设置线条的宽度。\r\n\r\n**参数**\r\n\r\n|参数\t\t|类型\t|说明\t\t\t\t\t|\r\n|---\t\t|---\t|---\t\t\t\t\t|\r\n|lineWidth\t|Number\t|线条的宽度(单位是px)\t|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\nctx.beginPath()\r\nctx.moveTo(10, 10)\r\nctx.lineTo(150, 10)\r\nctx.stroke()\r\n\r\nctx.beginPath()\r\nctx.setLineWidth(5)\r\nctx.moveTo(10, 30)\r\nctx.lineTo(150, 30)\r\nctx.stroke()\r\n\r\nctx.beginPath()\r\nctx.setLineWidth(10)\r\nctx.moveTo(10, 50)\r\nctx.lineTo(150, 50)\r\nctx.stroke()\r\n\r\nctx.beginPath()\r\nctx.setLineWidth(15)\r\nctx.moveTo(10, 70)\r\nctx.lineTo(150, 70)\r\nctx.stroke()\r\n\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/27d356e0-4f28-11eb-bd01-97bc1429a9ff.png)\r\n\r\n CanvasContext.setMiterLimit\r\n设置最大斜接长度，斜接长度指的是在两条线交汇处内角和外角之间的距离。 当 ``setLineJoin()`` 为 miter 时才有效。超过最大倾斜长度的，连接处将以 lineJoin 为 bevel 来显示。\r\n\r\n**参数**\r\n\r\n|参数\t\t|类型\t|说明\t\t\t|\r\n|---\t\t|---\t|---\t\t\t|\r\n|miterLimit\t|Number\t|最大斜接长度\t|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\nctx.beginPath()\r\nctx.setLineWidth(10)\r\nctx.setLineJoin('miter')\r\nctx.setMiterLimit(1)\r\nctx.moveTo(10, 10)\r\nctx.lineTo(100, 50)\r\nctx.lineTo(10, 90)\r\nctx.stroke()\r\n\r\nctx.beginPath()\r\nctx.setLineWidth(10)\r\nctx.setLineJoin('miter')\r\nctx.setMiterLimit(2)\r\nctx.moveTo(50, 10)\r\nctx.lineTo(140, 50)\r\nctx.lineTo(50, 90)\r\nctx.stroke()\r\n\r\nctx.beginPath()\r\nctx.setLineWidth(10)\r\nctx.setLineJoin('miter')\r\nctx.setMiterLimit(3)\r\nctx.moveTo(90, 10)\r\nctx.lineTo(180, 50)\r\nctx.lineTo(90, 90)\r\nctx.stroke()\r\n\r\nctx.beginPath()\r\nctx.setLineWidth(10)\r\nctx.setLineJoin('miter')\r\nctx.setMiterLimit(4)\r\nctx.moveTo(130, 10)\r\nctx.lineTo(220, 50)\r\nctx.lineTo(130, 90)\r\nctx.stroke()\r\n\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/289176c0-4f28-11eb-bd01-97bc1429a9ff.png)\r\n\r\n CanvasContext.setShadow\r\n设置阴影样式。如果没有设置，offsetX 默认值为0， offsetY 默认值为0， blur 默认值为0，color 默认值为 black。\r\n\r\n**参数**\r\n\r\n|参数|类型|定义\t\t|说明\t\t\t\t|\r\n|---|---|---\t\t|---\t\t\t\t|\r\n|offsetX|Number\t|\t\t|阴影相对于形状在水平方向的偏移\t|\r\n|offsetY|Number\t|\t\t|阴影相对于形状在竖直方向的偏移\t|\r\n|blur|Number\t|0~100\t|阴影的模糊级别，数值越大越模糊\t|\r\n|color\t|Color\t|\t\t|阴影的颜色\t\t\t|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\nctx.setFillStyle('red')\r\nctx.setShadow(10, 50, 50, 'blue')\r\nctx.fillRect(10, 10, 150, 75)\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/308068a0-4f28-11eb-b997-9918a5dda011.png)\r\n\r\n CanvasContext.setStrokeStyle\r\n设置边框颜色。如果没有设置 fillStyle，默认颜色为 black。\r\n\r\n**参数**\r\n\r\n|参数\t|类型\t|定义|说明\t\t|\r\n|---\t|---\t|---|---\t\t|\r\n|color|Color|Gradient Object|填充色\t|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\nctx.setStrokeStyle('red')\r\nctx.strokeRect(10, 10, 150, 75)\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/3302cdc0-4f28-11eb-97b7-0dc4655d6e68.png)\r\n\r\n CanvasContext.setTextAlign\r\n用于设置文字的对齐\r\n\r\n|参数\t|类型\t|定义|\r\n|---\t|---\t|---|\r\n|align\t|String\t|可选值 'left'、'center'、'right'\t|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\n\r\nctx.setStrokeStyle('red')\r\nctx.moveTo(150, 20)\r\nctx.lineTo(150, 170)\r\nctx.stroke()\r\n\r\nctx.setFontSize(15)\r\nctx.setTextAlign('left')\r\nctx.fillText('textAlign=left', 150, 60)\r\n\r\nctx.setTextAlign('center')\r\nctx.fillText('textAlign=center', 150, 80)\r\n\r\nctx.setTextAlign('right')\r\nctx.fillText('textAlign=right', 150, 100)\r\n\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/2ee492f0-4f28-11eb-bdc1-8bd33eb6adaa.png)\r\n\r\n CanvasContext.setTextBaseline\r\n用于设置文字的水平对齐\r\n\r\n**参数**\r\n\r\n|参数\t|类型|说明|\r\n|---\t|---|---|\r\n|textBaseline\t|String\t|可选值 'top'、'bottom'、'middle'、'normal'\t|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\n\r\nctx.setStrokeStyle('red')\r\nctx.moveTo(5, 75)\r\nctx.lineTo(295, 75)\r\nctx.stroke()\r\n\r\nctx.setFontSize(20)\r\n\r\nctx.setTextBaseline('top')\r\nctx.fillText('top', 5, 75)\r\n\r\nctx.setTextBaseline('middle')\r\nctx.fillText('middle', 50, 75)\r\n\r\nctx.setTextBaseline('bottom')\r\nctx.fillText('bottom', 120, 75)\r\n\r\nctx.setTextBaseline('normal')\r\nctx.fillText('normal', 200, 75)\r\n\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/2fba3270-4f28-11eb-bdc1-8bd33eb6adaa.png)\r\n\r\n CanvasContext.setTransform\r\n使用矩阵重新设置（覆盖）当前变换的方法\r\n\r\n**语法**\r\n\r\n```javascript\r\ncanvasContext.setTransform(scaleX, skewX, skewY, scaleY, translateX, translateY)\r\n```\r\n\r\n**参数**\r\n\r\n|参数\t\t|类型\t|说明\t\t|\r\n|---\t\t|---\t|---\t\t|\r\n|scaleX\t\t|Number\t|水平缩放\t|\r\n|skewX\t\t|Number\t|水平倾斜\t|\r\n|skewY\t\t|Number\t|垂直倾斜\t|\r\n|scaleY\t\t|Number\t|垂直缩放\t|\r\n|translateX\t|Number\t|水平移动\t|\r\n|translateY\t|Number\t|垂直移动\t|\r\n\r\n CanvasContext.stroke\r\n画出当前路径的边框。默认颜色色为黑色。\r\n\r\n**Tip:** ``stroke()`` 描绘的的路径是从 ```beginPath()``` 开始计算，但是不会将 ```strokeRect()``` 包含进去，详情见例二。\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\nctx.moveTo(10, 10)\r\nctx.lineTo(100, 10)\r\nctx.lineTo(100, 100)\r\nctx.stroke()\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/31473b10-4f28-11eb-bdc1-8bd33eb6adaa.png)\r\n\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\n// begin path\r\nctx.rect(10, 10, 100, 30)\r\nctx.setStrokeStyle('yellow')\r\nctx.stroke()\r\n\r\n// begin another path\r\nctx.beginPath()\r\nctx.rect(10, 40, 100, 30)\r\n\r\n// only stoke this rect, not in current path\r\nctx.setStrokeStyle('blue')\r\nctx.strokeRect(10, 70, 100, 30)\r\n\r\nctx.rect(10, 100, 100, 30)\r\n\r\n// it will stroke current path\r\nctx.setStrokeStyle('red')\r\nctx.stroke()\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/322c1cd0-4f28-11eb-bdc1-8bd33eb6adaa.png)\r\n\r\n CanvasContext.strokeRect\r\n画一个矩形(非填充)。用 `setFillStroke()` 设置边框颜色，如果没设置默认是黑色。\r\n\r\n**参数**\r\n\r\n|参数\t|类型\t|范围\t|说明\t\t\t\t\t|\r\n|---\t|---\t|---\t|---\t\t\t\t\t|\r\n|x\t\t|Number\t|\t\t|矩形路径左上角的x坐标\t|\r\n|y\t\t|Number\t|\t\t|矩形路径左上角的y坐标\t|\r\n|width\t|Number\t|\t\t|矩形路径的宽度\t\t\t|\r\n|height\t|Number\t|\t\t|矩形路径的高度\t\t\t|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\nctx.setStrokeStyle('red')\r\nctx.strokeRect(10, 10, 150, 75)\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/3302cdc0-4f28-11eb-97b7-0dc4655d6e68.png)\r\n\r\n\r\n CanvasContext.strokeText\r\n给定的 (x, y) 位置绘制文本描边的方法\r\n\r\n**语法**\r\n\r\n```javascript\r\ncanvasContext.strokeText(text, x, y, maxWidth)\r\n```\r\n\r\n\r\n**参数**\r\n\r\n|参数\t|类型\t\t|说明\t\t\t\t\t\t|\r\n|---\t|---\t\t|---\t\t\t\t\t\t|\r\n|text\t\t|String\t|要绘制的文本\t\t\t\t|\r\n|x\t\t\t|Number\t|文本起始点的 x 轴坐标\t\t|\r\n|y\t\t\t|Number\t|文本起始点的 y 轴坐标\t\t|\r\n|maxWidth\t|Number\t|需要绘制的最大宽度，可选\t|\r\n\r\n CanvasContext.transform\r\n使用矩阵多次叠加当前变换的方法。\r\n\r\n**参数**\r\n\r\n|参数\t\t|类型\t|说明\t\t|\r\n|---\t\t|---\t|---\t\t|\r\n|scaleX\t\t|Number\t|水平缩放\t|\r\n|skewX\t\t|Number\t|水平倾斜\t|\r\n|skewY\t\t|Number\t|垂直倾斜\t|\r\n|scaleY\t\t|Number\t|垂直缩放\t|\r\n|translateX\t|Number\t|水平移动\t|\r\n|translateY\t|Number\t|垂直移动\t|\r\n\r\n CanvasContext.translate\r\n对当前坐标系的原点(0, 0)进行变换，默认的坐标系原点为页面左上角。\r\n\r\n**参数**\r\n\r\n|参数\t|类型\t|说明\t\t\t|\r\n|---\t|---\t|---\t\t\t|\r\n|x\t\t|Number\t|水平坐标平移量\t|\r\n|y\t\t|Number\t|竖直坐标平移量\t|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\n\r\nctx.strokeRect(10, 10, 150, 100)\r\nctx.translate(20, 20)\r\nctx.strokeRect(10, 10, 150, 100)\r\nctx.translate(20, 20)\r\nctx.strokeRect(10, 10, 150, 100)\r\n\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/34aef720-4f28-11eb-97b7-0dc4655d6e68.png)\r\n","p":"command\\绘画 - CanvasContext.html"},{"t":"绘画/CanvasGradient","d":" CanvasGradient.addColorStop(stop,color)\r\n\r\n创建一个颜色的渐变点。\r\n- 小于最小 stop 的部分会按最小 stop 的 color 来渲染，大于最大 stop 的部分会按最大 stop 的 color 来渲染。\r\n\r\n- 需要使用 ```addColorStop()``` 来指定渐变点，至少要两个。\r\n\r\n 参数\r\n\r\n|参数|类型\t|定义\t|\r\n|---|---|---\t|\r\n|stop\t|Number(0-1)|表示渐变点在起点和终点中的位置\t|\r\n|color\t|Color\t|渐变点的颜色|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nconst ctx = uni.createCanvasContext('myCanvas')\r\n\r\n// Create circular gradient\r\nconst grd = ctx.createLinearGradient(30, 10, 120, 10)\r\ngrd.addColorStop(0, 'red')\r\ngrd.addColorStop(0.16, 'orange')\r\ngrd.addColorStop(0.33, 'yellow')\r\ngrd.addColorStop(0.5, 'green')\r\ngrd.addColorStop(0.66, 'cyan')\r\ngrd.addColorStop(0.83, 'blue')\r\ngrd.addColorStop(1, 'purple')\r\n\r\n// Fill with gradient\r\nctx.setFillStyle(grd)\r\nctx.fillRect(10, 10, 150, 80)\r\nctx.draw()\r\n```\r\n\r\n![uniapp](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/d1e88440-4f26-11eb-bd01-97bc1429a9ff.png)\r\n\r\n","p":"command\\绘画 - CanvasGradient.html"},{"t":"广告/激励视频广告","d":"**激励视频广告**\n\n 简介\n\n激励视频广告，是cpm收益最高的广告形式。\n\n手机用户观看几十秒视频广告，在广告播放完毕后可获得应用开发商提供的奖励，而应用开发商则可以从广告平台获取不菲的广告收入。\n\n![](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/23fcff30-441f-11eb-b680-7980c8a877b8.png)\n\n与开屏、信息流等广告变现方式不同，激励视频收益高、但场景设计和编程工作量也较高。\n\n激励视频广告的场景灵活多样：\n- 游戏内看广告复活、看广告拿高级道具\n- 合成类游戏，看广告获得道具，比如各种养龙、养凤凰、养牛、养蟹......\n- 走路赚钱、看短视频赚钱、猜歌赚钱等应用也非常多\n- 网赚应用中，做各种任务赚钱，或者想要接赚钱的任务，前提是观看激励视频\n- 增值内容消费，比如小说、电影看一半，剩下的需要看广告后才能继续\n- 区块链应用融合激励视频，比如看广告提高收益或提高挖矿成功率\n\n激励视频还经常和邀请裂变结合在一起，应用开发者为用户设计邀请好友的奖励，让用户有动力邀请更多用户使用这个应用。\n\n激励视频是造富神器。行业经常出现几个人的团队，月收入百万的奇迹。均是因为良好的设计了激励场景和裂变模型。\n\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|√（2.5.11+）|x|√|x|x|√（1.57.0+）|√（0.1.26+）|\n\n- app端的广告源由腾讯优量汇、头条穿山甲、快手等广告联盟提供，DCloud负责聚合\n- 小程序端的广告由小程序平台提供\n\n**开通配置广告**\n\n开通广告步骤：\n1. 开通广告\n需在广告平台后台操作：\n    * App平台：[https://uniad.dcloud.net.cn/](https://uniad.dcloud.net.cn/)\n    * 小程序平台：在各自的小程序管理后台操作。\n2. 申请广告位id\n在各位后台申请广告位id\n3. App端打包后生效，打包时必须选择要集成的广告SDK（优量汇、穿山甲、快手）。\n\n\n激励视频广告组件是原生组件，层级最高，会覆盖在普通前端组件上。\n\n\n 语法\n\n`uni.createRewardedVideoAd(options)`\n\n 参数说明\noptions 为 object 类型，属性如下：\n\n|属性名\t\t|类型\t\t|必填\t|描述\t\t\t|最低支持版本\t|\n|:-:|:-:|:-:|:-:|:-:|\n|adpid\t  |string\t|\t是|广告位 id |App 2.5.11+|\n|adUnitId\t|string\t|\t是|广告位 id |微信小程序2.6.0+, QQ0.1.26+， 字节跳动1.57.0+|\n\n\n 返回值\n\n返回值为 RewarededVideoAd 类型，属性如下：\n\n|属性名|类型|描述|最低支持版本|\n|:-:|:-:|:-:|:-:|\n|show|Function|广告创建后默认是隐藏的，可以通过该方法显示广告|App 2.5.11+, 微信小程序2.6.0+, QQ0.1.26+，字节跳动1.57.0+|\n|onLoad|Function|绑定广告 load 事件的监听器|App 2.5.11+, 微信小程序2.6.0+, QQ0.1.26+，字节跳动1.57.0+|\n|offLoad|Function|解除绑定 load 事件的监听器|QQ0.1.26+，字节跳动1.57.0+|\n|load|Function|当广告素材加载出现错误时，可以通过 load 方法手动加载|App 2.5.11+, 微信小程序2.6.0+, QQ0.1.26+，字节跳动1.57.0+|\n|onError|Function|绑定 error 事件的监听器\t|App 2.5.11+, 微信小程序2.6.0+, QQ0.1.26+，字节跳动1.57.0+|\n|offError|Function|解除绑定 error 事件的监听器|QQ0.1.26+，字节跳动1.57.0+|\n|onClose|Function|绑定 close 事件的监听器|App 2.5.11+, 微信小程序2.6.0+, QQ0.1.26+，字节跳动1.57.0+|\n|offClose|Function|解除绑定 close 事件的监听器|QQ0.1.26+，字节跳动1.57.0+|\n\n\n 广告创建\n\n开发者可以调用 `uni.createRewardedVideoAd` 创建激励视频广告组件。\n\n激励视频广告组件默认是隐藏的，因此可以提前创建，以提前初始化组件。开发者可以在页面的 `onReady` 事件回调中创建广告实例，并在该页面的生命周期内重复调用该广告实例。\n\n```html\n<script>\n    export default {\n        data() {\n            return {\n                title: 'createRewardedVideoAd'\n            }\n        },\n        onReady() {\n          this._isLoaded = false\n          rewardedVideoAd = this._rewardedVideoAd = uni.createRewardedVideoAd({ adpid: '1507000689' }) // 仅用于HBuilder基座调试 adpid: '1507000689'\n          rewardedVideoAd.onLoad(() => {\n            this._isLoaded = true\n            console.log('onLoad event')\n            // 当激励视频被关闭时，默认预载下一条数据，加载完成时仍然触发 `onLoad` 事件\n          })\n          rewardedVideoAd.onError((err) => {\n            console.log('onError event', err)\n          })\n          rewardedVideoAd.onClose((res) => {\n            console.log('onClose event', res)\n          })\n        },\n        methods: {\n          show() {\n            if (this._isLoaded) {\n              this._rewardedVideoAd.show()\n            }\n          }\n        }\n    }\n</script>\n```\n\n\n 完整调用示例\n\n支持多页面重复调用，可以传入不同广告位，默认处理了Loading状态、快速点击、数据过期、失败重试1次逻辑\n\n推荐使用此方案\n\n```html\n<template>\n  <view>\n    <button type=\"primary\" class=\"btn\" @click=\"showRewardedVideoAd\">显示激励视频广告</button>\n    <button type=\"primary\" class=\"btn\" @click=\"showFullScreenVideoAd\">显示全屏视频广告</button>\n  </view>\n</template>\n\n<script>\n  import AD from \"../ad.js\"\n\n  export default {\n    data() {\n      return {\n        title: '视频广告'\n      }\n    },\n    onReady() {\n      // 可选预载广告数据\n\n      // AD.load({\n      //   adpid: 1507000689,\n      //   adType: \"RewardedVideo\"\n      // });\n\n      // AD.load({\n      //   adpid: 1507000611,\n      //   adType: \"FullScreenVideo\"\n      // });\n    },\n    methods: {\n      showRewardedVideoAd() {\n        // 调用后会显示 loading 界面\n        AD.show({\n          adpid: 1507000689, // HBuilder 基座测试广告位\n          adType: \"RewardedVideo\"\n        }, (res) => {\n          // 用户点击了【关闭广告】按钮\n          if (res && res.isEnded) {\n            // 正常播放结束\n            console.log(\"onClose \" + res.isEnded);\n          } else {\n            // 播放中途退出\n            console.log(\"onClose \" + res.isEnded);\n          }\n        }, (err) => {\n          // 广告加载错误\n          console.log(err)\n        })\n      },\n      showFullScreenVideoAd() {\n        // 调用后会显示 loading 界面\n        AD.show({\n          adpid: 1507000611, // HBuilder 基座测试广告位\n          adType: \"FullScreenVideo\"\n        }, (res) => {\n          // 用户点击了【关闭广告】按钮\n          if (res && res.isEnded) {\n            // 正常播放结束\n            console.log(\"onClose \" + res.isEnded);\n          } else {\n            // 播放中途退出\n            console.log(\"onClose \" + res.isEnded);\n          }\n        }, (err) => {\n          // 广告加载错误\n          console.log(err)\n        })\n      }\n    }\n  }\n</script>\n\n```\n\n```js\n// ad.js\nconst ADType = {\n  RewardedVideo: \"RewardedVideo\",\n  FullScreenVideo: \"FullScreenVideo\"\n}\n\nclass AdHelper {\n\n  constructor() {\n    this._ads = {}\n  }\n\n  load(options, onload, onerror) {\n    let ops = this._fixOldOptions(options)\n    let {\n      adpid\n    } = ops\n\n    if (!adpid || this.isBusy(adpid)) {\n      return\n    }\n\n    this.get(ops).load(onload, onerror)\n  }\n\n  show(options, onsuccess, onfail) {\n    let ops = this._fixOldOptions(options)\n    let {\n      adpid\n    } = ops\n\n    if (!adpid) {\n      return\n    }\n\n    uni.showLoading({\n      mask: true\n    })\n\n    var ad = this.get(ops)\n\n    ad.load(() => {\n      uni.hideLoading()\n      ad.show((e) => {\n        onsuccess && onsuccess(e)\n      })\n    }, (err) => {\n      uni.hideLoading()\n      onfail && onfail(err)\n    })\n  }\n\n  isBusy(adpid) {\n    return (this._ads[adpid] && this._ads[adpid].isLoading)\n  }\n\n  get(options) {\n    const {\n      adpid\n    } = options\n    if (!this._ads[adpid]) {\n      this._ads[adpid] = this._createAdInstance(options)\n    }\n\n    return this._ads[adpid]\n  }\n\n  _createAdInstance(options) {\n    const adType = options.adType || ADType.RewardedVideo\n    delete options.adType\n\n    let ad = null;\n    if (adType === ADType.RewardedVideo) {\n      ad = new RewardedVideo(options)\n    } else if (adType === ADType.FullScreenVideo) {\n      ad = new FullScreenVideo(options)\n    }\n\n    return ad\n  }\n\n  _fixOldOptions(options) {\n    return (typeof options === \"string\") ? {\n      adpid: options\n    } : options\n  }\n}\n\nconst EXPIRED_TIME = 1000 * 60 * 30\nconst ProviderType = {\n  CSJ: 'csj',\n  GDT: 'gdt'\n}\n\nconst RETRY_COUNT = 1\n\nclass AdBase {\n  constructor(adInstance, options = {}) {\n    this._isLoad = false\n    this._isLoading = false\n    this._lastLoadTime = 0\n    this._lastError = null\n    this._retryCount = 0\n\n    this._loadCallback = null\n    this._closeCallback = null\n    this._errorCallback = null\n\n    const ad = this._ad = adInstance\n    ad.onLoad((e) => {\n      this._isLoading = false\n      this._isLoad = true\n      this._lastLoadTime = Date.now()\n\n      this.onLoad()\n    })\n    ad.onClose((e) => {\n      this._isLoad = false\n      this.onClose(e)\n    })\n    ad.onVerify((e) => {\n      // e.isValid\n    })\n    ad.onError(({\n      code,\n      message\n    }) => {\n      this._isLoading = false\n      const data = {\n        code: code,\n        errMsg: message\n      }\n\n      if (code === -5008) {\n        this._loadAd()\n        return\n      }\n\n      if (this._retryCount < RETRY_COUNT) {\n        this._retryCount += 1\n        this._loadAd()\n        return\n      }\n\n      this._lastError = data\n      this.onError(data)\n    })\n  }\n\n  get isExpired() {\n    return (this._lastLoadTime !== 0 && (Math.abs(Date.now() - this._lastLoadTime) > EXPIRED_TIME))\n  }\n\n  get isLoading() {\n    return this._isLoading\n  }\n\n  getProvider() {\n    return this._ad.getProvider()\n  }\n\n  load(onload, onerror) {\n    this._loadCallback = onload\n    this._errorCallback = onerror\n\n    if (this._isLoading) {\n      return\n    }\n\n    if (this._isLoad) {\n      this.onLoad()\n      return\n    }\n\n    this._retryCount = 0\n\n    this._loadAd()\n  }\n\n  show(onclose) {\n    this._closeCallback = onclose\n\n    if (this._isLoading || !this._isLoad) {\n      return\n    }\n\n    if (this._lastError !== null) {\n      this.onError(this._lastError)\n      return\n    }\n\n    const provider = this.getProvider()\n    if (provider === ProviderType.CSJ && this.isExpired) {\n      this._loadAd()\n      return\n    }\n\n    this._ad.show()\n  }\n\n  onLoad(e) {\n    if (this._loadCallback != null) {\n      this._loadCallback()\n    }\n  }\n\n  onClose(e) {\n    if (this._closeCallback != null) {\n      this._closeCallback({\n        isEnded: e.isEnded\n      })\n    }\n  }\n\n  onError(e) {\n    if (this._errorCallback != null) {\n      this._errorCallback(e)\n    }\n  }\n\n  destroy() {\n    this._ad.destroy()\n  }\n\n  _loadAd() {\n    this._isLoad = false\n    this._isLoading = true\n    this._lastError = null\n    this._ad.load()\n  }\n}\n\nclass RewardedVideo extends AdBase {\n  constructor(options = {}) {\n    super(plus.ad.createRewardedVideoAd(options), options)\n  }\n}\n\nclass FullScreenVideo extends AdBase {\n  constructor(options = {}) {\n    super(plus.ad.createFullScreenVideoAd(options), options)\n  }\n}\n\nexport default new AdHelper()\n\n```\n\n\n 显示/隐藏\n激励视频广告组件默认是隐藏的，在用户主动触发广告后，开发者需要调用 RewardedVideoAd.show() 进行显示。\n\n```js\nrewardedVideoAd.show()\n```\n\n只有在用户点击激励视频广告组件上的 关闭广告 按钮时，广告才会关闭。开发者不可控制激励视频广告组件的隐藏。\n\n 广告拉取成功与失败\n\n激励视频广告组件是自动拉取广告并进行更新的。在组件创建后会拉取一次广告，用户点击 关闭广告 后会去拉取下一条广告。\n\n如果拉取成功，通过 `RewardedVideoAd.onLoad()` 注册的回调函数会执行，`RewardedVideoAd.show()` 返回的 Promise 也会是一个 resolved Promise。两者的回调函数中都没有参数传递。\n\n```js\nrewardedVideoAd.onLoad(() => {\n  console.log('激励视频 广告加载成功')\n})\n\nrewardedVideoAd.show()\n.then(() => console.log('激励视频 广告显示'))\n```\n\n如果拉取失败，通过 `RewardedVideoAd.onError()` 注册的回调函数会执行，回调函数的参数是一个包含错误信息的对象。常见异常错误参考文档\n\n```js\nrewardedVideoAd.onError(err => {\n  console.log(err)\n})\n```\n\n`RewardedVideoAd.show()` 返回的 Promise 也会是一个 rejected Promise。\n\n```js\nrewardedVideoAd.show()\n.catch(err => console.log(err))\n```\n\n 拉取失败，重新拉取\n\n如果组件的某次自动拉取失败，那么之后调用的 show() 将会被 reject。此时可以调用 `RewardedVideoAd.load()` 手动重新拉取广告。\n\n```js\nrewardedVideoAd.show()\n.catch(() => {\n    rewardedVideoAd.load()\n    .then(() => rewardedVideoAd.show())\n    .catch(err => {\n      console.log('激励视频 广告显示失败')\n    })\n})\n```\n\n如果组件的自动拉取是成功的，那么调用 `load()` 方法会直接返回一个 resolved Promise，而不会去拉取广告。\n\n```js\nrewardedVideoAd.load()\n.then(() => rewardedVideoAd.show())\n```\n\n 监听用户关闭广告\n\n![](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/24d1db60-441f-11eb-bd01-97bc1429a9ff.png)\n\n只有在用户点击激励视频广告组件上的 关闭广告 按钮时，广告才会关闭。这个事件可以通过 `RewardedVideoAd.onClose()` 监听。\n\n`RewardedVideoAd.onClose()` 的回调函数会传入一个参数 res，res.isEnded 描述广告被关闭时的状态。\n\n\n|属性|类型|说明|\n|:-:|:-:|:-:|\n|isEnded|boolean|视频是否是在用户完整观看的情况下被关闭的，true 表示用户是在视频播放完以后关闭的视频，false 表示用户在视频播放过程中关闭了视频\n\n\n开发者需要根据 res.isEnded 判断是否视频是否播放结束，如果成功播放完毕则应该向用户发放奖励。\n\n```js\nrewardedVideoAd.onClose(res => {\n    // 用户点击了【关闭广告】按钮\n    if (res && res.isEnded) {\n      // 正常播放结束\n\t  // 这里应该联网给予用户激励。且这段代码应该做安全保护，详见下文中的“安全注意”\n    } else {\n      // 播放中途退出\n    }\n})\n```\n\n\n 服务器回调@callback\n\nApp平台 3.1.15+ 支持穿山甲/优量汇/快手\n\n激励视频广告可以支持广告服务器到业务服务器的回调，用于业务系统判断是否提供奖励给观看广告的用户。配置服务器回调后，当用户成功看完广告时，广告服务器会访问配置的回调链接，通知用户完成观看激励视频。\n\n相对来讲服务器回调将更加安全，可以依赖广告平台的反作弊机制来避免用户模拟观看广告完成的事件。\n\n如何使用\n1. 申请激励视频广告位时开启服务器回调\n2. 创建激励视频广告时传入回调参数\n\n\nurlCallback示例\n\n```js\nrewardedVideoAd = uni.createRewardedVideoAd({\n  adpid: '',\n  urlCallback: {\n    userId: 'testuser',\n    extra: 'testdata'\n  }\n});\n```\n\n 服务器回调事件\n- HBuilderX 2.6.8+\n\n穿山甲\n```js\nrewardedVideoAd.onVerify(e => {\n  console.log('服务器发送验证请求且回调校验完成');\n  var provider= e.provider;\n  var valid = e.isValid;   //获取校验结果\n  //valid为true表示通过了服务器的校验，false表示可能没有通过服务器的校验，或是服务器延迟或失败(此时需增加逻辑：轮询向服务器请求并验证结果)\n})\n```\n\n优量汇\n```js\nrewardedVideoAd.onVerify(e => {\n  console.log('服务器已发送验证请求');\n  var provider= e.provider;\n  var transId = e.transId;\n  // 需增加逻辑：轮询向服务器请求并验证结果\n})\n```\n\n快手\n```js\nrewardedVideoAd.onVerify(e => {\n  console.log('服务器已发送验证请求');\n  var provider= e.provider;\n  // 需增加逻辑：轮询向服务器请求并验证结果\n})\n```\n\n 服务器回调说明\n\n服务器回调基于[uniCloud](https://uniapp.dcloud.net.cn/uniCloud/README)，详细流程如下:\n\n1. 登陆 [uniCloud](https://unicloud.dcloud.net.cn/) web控制台，新建服务空间或选择已有服务空间，然后在HBuilderX中新建uni-app项目并关联服务空间，新建云函数上传，用于接收广告的回调\n2. 在 [uniAD](https://uniad.dcloud.net.cn/) web控制台开通服务器回调并选择上一步新建的云函数\n3. 开通后将在选择的服务空间下自动部署一个加密云函数 `uniAdCallback`\n4. `uniAdCallback` 接收广告商服务器回调验证签名并抹平穿山甲/优量汇/快手参数差异，然后以 [callFunction](https://uniapp.dcloud.net.cn/uniCloud/cf-functions?id=callbyfunction) 方式调用用户云函数\n5. 用户在自己的云函数中处理业务\n\n注意：\n1. 服务器通信和前端事件是并行的，前端需要轮询向服务器请求并验证结果\n2. 不建议在 `uniAD` web控制修改回调的服务空间和云函数名称，因为修改后生效需要一段时间\n\n Q&A\n\nQ: 回调为什么使用[uniCloud](https://uniapp.dcloud.net.cn/uniCloud/README)，而不是直接配置开发者的服务器\nA：\n1. 由于多家广告商的回调和签名验证逻辑不同，开发者需要写很多逻辑，`uniCloud` 中的云函数 `uniAdCallback` 已抹平了差异，开发者按照统一的参数处理即可\n2. 开发者的服务器有可能响应慢或失去响应造成回调数据丢失, 使用 `uniCloud` 可以帮助开发者保存一份来自广告商服务器的回调数据到开发者的云数据中，以便开发者主动查询\n3. `uniCloud` 可以承载大并发、防DDoS攻击，无需运营人员维护，如果选择了 `阿里云` 且是免费的\n\n 云函数uniAdCallback传递的参数\n\n|字段定义|类型|字段名称|备注|\n|:-:|:-:|:-:|:-:|\n|adpid|String|DCloud广告位id||\n|provider|String|广告服务商|csj、ks、gdt|\n|platform|String|平台|iOS、Android|\n|trans_id|String|交易id|完成观看的唯一交易ID|\n|user_id|String|用户id|调用SDK透传，应用对用户的唯一标识|\n|extra|String|自定义数据|调用SDK传入并透传，如无需要则为空|\n\n\n 用户的云函数返回数据约定\n\n返回json数据，字段如下：\n\n字段名称|说明|字段类型|备注|\n:-|:-|:-|:-|\nisValid|校验结果|Blean|判定结果，是否发放奖励|\n\n示例\n```js\nexports.main = async (event, context) => {\n  //event为客户端上传的参数\n  console.log('event : ', event);\n\n  return {\n    \"isValid\": true\n  }\n};\n```\n\n 用户云函数详细说明\n\n如果业务使用了uniCloud，可以直接在云函数内部处理\n\n也可以将结果发送给已有业务服务器\n\n示例代码\n```js\n'use strict';\n\nconst crypto = require('crypto');\n\nconst db = uniCloud.database();\n\nconst DEFAUTL_TIMEOUT = 30000;\nconst DEFAUTL_RETRY_COUNT = 3;\nconst RETRY_TIMEOUT = 3000;\n\nconst ProviderType = {\n  CSJ: \"csj\",\n  GDT: \"gdt\",\n  KS: \"ks\"\n};\n\nconst collectionName = \"opendb-uniad-callback-log\";\n\nclass DB {\n\n  static save(data) {\n    return new DB().add(data);\n  }\n\n  add(data) {\n    const collection = db.collection(collectionName);\n    const data2 = Object.assign(data, {\n      ad_type: 0,\n      create_date: new Date()\n    })\n    return collection.add(data2);\n  }\n}\n\nclass UserServer {\n\n  static send(url, data) {\n    return new UserServer().sendHttpRequest(url, data);\n  }\n\n  async sendHttpRequest(url, data) {\n    let needRetry = data.provider !== ProviderType.GDT;\n    let retryCount = needRetry ? DEFAUTL_RETRY_COUNT : 1;\n    let timeout = needRetry ? RETRY_TIMEOUT : DEFAUTL_TIMEOUT;\n    let result = null;\n\n    while (retryCount > 0) {\n      console.log(\"sendHttpRequest::count::\" + retryCount + \"::\", url, data);\n\n      try {\n        result = await uniCloud.httpclient.request(url, {\n          data,\n          dataType: 'json',\n          contentType: 'json',\n          timeout\n        });\n\n        if (result.data && result.data.isValid === true) {\n          break;\n        }\n      } catch (e) {\n        console.log(e);\n      }\n\n      retryCount--;\n    }\n\n    return result;\n  }\n}\n\nexports.main = async (event, context) => {\n  //event为客户端上传的参数\n  console.log('event : ', event);\n\n  const {\n    path,\n    queryStringParameters\n  } = event;\n\n  const data = {\n    adpid: event.adpid,\n    platform: event.platform,\n    provider: event.provider,\n    trans_id: event.trans_id,\n    sign: event.sign,\n    user_id: event.user_id,\n    extra: event.extra,\n  }\n\n  // 注意::必须验签请求来源\n  const secret = \"\";// uniad 后台开通激励视频回调后生成的 secret\n  const trans_id = event.trans_id;\n  const sign2 = crypto.createHash('sha256').update(`${secret}:${trans_id}`).digest('hex');\n  if (event.sign !== sign2) {\n    return null;\n  }\n\n\n  // 可选将回调记录保存到uniCloud，避免用户服务器没有响应时有日志可查，如果选择了保存记录需要做定时清理日志，避免日志过多影响性能\n  // try {\n  //   await DB.save(data);\n  // } catch (e) {\n  //   console.log(e);\n  // }\n\n  //const url = \"https://\"; // 用户业务服务器地址，为了避免请求被伪造，必须使用签名的方式请求\n  //let reuslt = await UserServer.send(url, data);\n\n  return {\n    \"isValid\": true\n  }\n};\n```\n\n\n 安全注意\n\n由于激励视频对应着用户奖励，可能会遇到恶意刷激励奖励但实际上并不看广告的情况。此时广告平台不给结算，但开发者却可能把激励送出去。\n\n为了提升安全性，建议所有使用激励视频的开发者都要做如下工作来加强保护：\n1. 前端代码加密。涉及激励相关的，在manifest中配置好要加密的代码文件，打包后会自动加密相应文件。[详见](https://ask.dcloud.net.cn/article/36437)\n2. apk加固。即便前端代码加密，原生层引擎的java代码仍然可能被反编译，需要对apk加固。市面上很多加固服务，比如360加固、爱加密加固均可以自行选择。\n3. 使用如下安全类API，防止客户端被篡改\n- plus.navigator.getSignature 获取应用签名标识。结合在服务器端存放证书信息，可比对判断App的证书是否被重签 [规范](https://www.html5plus.org/doc/zh_cn/navigator.htmlplus.navigator.getSignature)\n- plus.navigator.isSimulator 判断App是否运行在模拟器环境 [规范](https://www.html5plus.org/doc/zh_cn/navigator.htmlplus.navigator.isSimulator)\n- plus.navigator.isRoot 判断设备是否被root或越狱 [规范](https://www.html5plus.org/doc/zh_cn/navigator.htmlplus.navigator.isRoot)\n- plus.networkinfo.isSetProxy 判断设备的网络是否设置了代理 [规范](https://www.html5plus.org/doc/zh_cn/device.htmlplus.networkinfo.isSetProxy)\n4. 避免使用短信验证码来识别身份，推荐使用可信度更高的 [手机号一键登录](/univerify) 或 [微信登录](/api/plugins/login?id=login)\n5. 必要时可使用[生物认证（指纹和faceid）](/api/system/authentication)、[活体检测的sdk](https://ext.dcloud.net.cn/search?q=%E6%B4%BB%E4%BD%93%E6%A3%80%E6%B5%8B&orderBy=Relevance&cat1=5&cat2=51)\n\n 获取广告商名称\n\n> HBuilderX 2.6.8+\n\n 语法\n\n`RewardedVideoAd.getProvider()`\n\n 说明\n\n返回值 为 string 类型\n\n|值|描述|\n|:-:|:-:|\n|csj|穿山甲|\n|gdt|腾讯优量汇（前称广点通）|\n|ks|快手|\n\n\n```js\nvar rewardedVideoAd = uni.createRewardedVideoAd(Options);\nvar provider = rewardedVideoAd.getProvider();\n```\n\n\n app平台错误码\n\ncode|message|\n:-|:-|\n-5001|广告位标识adpid为空，请传入有效的adpid\n-5002|无效的广告位标识adpid，请使用正确的adpid\n-5003|未开通广告，请在广告平台申请并确保已审核通过\n-5004|无广告模块，打包时请配置要使用的广告模块\n-5005|广告加载失败，请过段时间重新加载，否则可能触发系统策略导致流量收益下降\n-5006|广告未加载完成无法播放，请加载完成后再调show播放\n-5007|无法获取广告配置数据，请尝试重试\n-5008|广告已过期，请重新加载数据\n-5100|其他错误，聚合广告商内部错误\n\n\n**@error 详细错误码**\n\n- App端聚合的穿山甲(iOS)：[错误码](https://ad.oceanengine.com/union/media/union/download/detail?id=16&docId=5de8d574b1afac00129330d5&osType=ios)\n- App端聚合的穿山甲(Android)：[错误码](https://ad.oceanengine.com/union/media/union/download/detail?id=4&docId=5de8d9b925b16b00113af0ed&osType=android)\n- App端聚合的广点通(iOS)：[错误码](https://developers.adnet.qq.com/doc/ios/union/union_debug%E9%94%99%E8%AF%AF%E7%A0%81)\n- App端聚合的广点通(Android)：[错误码](https://developers.adnet.qq.com/doc/android/union/union_debugsdk%20%E9%94%99%E8%AF%AF%E7%A0%81)\n\n\n 注意事项\n- iOS平台配置应用使用广告标识（IDFA）详见：[https://ask.dcloud.net.cn/article/36107](https://ask.dcloud.net.cn/article/36107)\n- 测试期间请使用测试 `adpid`，参考测试代码，如果无法显示换个时间再试\n- 多次调用 `RewardedVideoAd.onLoad()`、`RewardedVideoAd.onError()`、`RewardedVideoAd.onClose()` 等方法监听广告事件会产生多次事件回调，建议在创建广告后监听一次即可。\n- 为避免滥用广告资源，目前每个用户每天可观看激励式视频广告的次数有限，建议展示广告按钮前先判断广告是否拉取成功。\n- App平台，建议每个广告商每个设备每天调用次数不超过`15`，中间要有间隔时间，否则可能触发系统的反作弊策略导致流量收益下降。\n- 老版非V3编译项目不支持激励视频。\n\n 案例参考\n- [全民董事长](https://android.myapp.com/myapp/detail.htm?apkName=com.dlt.qmdsz&info=DF3F955B42F0B77FECA41F03E7F77C8D)\n- 重要项目源码《养猫合成游戏》，拿走就能用，[https://ext.dcloud.net.cn/plugin?id=4095](https://ext.dcloud.net.cn/plugin?id=4095)\n","p":"command\\广告 - 激励视频广告.html"},{"t":"广告/全屏视频广告","d":" 全屏视频广告\n\n全屏视频广告是一个原生组件，层级比普通组件高。全屏视频广告每次创建都会返回一个全新的实例，默认是隐藏的，需要调用 FullScreenVideoAd.show() 将其显示。\n\n如何开通参考激励视频广告 [https://uniapp.dcloud.net.cn/api/a-d/rewarded-video](https://uniapp.dcloud.net.cn/api/a-d/rewarded-video)\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|√（2.9.5+）|x|x|x|x|x|x|\n\nuni.createFullScreenVideoAd(Object)\n\n|属性|类型|必填|说明|\n|:-:|:-:|:-:|:-:|\n|adpid|string|是|广告位 id|\n\n\n 方法\n\n加载全屏视频广告。\n\n`Promise FullScreenVideoAd.load()`\n\n\n显示全屏视频广告。\n\n`Promise FullScreenVideoAd.show()`\n\n\n销毁全屏视频广告实例。\n\n`FullScreenVideoAd.destroy()`\n\n\n监听全屏视频广告加载事件。\n\n`FullScreenVideoAd.onLoad(function callback)`\n\n\n监听全屏视频错误事件。\n\n`FullScreenVideoAd.onError(function callback)`\n\n\n监听全屏视频广告关闭事件。\n\n`FullScreenVideoAd.onClose(function callback)`\n\n\n示例代码\n```html\n<template>\n  <view>\n    <button :loading=\"loading\" :disabled=\"loading\" type=\"primary\" @click=\"showFullScreenVideoAd\">显示广告</button>\n  </view>\n</template>\n\n<script>\n  export default {\n    data() {\n      return {\n        title: '全屏视频广告',\n        loading: false\n      }\n    },\n    onReady() {\n      // HBuilderX标准基座真机运行测试全屏视频广告位标识（adpid）为：1507000611\n      // adpid: 1507000611 仅用于测试，发布时需要改为广告后台（https://uniad.dcloud.net.cn/）申请的 adpid\n      // 广告后台申请的广告位(adpid)需要自定义基座/云打包/本地打包后生效\n      this.adOption = {\n        adpid: '1507000611'\n      };\n\n      // 创建广告实例\n      this.createFullScreenVideoAd();\n    },\n    methods: {\n      createFullScreenVideoAd() {\n        var fullScreenVideoAd = this.fullScreenVideoAd = uni.createFullScreenVideoAd(this.adOption);\n        fullScreenVideoAd.onLoad(() => {\n          // 广告数据加载成功\n          this.loading = false;\n          console.log(\"onLoad\");\n        });\n        fullScreenVideoAd.onClose((e) => {\n          // 用户点击了关闭或返回键(仅Android有返回键)\n          console.log(\"onClose \" + e.isEnded);\n        });\n        fullScreenVideoAd.onError((err) => {\n          console.log(\"onError\", JSON.stringify(err));\n          // 广告数据加载失败\n          this.loading = false;\n          uni.showToast({\n            title: `${err.code} : ${err.errMsg}`\n          })\n        });\n      },\n      showFullScreenVideoAd() {\n        // 调用 fullScreenVideoAd.show()，如果数据正在加载中不会显示广告，加载成功后才显示\n        // 在数据没有加载成功时，需要防止用户频繁点击显示广告\n        if (this.loading == true) {\n          return\n        }\n        this.loading = true;\n        this.fullScreenVideoAd.show().then(() => {\n          this.loading = false;\n        }).catch((err) => {\n          console.log(err.message);\n          this.loading = false;\n          uni.showToast({\n            title: `${err.code} : ${err.errMsg}`\n          })\n        });\n      }\n    },\n    onUnload() {\n      this.fullScreenVideoAd.destroy()\n    }\n  }\n</script>\n\n```\n","p":"command\\广告 - 全屏视频广告.html"},{"t":"广告/内容联盟广告","d":" 短视频内容联盟广告\n\n简介\n\n⼀个视频内容频道，支持上下滑动切换视频内容\n\n![](https://vkceyugu.cdn.bspapp.com/VKCEYUGU-a90b5f95-90ba-4d30-a6a7-cd4d057327db/673f23ff-0924-4302-8467-9c1c1fd03b96.png)\n\n\n内容联盟广告是一个原生全屏组件，大小不可控制\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|√（3.1.5+）|x|x|x|x|x|x|\n\n**开通配置广告**\n\n开通广告步骤：\n1. 开通广告\n需在广告平台后台操作：\n    * App平台：[https://uniad.dcloud.net.cn/](https://uniad.dcloud.net.cn/)\n2. 申请广告位id\n在各位后台申请广告位id\n3. App端打包后生效，打包时必须选择要集成的广告SDK（目前仅支持快手内容联盟）。\n\n\n 语法\n\n`plus.ad.showContentPage(options, success, fail)`\n\n 参数说明\n\n`options` 为 object 类型，属性如下：\n\n|属性名\t\t|类型\t\t|必填\t|描述\t\t\t|\n|:-:|:-:|:-:|:-:|\n|adpid\t  |string\t|\t是|广告位 id |\n|background\t|string\t|\t否|背景颜色，不支持透明度 |\n\n`success` 为 function 类型，加载成功后的回调\n\n`fail` 为 function 类型，加载失败后的回调\n\nHBuilder 基座的测试广告位 `adpid` 为 `1111111112`\n\n\n示例代码\n\n```html\n<template>\n\t<view>\n\t\t<button :loading=\"loading\" :disabled=\"loading\" type=\"primary\" class=\"btn\" @click=\"showAd\">显示广告</button>\n\t</view>\n</template>\n\n<script>\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tloading: false\n\t\t\t}\n\t\t},\n\t\tonLoad() {\n\t\t\t// HBuilderX 标准基座真机运行测试内容联盟广告位标识（adpid）为：1111111112\n\t\t\t// adpid: 1111111112 仅用于测试，发布时需要改为广告后台（https://uniad.dcloud.net.cn/）申请的 adpid\n\t\t\t// 广告后台申请的广告位(adpid)需要自定义基座/云打包/本地打包后生效\n\n\t\t\tthis.adOptions = {\n\t\t\t\tadpid: 1111111112\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tshowAd() {\n\t\t\t\tif (this.loading == true) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.loading = true;\n\t\t\t\tplus.ad.showContentPage(this.adOptions, (res) => {\n\t\t\t\t\tthis.loading = false;\n\t\t\t\t}, (err) => {\n\t\t\t\t\tthis.loading = false;\n\t\t\t\t\tconsole.log(err);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n</script>\n```\n\n","p":"command\\广告 - 内容联盟广告.html"},{"t":"广告/插屏广告","d":" 插屏广告\n\n插屏广告组件是由客户端原生的图片、文本、视频控件组成的；插屏广告与信息流或横幅广告相比展现尺寸更大，同样能够满足您对大量曝光和用户转化的需求。\n\n![](https://vkceyugu.cdn.bspapp.com/VKCEYUGU-a90b5f95-90ba-4d30-a6a7-cd4d057327db/5dc1ce6b-b786-4175-aec5-dd2ab4a5e34c.png)\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|App 3.1.10+|x|√|x|x|x|√|\n\n- app端的广告源由腾讯优量汇、头条穿山甲、快手等广告联盟提供，DCloud负责聚合\n- 小程序端的广告由小程序平台提供\n\n**开通配置广告**\n\n开通广告步骤：\n1. 开通广告\n需在广告平台后台操作：\n    * App平台：[https://uniad.dcloud.net.cn/](https://uniad.dcloud.net.cn/)\n    * 小程序平台：在各自的小程序管理后台操作。\n2. 申请广告位id\n在各位后台申请广告位id\n3. App端打包后生效，打包时必须选择要集成的广告SDK（优量汇、穿山甲、快手）。\n\n 语法\n\n`uni.createInterstitialAd(options)`\n\n 参数说明\n\n`options` 为 object 类型，属性如下：\n\n|属性名\t\t|类型\t\t|必填\t|描述\t\t\t|最低支持版本\t|\n|:-:|:-:|:-:|:-:|:-:|\n|adpid\t  |string\t|\t是|广告位 id |App 3.1.10+|\n|adUnitId\t|string\t|\t是|广告位 id |微信小程序2.6.0+, QQ0.1.26+|\n\n\nHBuilder 基座的测试广告位 `adpid` 为 `1111111113`\n\n\n 广告创建\n\n插屏广告组件默认是隐藏的，因此可以提前创建，以提前初始化组件。开发者可以在页面的 onReady 事件回调中创建广告实例，并在该页面的生命周期内重复调用该广告实例。\n\n\n 显示/隐藏\n\n插屏广告组件默认是隐藏的，开发者需要调用 InterstitialAd.show() 进行显示。如果广告拉取失败或触发频率限制，InterstitialAd.show() 方法会返回一个rejected Promise，开发者可自行监听错误信息\n\n```js\ninterstitialAd.show().catch((err) => {\n  console.error(err)\n})\n```\n\n用户可以主动关闭插屏广告。开发者不可控制插屏广告组件的隐藏。\n\n\n 监听用户关闭广告\n\n如果广告被关闭，通过 InterstitialAd.onClose() 注册的回调函数会执行，回调函数没有参数传递。\n\n```js\ninterstitialAd.onClose(res => {\n    console.log('插屏 广告关闭')\n})\n```\n\n\n示例代码\n\n```html\n<template>\n  <view>\n    <view>\n      <button :loading=\"loading\" :disabled=\"loading\" type=\"primary\" @click=\"showInterstitialAd\">显示广告</button>\n    </view>\n  </view>\n</template>\n\n<script>\n  export default {\n    data() {\n      return {\n        title: '插屏广告',\n        loading: false\n      }\n    },\n    onReady() {\n      this.adOption = {\n        adpid: '1111111113' // HBuilder基座的测试广告位\n      };\n\n      // 创建广告实例\n      this.createInterstitialAd();\n    },\n    methods: {\n      createInterstitialAd() {\n        var interstitialAd = this.interstitialAd = uni.createInterstitialAd(this.adOption);\n        interstitialAd.onLoad(() => {\n          this.loading = false;\n          console.log(\"插屏 广告加载成功\");\n        });\n        interstitialAd.onClose(() => {\n          // 用户点击了关闭或返回键(仅Android有返回键)\n          console.log(\"插屏 广告关闭\");\n        });\n        interstitialAd.onError((err) => {\n          this.loading = false;\n          console.log(\"插屏 广告加载失败\");\n        });\n\n        // 广告实例创建成功后默认会执行一次 load，加载广告数据\n        // 如果界面有 \"显示广告\" 按钮，需要先禁用掉，防止用户点击，等待广告数据加载成功后在放开\n        this.loading = true;\n      },\n      showInterstitialAd() {\n        // 调用 interstitialAd.show()，如果数据正在加载中不会显示广告，加载成功后才显示\n        // 在数据没有加载成功时，需要防止用户频繁点击显示广告\n        if (this.loading == true) {\n          return\n        }\n        this.loading = true;\n        this.interstitialAd.show().then(() => {\n          this.loading = false;\n        });\n      }\n    },\n    onUnload() {\n      // 页面关闭后销毁实例\n      this.interstitialAd.destroy()\n    }\n  }\n</script>\n```\n\n\n 方法\n\n`Promise InterstitialAd.load()`\n\n加载插屏广告。\n\n`Promise InterstitialAd.show()`\n\n显示插屏广告。\n\n`InterstitialAd.destroy()`\n\n销毁插屏广告实例。\n\n`InterstitialAd.onLoad(function callback)`\n\n监听插屏广告加载事件。\n\n`InterstitialAd.offLoad(function callback)`\n\n取消监听插屏广告加载事件\n\n`InterstitialAd.onError(function callback)`\n\n监听插屏错误事件。\n\n`InterstitialAd.offError(function callback)`\n\n取消监听插屏错误事件\n\n`InterstitialAd.onClose(function callback)`\n\n监听插屏广告关闭事件。\n\n`InterstitialAd.offClose(function callback)`\n\n取消监听插屏广告关闭事件\n\n\n 注意事项\n\n在插屏广告展示过程中如果快速切换页面，可能会出现插屏广告展示在非调用页面的情况，如有需要请在页面切换完成后进行插屏广告展示。\n","p":"command\\广告 - 插屏广告.html"},{"t":"广告/互动游戏","d":" 互动游戏\n\n 简介\n\n互动游戏是DCloud联合三方服务商为开发者提供新的广告场景增值服务。开发者在App中放置入口，用户点击入口参与权益化、趣味性的活动。通过观看激励视频广告加速获取权益。沉浸的游戏体验能够降低对广告的抵触心理，增加激励视频广告展示的同时有效提高广告收益。\n\n![](https://vkceyugu.cdn.bspapp.com/VKCEYUGU-a90b5f95-90ba-4d30-a6a7-cd4d057327db/c19c9518-c953-49c3-89a0-33a1e595be7f.png)\n\n\n 活动场景类型：\n\n共抽奖类、游戏类、养成类3种场景类型，开发者可根据自身情况选择活动类型：\n\n1. 抽奖类活动：通过转盘、扭蛋、摇骰子等抽奖玩法获得奖品碎片或红包奖励\n2. 游戏类活动：通过合成游戏、成语答题、捕鱼等游戏玩法获得金币或红包奖励\n3. 养成类活动：果园、农场、养牛等长期活动，用户通过连续签到、道具收集、任务体系等玩法提升养成对象的等级，升级后可获得红包奖励或兑换奖品\n\n![](https://vkceyugu.cdn.bspapp.com/VKCEYUGU-a90b5f95-90ba-4d30-a6a7-cd4d057327db/994e3f54-d498-4642-8e61-3177dcfef63a.jpg)\n\n 活动分类表\n<table>\n\t<thead style=\"background-color: f8f8f8;\">\n\t\t<tr>\n\t\t\t<td>活动分类</td>\n\t\t\t<td>活动名称</td>\n\t\t\t<td>发放奖励</td>\n\t\t\t<td>活动周期</td>\n\t\t\t<td>是否支持积分打通</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td rowspan=\"3\">抽奖</td>\n\t\t\t<td>集碎片</td>\n\t\t\t<td>多奖品</td>\n\t\t\t<td>7天</td>\n\t\t\t<td></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>印钞机</td>\n\t\t\t<td>现金</td>\n\t\t\t<td>7天</td>\n\t\t\t<td></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>扭蛋机</td>\n\t\t\t<td>多奖品</td>\n\t\t\t<td>7天</td>\n\t\t\t<td></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td rowspan=\"4\">游戏</td>\n\t\t\t<td>大富翁</td>\n\t\t\t<td>现金</td>\n\t\t\t<td>7天</td>\n\t\t\t<td>支持</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>成语大赢家</td>\n\t\t\t<td>现金</td>\n\t\t\t<td>7天</td>\n\t\t\t<td></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>合成招财猫</td>\n\t\t\t<td>现金</td>\n\t\t\t<td>7天</td>\n\t\t\t<td></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>捕鱼达人</td>\n\t\t\t<td>现金</td>\n\t\t\t<td>长期</td>\n\t\t\t<td>新增支持</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td rowspan=\"5\">养成</td>\n\t\t\t<td>福牛</td>\n\t\t\t<td>现金</td>\n\t\t\t<td>7天</td>\n\t\t\t<td></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>果园</td>\n\t\t\t<td>水果</td>\n\t\t\t<td>长期</td>\n\t\t\t<td></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>农场</td>\n\t\t\t<td>现金</td>\n\t\t\t<td>30天</td>\n\t\t\t<td></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>养鸡</td>\n\t\t\t<td>现金</td>\n\t\t\t<td>长期</td>\n\t\t\t<td></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>走路赚</td>\n\t\t\t<td>现金</td>\n\t\t\t<td>7天</td>\n\t\t\t<td>支持</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n注：活动名称在开通时不能选择，如需修改，请邮件联系[uniad@dcloud.io](mailto:uniad@dcloud.io)\n\n\n 关于奖励发放的说明\n\n互动游戏的目的是吸引用户参与活动，引导用户观看广告，通过活动获取奖励，满足特定条件后需要向用户发放奖励。目前有两种奖励发放方式，一种是由DCloud联合三方服务商为开发者提供用户奖励线下代发；一种是由开发者对接App自身积分系统，将用户奖励转换为App积分，提高用户参与度和体验。\n\n 用户奖励线下代发服务\n默认使用用户奖励线下代发服务，具体说明如下：\n1. 用户参与以上活动达到一定资产时（奖品碎片或金币到达兑换门槛，红包金额到达提现门槛），可发起兑奖申请。如用户申请提现，需要填写收款的支付宝或微信账号；如用户申请兑换虚拟或者实物奖品，需要填写联系人联系方式和收货地址等；具体以兑奖弹窗为准。\n2. 用户提交兑奖申请后，客服将在5个工作日内确认，确认后将尽快为您进行发货，如实物奖品有发货时间较长等问题请联系客服。\n3. 如实物奖品（水果生鲜等）因为时令问题、疫情区域或者新疆、西藏等偏远地区暂时无法寄送，客服将联系用户赠送奖品价值相等的现金奖励。\n4. 实物奖品发放后,快递配送请在24小时内收货,如有质量问题,请于签收后48小时内进行售后申请,超出时间不予赔付。\n5. 用户不得使用任何外挂、插件以及其他破坏破坏活动规则、违背活动公平原则的方式参加本次活动，否则服务商有权取消用户参与活动的资格以及清空获得的奖励。\n\n\n 用户奖励对接App积分\n\n积分对接需要开发者业务系统与三方服务商的互动游戏进行对接，需要一定的开发工作量，请邮件联系[uniad@dcloud.io](mailto:uniad@dcloud.io)\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|App 3.1.15+|x|x|x|x|x|x|\n\n**开通配置广告**\n\n开通广告步骤：\n1. 开通广告\n需在广告平台后台操作：\n    * App平台：[https://uniad.dcloud.net.cn/](https://uniad.dcloud.net.cn/)\n2. 申请广告位id\n在各位后台申请广告位id\n3. App端打包后生效，打包时必须选择要集成的广告SDK互动游戏(变现猫)，优量汇、穿山甲、快手至少选择其中一个。\n\n 语法\n\n`uni.createInteractiveAd(options)`\n\n 参数说明\n\n`options` 为 object 类型，属性如下：\n\n|属性名\t\t|类型\t\t|必填\t|描述\t\t\t|\n|:-:|:-:|:-:|:-:|\n|adpid\t  |string\t|\t是 |广告位 id |\n|provider\t|string\t|\t是 |服务商标识，即插件id |\n|userData\t|object\t|\t否 |对接App积分系统参数 |\n\n\n 广告创建\n\n广告组件默认是隐藏的，因此可以提前创建，以提前初始化组件。开发者可以在页面的 onReady 事件回调中创建广告实例，并在该页面的生命周期内重复调用该广告实例。\n\n\n 显示/隐藏\n\n广告组件默认是隐藏的，开发者需要调用 CreateInteractiveAd.show() 进行显示。如果广告拉取失败或触发频率限制，CreateInteractiveAd.show() 方法会返回一个rejected Promise，开发者可自行监听错误信息\n\n```js\nCreateInteractiveAd.show().catch((err) => {\n  console.error(err)\n})\n```\n\n用户可以主动关闭广告。开发者不可控制广告组件的隐藏。\n\n\n 监听广告加载成功事件\n\n如果广告加载成功，通过 CreateInteractiveAd.onLoad() 注册的回调函数会执行，回调函数返回广告素材参数。\n\n\n|属性名\t\t|类型\t\t|描述\t\t\t|\n|:-:|:-:|:-:|\n|imgUrl\t  |string\t|\t广告素材图片的url地址 |\n\n\n```js\nCreateInteractiveAd.onLoad(res => {\n    console.log('图片素材地址', res.imgUrl);\n    console.log('广告加载成功');\n})\n```\n\n\nHBuilder基座的测试广告位 adpid: `1042956255` (游戏); `1620839118` (抽奖); `1064042976` (养成)\n\n\n示例代码\n\n```html\n<template>\n  <view>\n    <image class=\"ad-icon\" v-if=\"imgUrl\" :src=\"imgUrl\" @click=\"showInteractiveAd\"></image>\n  </view>\n</template>\n\n<script>\n  export default {\n    data() {\n      return {\n        title: '互动游戏',\n        loading: false,\n        imgUrl: \"\"\n      }\n    },\n    onReady() {\n      this.adOption = {\n        adpid: '1042956255',\n        provider: \"BXM-AD\"\n      };\n\n      // 创建广告实例\n      this.createInteractiveAd();\n    },\n    methods: {\n      createInteractiveAd() {\n        var interactiveAd = this.interactiveAd = uni.createInteractiveAd(this.adOption);\n        interactiveAd.onLoad((e) => {\n          this.loading = false;\n          this.imgUrl = e.imgUrl;\n          console.log(\"广告加载成功\");\n          // 如果有广告图片素材, 通过 e.imgUrl 获取\n        });\n        interactiveAd.onClose(() => {\n          // 用户点击了关闭或返回键(仅Android有返回键)\n          console.log(\"广告关闭\");\n        });\n        interactiveAd.onError((err) => {\n          this.loading = false;\n          console.log(\"广告加载失败\");\n        });\n\n        // 广告实例创建成功后默认会执行一次 load，加载广告数据\n        // 如果界面有 \"显示广告\" 按钮，需要先禁用掉，防止用户点击，等待广告数据加载成功后在放开\n        this.loading = true;\n      },\n      showInteractiveAd() {\n        // 调用 interactiveAd.show()，如果数据正在加载中不会显示广告，加载成功后才显示\n        // 在数据没有加载成功时，需要防止用户频繁点击显示广告\n        if (this.loading == true) {\n          return\n        }\n        this.loading = true;\n        this.interactiveAd.show().then(() => {\n          this.loading = false;\n        });\n      }\n    },\n    onUnload() {\n      // 页面关闭后销毁实例\n      this.interactiveAd.destroy();\n    }\n  }\n</script>\n<style>\n  .ad-icon {\n    display: block;\n    width: 80px;\n    height: 80px;\n    margin: 10px;\n  }\n</style>\n```\n\n\n 方法\n\n`Promise CreateInteractiveAd.load()`\n\n加载广告。\n\n`Promise CreateInteractiveAd.show()`\n\n显示广告。\n\n`CreateInteractiveAd.reportExposure()`\n\n场景入口曝光打点。\n\n`CreateInteractiveAd.destroy()`\n\n销毁广告实例。\n\n`CreateInteractiveAd.onLoad(function callback)`\n\n监听广告加载事件。\n\n`CreateInteractiveAd.offLoad(function callback)`\n\n取消监听广告加载事件\n\n`CreateInteractiveAd.onError(function callback)`\n\n监听错误事件。\n\n`CreateInteractiveAd.offError(function callback)`\n\n取消监听错误事件\n\n\n 积分对接\n\n 开通\n\n1. 开发者需要提供广告位 `adpid`\n2. 开发者需要提供服务器接口\n  1. 获取积分接口\n  2. 操作积分接口\n4. 三方服务商需要提供 `secretKey` 让开发者来验签请求来源\n\n\n 获取积分\n\n简要描述：\n\n该接口用于获取用户总积分数量；\n\n开发者提供url用户查询积分\n\n请求方式 `GET`\n\n参数：\n\n|参数名|必选|类型|说明|\n|:-:|:-:|:-:|:-:|\n|appUserId|是|String|app用户Id|\n|appId|是|String|SSP后台注册的appId|\n|timestamp|是|String|时间戳（自1970年起，精确到毫秒）|\n|sign|是|String|签名,用于验证身份。按照按 secretKey + timestamp 的进行MD5加密（注意加密后字符串要转大写，不要加上“+”号）|\n\n返回参数说明\n\n|参数名|类型|说明|\n|:-:|:-:|:-:|\n|appUserId|String|app用户Id|\n|avatar|String|用户头像|\n|nickname|String|用户昵称|\n|amount|Long|用户总积分|\n\n示例\n\n```json\n  {\n   \"appUserId\" : \"dcloud\",\n   \"avatar\": \"https://xxx.yyy.com/xxxx.jpg\",\n   \"nickname\": \"jack\",\n   \"amount\": 100\n  }\n```\n\n 操作积分\n\n简要描述：\n\n此接口用于操作用户积分数量，如增加、扣除；\n请求参数放在body里，以JSON格式提交；\n考虑到接口的安全，建议开发者采用IP白名单+签名的方式校验来源，以防备被第三方利用。\n\n\n失败情况：\n\n- URL存在特殊字符或无法通过外网访问；\n- 没有按照响应格式要求返回的内容；\n- 接口返回状态码非`200`的情况；\n- 接口响应时间超过`3`秒。\n\n开发者提供url用户查询积分\n\n请求方式 `POST`\n\n参数：\n\n|参数名|必选|类型|说明|\n|:-:|:-:|:-:|:-:|\n|appUserId|是|String|App用户Id(唯一标识)|\n|appId|是|String|SSP后台注册的appId|\n|operateType|是|Long|操作类型：1.增加 2.扣除|\n|amount|是|Long|本次操作的积分值|\n|timestamp|是|String|时间戳（自1970年起，精确到毫秒）|\n|sign|是|String|签名，用于验证身份。按照按 secretKey + timestamp 进行MD5加密（注意加密后字符串要转大写，不要加上“+”号）|\n\n返回参数说明\n\n|参数名|类型|说明|\n|:-:|:-:|:-:|\n|appUserId|String|App用户Id(唯一标识)|\n|status|int|状态码：0. 处理失败 1. 处理成功|\n|message|String|失败原因|\n|amount|Long|操作后的用户总积分|\n\n返回结果示例\n```json\n{\n  \"appUserId\": \"dcloud\",\n  \"status\": 1,\n  \"amount\": 100\n}\n```\n","p":"command\\广告 - 互动游戏.html"},{"t":"第三方服务/获取服务供应商","d":" uni.getProvider(OBJECT)\r\n获取服务供应商。\r\n\r\n在App平台，可用的服务商，是打包环境中配置的服务商，与手机端是否安装了该服务商的App没有关系。\r\n\r\n云打包在manifest中配置相关模块和SDK信息，离线打包在原生工程中配置。某个服务商配置被打包进去，运行时就能得到相应的服务供应商。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|企业微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-|:-|:-|:-|:-|:-|:-|:-|\r\n|√|x|√|x|√|√|√|√|\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|service|String|是|服务类型，可取值见下面说明。|\r\n|success|Function|否|接口调用成功的回调|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**service 值说明**\r\n\r\n|值|说明|\r\n|:-|:-|\r\n|oauth|授权登录|\r\n|share|分享|\r\n|payment|支付|\r\n|push|推送|\r\n\r\n\r\n**success 返回参数说明**\r\n\r\n|参数名|类型|说明|\r\n|:-|:-|:-|\r\n|service|String|服务类型|\r\n|provider|Array|得到的服务供应商|\r\n\r\n\r\n**provider 在不同服务类型下可能的取值说明**\r\n\r\n|service|provider|说明|备注|\r\n|:-|:-|:-|:-|\r\n|oauth|weixin|微信登录||\r\n||qq|QQ登录||\r\n||sinaweibo|新浪微博登录||\r\n||xiaomi|小米登录||\r\n||univerify|[一键登录](/univerify)|App 3.0.0+|\r\n||apple|[Apple登录](https://ask.dcloud.net.cn/article/36651)|仅iOS13支持，App 2.4.7+|\r\n|share|sinaweibo|新浪微博分享||\r\n||qq|分享到QQ好友||\r\n||weixin|分享微信消息、朋友圈及微信小程序||\r\n|payment|alipay|支付宝支付||\r\n||wxpay|微信支付||\r\n||baidu|百度收银台||\r\n||appleiap|苹果应用内支付|iOS 应用打包后可获取|\r\n|push|unipush|[UniPush](https://ask.dcloud.net.cn/article/35622)|推送服务是三选一，只会获取到一个供应商。|\r\n||igexin|个推|填写配置并打包后可以获取，仅为向下兼容而保留，不再推荐使用|\r\n||mipush|小米推送|填写配置并打包后可以获取，仅为向下兼容而保留，不再推荐使用|\r\n\r\n**注意事项**\r\n\r\n- 自 HBuilderX 1.7.3 起，HBuilder 基座的推送供应商为 UniPush 服务。\r\n\r\n**代码**\r\n\r\n```javascript\r\nuni.getProvider({\r\n\tservice: 'oauth',\r\n\tsuccess: function (res) {\r\n\t\tconsole.log(res.provider)\r\n\t\tif (~res.provider.indexOf('qq')) {\r\n\t\t\tuni.login({\r\n\t\t\t\tprovider: 'qq',\r\n\t\t\t\tsuccess: function (loginRes) {\r\n\t\t\t\t\tconsole.log(JSON.stringify(loginRes));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n});\r\n```\r\n","p":"command\\第三方服务 - 获取服务供应商.html"},{"t":"第三方服务/登录","d":" uni.login(OBJECT)\r\n登录\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|x|√|√|√|√|√|\r\n\r\nH5平台登录注意事项：\r\n- 微信内嵌浏览器运行H5版时，可通过js sdk实现微信登录，需要引入一个单独的js，[详见](https://ask.dcloud.net.cn/article/35380)\r\n- 普通浏览器上实现微信登录，并非开放API，需要向微信申请，仅个别开发者有此权限\r\n- H5平台的其他登录，比如QQ登录、微博登录，uni-app未封装，请在条件编译里按普通H5写法编写。\r\n\r\n百度小程序登录注意事项：\r\n- 百度小程序平台需要在button组件的@login事件后再调用 uni.login ，[详见](https://smartprogram.baidu.com/docs/develop/function/login/),否则会返回“请登录”的错误信息，建议在@login事件中调用。\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|平台差异说明|\r\n|:-|:-|:-|:-|:-|\r\n|provider|String|否|登录服务提供商，通过 [uni.getProvider](/api/plugins/provider) 获取，如果不设置则弹出登录列表选择界面||\r\n|scopes|String/Array|见平台差异说明|授权类型，默认 auth_base。支持 auth_base（静默授权）/ auth_user（主动授权） / auth_zhima（芝麻信用）|支付宝小程序|\r\n|timeout|Number|否|超时时间，单位ms|微信小程序、百度小程序|\r\n|univerifyStyle|Object|否|[一键登录](/univerify)页面样式|App 3.0.0+|\r\n|success|Function|否|接口调用成功的回调||\r\n|fail|Function|否|接口调用失败的回调函数||\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|&nbsp;|\r\n\r\n**success 返回参数说明**\r\n\r\n|参数名|说明|\r\n|:-|:-|\r\n|authResult|登录服务商提供的登录信息，服务商不同返回的结果不完全相同|\r\n|code|小程序专有，用户登录凭证。开发者需要在开发者服务器后台，使用 code 换取 openid 和 session_key 等信息|\r\n|errMsg|描述信息|\r\n\r\n各个平台的登录流程存在差异，详细请参考相关平台的文档说明：\r\n\r\n* [微信小程序登录](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/login.html)\r\n* [支付宝小程序用户授权](https://docs.alipay.com/mini/introduce/authcode)\r\n* [百度小程序登录](https://smartprogram.baidu.com/docs/develop/api/open_log/%E6%8E%88%E6%9D%83%E6%B5%81%E7%A8%8B%E8%AF%B4%E6%98%8E/)\r\n* [字节跳动小程序登录](https://developer.toutiao.com/dev/cn/mini-app/develop/open-capacity/log-in/login)\r\n* [Apple登录、苹果登录、Sign in with Apple](https://ask.dcloud.net.cn/article/36651)\r\n* [一键登录](/univerify)\r\n\r\n如果服务端使用`uniCloud`，那么官方提供了[uni-id](https://uniapp.dcloud.net.cn/uniCloud/uni-id)云端统一登录服务，把微信登录、短信验证码登录及角色权限管理等服务端登录开发，进行了统一的封装。\r\n\r\n前端统一的`uni.login`和云端统一的`uni-id`搭配，可以极大提升登录业务的开发效率，强烈推荐给开发者使用。uni-id的文档另见：https://uniapp.dcloud.net.cn/uniCloud/uni-id\r\n\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.login({\r\n  provider: 'weixin',\r\n  success: function (loginRes) {\r\n    console.log(loginRes.authResult);\r\n  }\r\n});\r\n```\r\n\r\n\r\n uni.checkSession\r\n检查登录状态是否过期\r\n\r\n> 1.6.0 新增\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|x|x|√|x|√|√|√|\r\n\r\n|属性|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|success|function|否|接口调用成功的回调函数|\r\n|fail|function|否|接口调用失败的回调函数|\r\n|complete|function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n\r\n uni.getUserInfo(OBJECT)\r\n\r\n获取用户信息。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|x|√|√|√|√|√|\r\n\r\n**注意：** 微信小程序端，在用户未授权过的情况下调用此接口，不会出现授权弹窗，会直接进入 fail 回调（详见[《微信小程序公告》](https://developers.weixin.qq.com/community/develop/doc/0000a26e1aca6012e896a517556c01)）。在用户已授权的情况下调用此接口，可成功获取用户信息。\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|平台差异说明|\r\n|:-|:-|:-|:-|:-|\r\n|provider|String|否|登录服务提供商，通过 uni.getProvider 获取||\r\n|withCredentials|Boolean|否|是否带上登录态信息。|微信小程序、字节跳动小程序|\r\n|lang|String|否|指定返回用户信息的语言，默认为 en。更多值请参考下面的说明。|微信小程序|\r\n|timeout|Number|否|超时时间，单位 ms。|微信小程序|\r\n|success|Function|否|接口调用成功的回调||\r\n|fail|Function|否|接口调用失败的回调函数||\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|&nbsp;|\r\n\r\n**lang 值说明**\r\n\r\n|值|说明|\r\n|:-|:-|\r\n|zh_CN|简体中文|\r\n|zh_TW|繁体中文|\r\n|en|英文|\r\n\r\n**注意：**在小程序 withCredentials 为 true 时或是在 App 调用 uni.getUserInfo，要求此前有调用过 uni.login 且登录态尚未过期。微信基础库2.10.4版本对用户信息相关接口进行了调整，使用 uni.getUserInfo 获取得到的 userInfo 为匿名数据，建议使用 uni.getUserProfile 获取用户信息。\r\n\r\n**success 返回参数说明**\r\n\r\n|参数|类型|说明|平台差异说明|\r\n|:-|:-|:-|:-|\r\n|userInfo|OBJECT|用户信息对象||\r\n|rawData|String|不包括敏感信息的原始数据字符串，用于计算签名。||\r\n|signature|String|使用 sha1( rawData + sessionkey ) 得到字符串，用于校验用户信息。|微信小程序、字节跳动小程序|\r\n|encryptedData|String|包括敏感数据在内的完整用户信息的加密数据，详细见加密数据解密算法。|微信小程序、字节跳动小程序|\r\n|iv|String|加密算法的初始向量，详细见加密数据解密算法。|微信小程序、字节跳动小程序|\r\n|errMsg|String|描述信息|&nbsp;|\r\n\r\n**userInfo 参数说明**\r\n\r\n|参数|类型|说明|平台差异说明|\r\n|:-|:-|:-|:-|\r\n|nickName|String|用户昵称||\r\n|openId|String|该服务商唯一用户标识|App|\r\n|avatarUrl|String|用户头像|&nbsp;|\r\n\r\n除了以上三个必有的信息外，不同服务供应商返回的其它信息会存在差异。\r\n\r\n App端登录的扩展说明\r\n\r\nApp端还支持更多登录相关API，如`logout`，[详见](https://www.html5plus.org/doc/zh_cn/oauth.html)\r\n\r\nApp端登录相关的SDK需要在manifest中配置：\r\n1. 打开 manifest.json -> App模块权限配置，勾选 OAuth(登录鉴权)。\r\n2. 打开 manifest.json -> App SDK配置，查看到登录鉴权。在说明中有蓝色链接，其中包括向微信、QQ、微博等平台申请sdk的链接。\r\n3. 向微信、QQ、微博等平台申请到sdk的信息后，回填到manifest里。\r\n4. 这些配置需要打包生效，真机运行仍然是HBuilder基座的设置，可使用[自定义基座包](http://ask.dcloud.net.cn/article/12723)。离线打包请参考离线打包文档在原生工程中配置。\r\n5. 配置并打包后，通过`uni.getProvider`可以得到配置的结果列表，注意这里返回的是manifest配置的，与手机端是否安装微信、QQ、微博无关。\r\n\r\n如果手机端未安装QQ、微博，调用时会启动这些平台的wap页面登录，如果已安装相应客户端，会启动它们的客户端登录。\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.login({\r\n  provider: 'weixin',\r\n  success: function (loginRes) {\r\n    console.log(loginRes.authResult);\r\n    // 获取用户信息\r\n    uni.getUserInfo({\r\n      provider: 'weixin',\r\n      success: function (infoRes) {\r\n        console.log('用户昵称为：' + infoRes.userInfo.nickName);\r\n      }\r\n    });\r\n  }\r\n});\r\n```\r\n\r\n App端集成其他登录SDK如支付宝、淘宝、facebook登录的说明\r\n1. [支付宝登录](https://ext.dcloud.net.cn/search?q=%E6%94%AF%E4%BB%98%E5%AE%9D%E7%99%BB%E9%99%86)、[淘宝登录](https://ext.dcloud.net.cn/search?q=%E7%99%BE%E5%B7%9D)、[抖音登录](https://ext.dcloud.net.cn/search?q=%E6%8A%96%E9%9F%B3%E7%99%BB%E5%BD%95)、[facebook登录](https://ext.dcloud.net.cn/search?q=facebook%E7%99%BB%E5%BD%95)等在插件市场均已有插件，还有[sharesdk](https://ext.dcloud.net.cn/search?q=sharesdk)等专业集成多家登录分享的插件。\r\n2. 也可以内嵌web-view组件，使用web登录模式集成这些三方登录\r\n\r\n\r\n uni.getUserProfile(OBJECT)\r\n\r\n获取用户信息。每次请求都会弹出授权窗口，用户同意后返回 userInfo。\r\n\r\n\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序（基础库2.10.4）|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|x|x|√|x|x|x|x|\r\n\r\n**注意：** 该API仅支持微信小程序端，微信小程序调整了相关接口（详见[《小程序登录、用户信息相关接口调整说明》](https://developers.weixin.qq.com/community/develop/doc/000cacfa20ce88df04cb468bc52801?highLine=getUserProfile%253Afail)）。每次触发 uni.getUserProfile 均会弹出授权窗口，用户授权后可成功获取用户信息。\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|desc|String|是|声明获取用户个人信息后的用途，不超过30个字符|\r\n|lang|String|否|指定返回用户信息的语言，默认为 en。更多值请参考下面的说明。|\r\n|success|Function|否|接口调用成功的回调|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**lang 值说明**\r\n\r\n|值|说明|\r\n|:-|:-|\r\n|zh_CN|简体中文|\r\n|zh_TW|繁体中文|\r\n|en|英文|\r\n\r\n**注意：**可以使用 if(uni.getUserProfile) 判断uni.getUserProfile是否可用。\r\n\r\n**success 返回参数说明**\r\n\r\n|参数|类型|说明|\r\n|:-|:-|:-|\r\n|userInfo|OBJECT|用户信息对象|\r\n|rawData|String|不包括敏感信息的原始数据字符串，用于计算签名。|\r\n|signature|String|使用 sha1( rawData + sessionkey ) 得到字符串，用于校验用户信息。|\r\n|encryptedData|String|包括敏感数据在内的完整用户信息的加密数据，详细见加密数据解密算法。|\r\n|iv|String|加密算法的初始向量，详细见加密数据解密算法。|\r\n|cloudID|String|敏感数据对应的云 ID，开通云开发的小程序才会返回，可通过云调用直接获取开放数据，详细见云调用直接获取开放数据|\r\n|errMsg|String|描述信息|\r\n\r\n**userInfo 参数说明**\r\n\r\n|参数|类型|说明|平台差异说明（仅支持微信小程序）|\r\n|:-|:-|:-||\r\n|nickName|String|用户昵称||\r\n|avatarUrl|String|用户头像|&nbsp;|\r\n|gender|Number|用户性别||\r\n|country|String|用户所在国家||\r\n|province|String|用户所在省份||\r\n|city|String|用户所在城市||\r\n|language|String|显示 country，province，city 所用的语言||\r\n\r\n**gender 的合法值**\r\n\r\n|值|说明|\r\n|:-|:-|\r\n|0|未知|\r\n|1|男性|\r\n|2|女性|\r\n\r\n**language 的合法值**\r\n\r\n|值|说明|\r\n|:-|:-|\r\n|en|英文|\r\n|zh_CN|简体中文|\r\n|zh_TW|繁体中文|\r\n\r\n\r\n uni.preLogin(OBJECT)\r\n预登录。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|3.0.0+|x|x|x|x|x|x|\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|provider|String|否|登录服务提供商，通过 [uni.getProvider](/api/plugins/provider) 获取，目前仅支持[一键登录](/univerify)|\r\n|success|Function|否|接口调用成功的回调|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n\r\n uni.closeAuthView()\r\n关闭[一键登录](/univerify)页面。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|3.0.0+|x|x|x|x|x|x|\r\n","p":"command\\第三方服务 - 登录.html"},{"t":"第三方服务/分享","d":"**分享**\r\n\r\n在不同平台，分享的调用方式和逻辑有较大差异。\r\n- App：可以自主控制分享内容、分享形式及分享平台\r\n1. 使用 ``uni.share`` API方式调用社交sdk分享\r\n2. 使用[plus.share.sendWithSystem](http://www.html5plus.org/doc/zh_cn/share.htmlplus.share.sendWithSystem)呼起手机os的系统分享菜单\r\n- 小程序：不支持API调用，只能用户主动点击触发分享。可使用自定义按钮方式 &lt;button open-type=\"share\"&gt; 或监听系统右上角的分享按钮 onShareAppMessage 进行自定义分享内容\r\n- H5：如果是普通浏览器，浏览器自带分享按钮；如果是在微信内嵌浏览器中，可调用js-sdk进行分享，[参考](https://ask.dcloud.net.cn/article/35380)\r\n- APP：可以直接使用已经封装好的uni-share插件[详情](https://ext.dcloud.net.cn/plugin?id=4860)\r\n\r\n uni.share(OBJECT)\r\nuni-app的App引擎已经封装了微信、QQ、微博的分享SDK，开发者可以直接调用相关功能。\r\n\r\n可以分享到微信、QQ、微博，每个社交平台被称为分享服务提供商，即provider。\r\n\r\n可以分享文字、图片、图文横条、音乐、视频等多种形式。同时注意，分享为小程序也使用本API。即在App里可以通过本API把一个内容以小程序（通常为内容页）方式直接分享给微信好友。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|x|x|x|x|x|x|\r\n\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|provider|String|是|分享服务提供商（即weixin&124;qq&124;sinaweibo），通过 [uni.getProvider](/api/plugins/provider) 获取可用的分享服务商，可用是指在manifest.json的sdk配置中配的分享sdk厂商，与本机安装了什么社交App无关|\r\n|type|Number|否|分享形式，如图文、纯文字、纯图片、音乐、视频、小程序等。默认图文 0。不同分享服务商支持的形式不同，具体参考下面type值说明。|\r\n|title|String|否|分享内容的标题|\r\n|scene|String|provider 为 weixin 时必选|场景，可取值参考下面说明。|\r\n|summary|String|type 为 1 时必选|分享内容的摘要|\r\n|href|String|type 为 0 时必选|跳转链接|\r\n|imageUrl|String|type 为 0、2、5 时必选|图片地址。type为0时，推荐使用小于20Kb的图片|\r\n|mediaUrl|String|type 为 3、4 时必选|音视频地址|\r\n|miniProgram|Object|type 为 5 时必选|分享小程序必要参数|\r\n|success|Function|否|接口调用成功的回调|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**type 值说明**\r\n\r\n|值|说明|provider 支持度|\r\n|:-|:-|:-|\r\n|0|图文|weixin、sinaweibo|\r\n|1|纯文字|weixin、qq|\r\n|2|纯图片|weixin、qq|\r\n|3|音乐|weixin、qq|\r\n|4|视频|weixin、sinaweibo|\r\n|5|小程序|weixin|\r\n\r\n**scene 值说明**\r\n\r\n|值|说明|\r\n|:-|:-|\r\n|WXSceneSession|分享到聊天界面|\r\n|WXSenceTimeline|分享到朋友圈|\r\n|WXSceneFavorite|分享到微信收藏|\r\n\r\n**miniProgram 值说明**\r\n\r\n|值|类型|说明|\r\n|:-|:-|:-|\r\n|id|String|微信小程序原始id|\r\n|path|String|点击链接进入的页面|\r\n|type|Number|微信小程序版本类型，可取值： 0-正式版； 1-测试版； 2-体验版。 默认值为0。|\r\n|webUrl|String|兼容低版本的网页链接|\r\n\r\n**注意事项：**\r\n\r\n* 真机运行时，分享调用的是HBuilder真机运行基座的sdk配置，分享出去的内容会显示为HBuilder。需自行在各社交平台注册账户，在manifest的sdk配置中填写自己的配置，打包后生效。\r\n* 分享到 QQ 必须含有 href 链接\r\n* 分享文字到 QQ 时，title 必选\r\n* 新浪微博仅支持分享本地音视频，不能分享网络音视频\r\n* 仅支持分享微信小程序到微信聊天界面，想进入朋友圈需改为分享图片方式，在图片中包含小程序码。一般通过canvas绘制图片，插件市场有很多生成图片的插件。\r\n* 在 iOS 端，若未安装微博客户端，会启用微博的网页分享，此时不能分享图片\r\n* 分享新浪微博不会返回正确的成功回调\r\n* 不能直接分享到QQ空间，可以分享到QQ，然后在QQ的界面里选择QQ空间。\r\n* 分享微信朋友圈多图，微信官方已经禁掉这个功能。可以考虑把多张图用canvas合并成一张图分享出去。\r\n* 从APP分享到微信时，无法判断用户是否点击取消分享，因为微信官方禁掉了分享成功的返回值。\r\n\r\n 分享到微信聊天界面示例代码\r\n\r\n**分享文字**\r\n```javascript\r\nuni.share({\r\n\tprovider: \"weixin\",\r\n\tscene: \"WXSceneSession\",\r\n\ttype: 1,\r\n\tsummary: \"我正在使用HBuilderX开发uni-app，赶紧跟我一起来体验！\",\r\n\tsuccess: function (res) {\r\n\t\tconsole.log(\"success:\" + JSON.stringify(res));\r\n\t},\r\n\tfail: function (err) {\r\n\t\tconsole.log(\"fail:\" + JSON.stringify(err));\r\n\t}\r\n});\r\n```\r\n\r\n**分享图片**\r\n```javascript\r\nuni.share({\r\n\tprovider: \"weixin\",\r\n\tscene: \"WXSceneSession\",\r\n\ttype: 2,\r\n\timageUrl: \"https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/d8590190-4f28-11eb-b680-7980c8a877b8.png\",\r\n\tsuccess: function (res) {\r\n\t\tconsole.log(\"success:\" + JSON.stringify(res));\r\n\t},\r\n\tfail: function (err) {\r\n\t\tconsole.log(\"fail:\" + JSON.stringify(err));\r\n\t}\r\n});\r\n```\r\n\r\n\r\n**分享图文**\r\n\r\nhref、imageUrl 为必选参数，title/summary 二选一，最好将这四个参数都选上。\r\n\r\n```javascript\r\nuni.share({\r\n\tprovider: \"weixin\",\r\n\tscene: \"WXSceneSession\",\r\n\ttype: 0,\r\n\thref: \"http://uniapp.dcloud.io/\",\r\n\ttitle: \"uni-app分享\",\r\n\tsummary: \"我正在使用HBuilderX开发uni-app，赶紧跟我一起来体验！\",\r\n\timageUrl: \"https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/d8590190-4f28-11eb-b680-7980c8a877b8.png\",\r\n\tsuccess: function (res) {\r\n\t\tconsole.log(\"success:\" + JSON.stringify(res));\r\n\t},\r\n\tfail: function (err) {\r\n\t\tconsole.log(\"fail:\" + JSON.stringify(err));\r\n\t}\r\n});\r\n```\r\n\r\n\r\n 分享到微信朋友圈示例代码\r\n\r\n**分享文字**\r\n```javascript\r\nuni.share({\r\n\tprovider: \"weixin\",\r\n\tscene: \"WXSenceTimeline\",\r\n\ttype: 1,\r\n\tsummary: \"我正在使用HBuilderX开发uni-app，赶紧跟我一起来体验！\",\r\n\tsuccess: function (res) {\r\n\t\tconsole.log(\"success:\" + JSON.stringify(res));\r\n\t},\r\n\tfail: function (err) {\r\n\t\tconsole.log(\"fail:\" + JSON.stringify(err));\r\n\t}\r\n});\r\n```\r\n\r\n**分享图片**\r\n```javascript\r\nuni.share({\r\n\tprovider: \"weixin\",\r\n\tscene: \"WXSenceTimeline\",\r\n\ttype: 2,\r\n\timageUrl: \"https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/d8590190-4f28-11eb-b680-7980c8a877b8.png\",\r\n\tsuccess: function (res) {\r\n\t\tconsole.log(\"success:\" + JSON.stringify(res));\r\n\t},\r\n\tfail: function (err) {\r\n\t\tconsole.log(\"fail:\" + JSON.stringify(err));\r\n\t}\r\n});\r\n```\r\n\r\n**分享图文**\r\n\r\nhref、imageUrl 为必选参数，title、summary 至少有一项。\r\n\r\n```javascript\r\nuni.share({\r\n\tprovider: \"weixin\",\r\n\tscene: \"WXSenceTimeline\",\r\n\ttype: 0,\r\n\thref: \"http://uniapp.dcloud.io/\",\r\n\ttitle: \"uni-app分享\",\r\n\tsummary: \"我正在使用HBuilderX开发uni-app，赶紧跟我一起来体验！\",\r\n\timageUrl: \"https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/d8590190-4f28-11eb-b680-7980c8a877b8.png\",\r\n\tsuccess: function (res) {\r\n\t\tconsole.log(\"success:\" + JSON.stringify(res));\r\n\t},\r\n\tfail: function (err) {\r\n\t\tconsole.log(\"fail:\" + JSON.stringify(err));\r\n\t}\r\n});\r\n```\r\n\r\n**App分享为微信小程序**（App中分享一个内容到微信好友，对方微信中呈现的是一个小程序卡片）\r\n\r\n```javascript\r\nuni.share({\r\n    provider: 'weixin',\r\n    scene: \"WXSceneSession\",\r\n    type: 5,\r\n    imageUrl: 'https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/962fc340-4f2c-11eb-bdc1-8bd33eb6adaa.png',\r\n    title: '欢迎体验uniapp',\r\n    miniProgram: {\r\n        id: 'gh_abcdefg',\r\n        path: 'pages/index/index',\r\n        type: 0,\r\n        webUrl: 'http://uniapp.dcloud.io'\r\n    },\r\n    success: ret => {\r\n        console.log(JSON.stringify(ret));\r\n    }\r\n});\r\n```\r\n\r\n\r\n uni.share 在App端各社交平台分享配置说明\r\n\r\n- 第一步，打开 manifest.json -> App模块权限配置，勾选 Share(分享)；\r\n- 第二步，按如下文档具体配置微信、微博、QQ的参数。\r\n\r\n 微信分享\r\n\r\n在 manifest.json 的 App SDK 配置里，勾选微信消息及朋友圈，并填写 appid，如需在iOS平台使用还需要配置通用链接。\r\n\r\n**参考文档**\r\n\r\n- 微信 appid 申请步骤：[https://ask.dcloud.net.cn/article/208](https://ask.dcloud.net.cn/article/208)。\r\n- iOS平台微信SDK配置通用链接：[https://ask.dcloud.net.cn/article/36445](https://ask.dcloud.net.cn/article/36445)。\r\n\r\n![](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/da6b1be0-4f2c-11eb-8a36-ebb87efcf8c0.png)\r\n\r\n 新浪微博分享\r\n在 manifest.json 的 App SDK 配置里，勾选勾选新浪微博，并填写相关appkey，新浪微博 appkey 申请步骤可参考：[https://ask.dcloud.net.cn/article/209](https://ask.dcloud.net.cn/article/209)。\r\n\r\n![](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/db61d7f0-4f2c-11eb-8a36-ebb87efcf8c0.png)\r\n\r\n QQ 分享\r\n在 manifest.json 的 App SDK 配置里，勾选分享到QQ好友，并填写相关appkey，QQ分享 appkey 申请步骤：\r\n\r\n1. 前往 QQ 开放平台：[https://connect.qq.com/index.html](https://connect.qq.com/index.html)；\r\n2. 完成开发者注册；\r\n3. 创建应用，选择移动 App，填写相关信息，然后等待审核，审核通过后即可得到AppId。\r\n\r\n![](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/d97fd180-4f2c-11eb-bdc1-8bd33eb6adaa.png)\r\n\r\n这些配置需要打包生效，真机运行仍然是HBuilder基座的设置，可使用[自定义基座包](http://ask.dcloud.net.cn/article/12723)调试。离线打包请参考离线打包文档在原生工程中配置。\r\n\r\n配置并打包后，通过`uni.getProvider`可以得到配置的结果列表，注意这里返回的是manifest配置的，与手机端是否安装微信、QQ、微博无关。\r\n\r\n如果手机端未安装QQ、微博，调用时会启动这些平台的wap页面分享，如果已安装相应客户端，会启动它们的客户端分享。\r\n\r\n\r\n FAQ\r\n- Q：App端如何集成其他分享SDK，如facebook分享、twitter分享\r\n- A：插件市场已有相关插件，[详见](https://ext.dcloud.net.cn/search?q=share)；也可以根据原生插件教程自行开发，原生插件开发文档见[https://ask.dcloud.net.cn/article/35428](https://ask.dcloud.net.cn/article/35428)\r\n\r\n- Q：弹出分享菜单，是否有已经写好的插件？\r\n- A：插件市场有很多封装好的分享菜单插件，[底部图标菜单](https://ext.dcloud.net.cn/search?q=%E5%BA%95%E9%83%A8%E5%9B%BE%E6%A0%87%E8%8F%9C%E5%8D%95)，可直接弹出菜单，并且没有遮挡层级问题，推荐使用。\r\n\r\n uni.shareWithSystem(OBJECT)\r\n\r\n调用系统分享组件发送分享消息，不需要配置分享SDK\r\n\r\n**平台差异说明**\r\n\r\n|App\t\t\t\t\t\t|H5\t|微信小程序\t|支付宝小程序\t|百度小程序\t|字节跳动小程序\t|QQ小程序\t|\r\n|:-:\t\t\t\t\t\t|:-:|:-:\t\t\t\t|:-:\t\t\t\t\t|:-:\t\t\t\t|:-:\t\t\t\t|:-:\t\t\t|\r\n|√(App 2.6.4+)\t|x\t|x\t\t\t\t\t|x\t\t\t\t\t\t|x\t\t\t\t\t|x\t\t\t\t\t|x\t\t\t\t|\r\n\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名\t\t|类型\t\t|必填\t|说明\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|:-\t\t\t\t|:-\t\t\t|:-\t\t|:-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|type\t\t\t|String\t|-\t\t|分享类型，只支持text，image，默认为text|\r\n|summary\t|String\t|-\t\t|分享的文字内容\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|href\t\t\t|String\t|-\t\t|分享链接，ios端分享到微信时必填此字段\t|\r\n|imageUrl\t|String\t|-\t\t|分享图片，仅支持本地路径\t\t\t\t\t\t\t\t|\r\n|success|Function|否|接口调用成功的回调|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**注意事项**\r\n\r\n- Android端当msg参数中设置图片（`imageUrl`属性）时，分享类型自动变为为`image`，在分享时可能只会发送图片（如微信）；没有设置图片时分享类型则认为是文本`text`。\r\n- Android端高版本无法分析私有路径的图片，只能分享来自相册的图片（使用 uni.chooseImage 选择图像时请设置为原图）。\r\n- iOS端不同的分享程序对分享内容有要求，如微信分享时必需添加链接地址`href`，否则微信分享失败。 注：iOS8.0及以上系统触发成功回调则表示发送消息成功。\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nuni.shareWithSystem({\r\n  summary: '',\r\n  href: 'https://uniapp.dcloud.io',\r\n  success(){\r\n    // 分享完成，请注意此时不一定是成功分享\r\n  },\r\n  fail(){\r\n    // 分享失败\r\n  }\r\n})\r\n```\r\n\r\n plus.share.sendWithSystem(msg, successCB, errorCB)\r\n\r\nAndroid和iOS都有应用注册分享接口的机制，基本上所有有接收分享内容功能的应用，都会注册分享接口。\r\n\r\nApp端可调用手机的系统分享，实现所有注册分享的应用的呼起，比如短信、邮件、蓝牙(仅Android)、隔空投送(仅iOS)，或其他注册系统分享的应用，比如钉钉。\r\n\r\n与`uni.share`相比，调用系统分享不需要集成三方sdk。但有些功能上的限制，比如无法分享为微信小程序。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|x|x|x|x|x|x|\r\n\r\n说明：\r\n调用系统分享组件分享消息，通过msg参数设置分享内容。 发送成功后通过successCB回调函数通知操作完成，发送失败则通过errorCB回调返回。\r\n\r\n|参数|类型|说明|\r\n|:-|:-|:-|\r\n|msg|object|要发送的分享消息对象，如文字内容，图片等信息。对象格式见下。必填|\r\n|successCB||成功回调，可选。注：此回调仅保证呼起分享界面，并不表示分享消息已经发送成功|\r\n|errorCB||失败回调，可选|\r\n\r\n**msg参数说明**\r\n\r\n|参数|类型|说明|\r\n|:-|:-|:-|\r\n|type|String|分享类型，仅支持text、image|\r\n|content|String|分享消息的文字内容|\r\n|pictures|Array[ String ]|分享消息中包含的图片路径，仅支持本地路径。 若分享平台仅支持提交一张图片，传入多张图片则仅提交第一张图片。 如果未指定type类型，优先级顺序为：pictures>content（即设置了pictures则认为分享图片类型）。|\r\n|href|String|分享独立的链接地址，仅支持网络地址（以http://或https://开头）。 如果未指定type类型，优先级顺序为：href>pictures>content（即设置了href则认为分享网页类型）。|\r\n\r\n**示例代码**\r\n```javascript\r\n\tplus.share.sendWithSystem({content:'分享内容',href:'https://www.dcloud.io/'}, function(){\r\n\t\tconsole.log('分享成功');\r\n\t}, function(e){\r\n\t\tconsole.log('分享失败：'+JSON.stringify(e));\r\n\t});\r\n```\r\n\r\n**注意**\r\n- Android：当msg参数中设置图片（msg.pictures属性）时，分享类型为\"image\"，在分享时可能只会发送图片（如微信）；没有设置图片时分享类型则认为是文本\"text\"。\r\n- iOS：不同的分享程序对分享内容有要求，如微信分享时必需添加链接地址（msg.href），否则微信分享失败。 注：iOS8.0及以上系统表示分享操作成功则表示发送消息成功。\r\n- 很多App的做法是点击分享按钮首先弹出一个自定义菜单，放置微信好友、朋友圈、QQ、微博等功能图标，然后再放置一个更多分享，点击后会调用系统分享。类似插件在[插件市场](https://ext.dcloud.net.cn/search?q=%E5%BA%95%E9%83%A8%E5%9B%BE%E6%A0%87%E8%8F%9C%E5%8D%95)很多。\r\n\r\n onShareAppMessage(OBJECT)\r\n\r\n小程序中用户点击分享后，在 js 中定义 onShareAppMessage 处理函数（和 onLoad 等生命周期函数同级），设置该页面的分享信息。\r\n\r\n* 用户点击分享按钮的时候会调用。这个分享按钮可能是小程序右上角原生菜单自带的分享按钮，也可能是开发者在页面中放置的分享按钮（`<button open-type=\"share\">`）；\r\n* 此事件需要 return 一个Object，用于自定义分享内容。\r\n\r\n微信小程序平台的分享管理比较严格，请参考 [小程序分享指引](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/share.html)。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|x|x|√|√|x|√|√|\r\n\r\n\r\n|参数|类型|说明|平台差异说明|\r\n|:-|:-|:-|:-|\r\n|from|String|分享事件来源：button（页面内分享按钮）、menu（右上角分享按钮）||\r\n|target|Object|如果 from 值是 button，则 target 是触发这次分享事件的 button，否则为 undefined||\r\n|webViewUrl|String|页面中包含 ``<web-view>`` 组件时，返回当前 ``<web-view>`` 的url|微信小程序1.6.4+、支付宝小程序|\r\n\r\n此事件需要 return 一个 Object，用于自定义分享内容，其内容如下：\r\n\r\n|参数名\t\t\t|类型\t\t\t|必填\t|说明\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|平台差异说明\t\t\t\t\t\t\t|\r\n|:-\t\t\t\t\t|:-\t\t\t\t|:-\t\t|:-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|:-\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|title\t\t\t|String\t\t|是\t\t|分享标题\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|path\t\t\t\t|String\t\t|是\t\t|页面 path ，必须是以 / 开头的完整路径。\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|QQ小程序不支持\t\t\t\t\t\t|\r\n|imageUrl\t\t|String\t\t|否\t\t|分享图标，路径可以是本地文件路径、代码包文件路径或者网络图片路径。支持PNG及JPG。显示图片长宽比是 5:4\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|content\t\t|String\t\t|否\t\t|百度小程序表现为：分享内容；支付宝小程序表现为：吱口令文案\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|百度小程序、支付宝小程序\t|\r\n|desc\t\t\t\t|String\t\t|否\t\t|自定义分享描述\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|支付宝小程序、字节跳动小程序\t|\r\n|bgImgUrl\t\t|String\t\t|否\t\t|自定义分享二维码的背景图，建议大小750*950（网络图片路径）\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|支付宝小程序\t\t\t\t\t\t\t|\r\n|query\t\t\t|String\t\t|否\t\t|QQ小程序查询字符串，必须是 key1=val1&key2=val2 的格式。从这条转发消息进入后，可通过 qq.getLaunchOptionSync() 或 qq.onShow() 获取启动参数中的 query。\t|QQ小程序\t\t\t\t\t\t\t\t\t|\r\n|templateId\t|String\t\t|否\t\t|开发者后台设置的分享素材模板 id\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|字节跳动小程序\t\t\t\t\t\t\t\t|\r\n|success\t\t|Function\t|否\t\t|接口调用成功的回调函数\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|支付宝小程序、百度小程序\t|\r\n|fail\t\t\t\t|Function\t|否\t\t|接口调用失败的回调函数\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|支付宝小程序、百度小程序\t|\r\n|complete\t\t|Function\t|否\t\t|接口调用结束的回调函数（调用成功、失败都会执行）\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|百度小程序\t\t\t\t\t\t\t\t|\r\n\r\n**示例代码**\r\n\r\n```javascript\r\nexport default {\r\n  onShareAppMessage(res) {\r\n    if (res.from === 'button') {// 来自页面内分享按钮\r\n      console.log(res.target)\r\n    }\r\n    return {\r\n      title: '自定义分享标题',\r\n      path: '/pages/test/test?id=123'\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n**注意**\r\n* 微信、头条平台：只有定义了此事件处理函数，小程序右上角菜单才会显示“转发”按钮\r\n* QQ小程序还支持通过[qq.offShareAppMessage](https://q.qq.com/wiki/develop/game/API/share/qq.offShareAppMessage.html)取消对系统分享按钮的监听。\r\n\r\n uni.showShareMenu(OBJECT)\r\n\r\n小程序的原生菜单中显示分享按钮\r\n\r\n**平台差异说明**\r\n\r\n|App|H5\t|微信小程序\t|支付宝小程序\t|百度小程序\t|字节跳动小程序\t|QQ小程序\t|\r\n|:-:|:-:|:-:\t\t\t\t|:-:\t\t\t\t\t|:-:\t\t\t\t|:-:\t\t\t\t|:-:\t\t\t|\r\n|x\t|x\t|√\t\t\t\t\t|√\t\t\t\t\t\t|√\t\t\t\t\t|√\t\t\t\t\t|√\t\t\t\t|\r\n\r\n|属性\t\t\t\t\t\t|类型\t\t\t|必填\t|说明\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|平台差异说明\t|\r\n|:-\t\t\t\t\t\t\t|:-\t\t\t\t|:-\t\t|:-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|:-\t\t\t\t\t\t|\r\n|withShareTicket|Boolean\t|否\t\t|是否使用带 shareTicket 的转发，默认为 flase。[详情](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/share.html)|微信小程序\t\t|\r\n|title\t\t\t\t\t|String\t\t|否\t\t|分享标题\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|百度小程序\t\t|\r\n|content\t\t\t\t|String\t\t|否\t\t|分享内容\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|百度小程序\t\t|\r\n|imageUrl\t\t\t\t|String\t\t|否\t\t|分享图标\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|百度小程序\t\t|\r\n|path\t\t\t\t\t\t|String\t\t|否\t\t|页面 path ，必须是以 / 开头的完整路径。\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|百度小程序\t\t|\r\n|success\t\t\t\t|Function\t|否\t\t|接口调用成功的回调函数\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\t\t\t\t\t\t\t|\r\n|fail\t\t\t\t\t\t|Function\t|否\t\t|接口调用失败的回调函数\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\t\t\t\t\t\t\t|\r\n|complete\t\t\t\t|Function\t|否\t\t|接口调用结束的回调函数（调用成功、失败都会执行）\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|&nbsp;\t\t\t\t|\r\n\r\n uni.hideShareMenu(OBJECT)\r\n小程序的原生菜单中隐藏分享按钮\r\n\r\n**平台差异说明**\r\n\r\n|App|H5\t|微信小程序\t|支付宝小程序\t|百度小程序\t|字节跳动小程序\t|\r\n|:-:|:-:|:-:\t\t\t\t|:-:\t\t\t\t\t|:-:\t\t\t\t|:-:\t\t\t\t|\r\n|x\t|x\t|√\t\t\t\t\t|√(1.17.0+)\t|x\t\t\t\t\t|√\t\t\t\t\t|\r\n\r\n|属性\t\t\t\t\t\t|类型\t\t\t|必填\t|说明\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|平台差异说明\t|\r\n|:-\t\t\t\t\t\t\t|:-\t\t\t\t|:-\t\t|:-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|:-\t\t\t\t\t\t|\r\n|hideShareItems\t|Array\t\t|否\t\t|['qq']控制是否隐藏\"转发\"，['qzone']控制是否隐藏\"分享到空间\"，不带hideShareItems参数默认\"转发\"、\"分享到空间\"全隐藏。目前只支持'qq'、'qzone'。\t|QQ小程序\t\t\t|\r\n|success\t\t\t\t|function\t|否\t\t|接口调用成功的回调函数\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\t\t\t\t\t\t\t|\r\n|fail\t\t\t\t\t\t|function\t|否\t\t|接口调用失败的回调函数\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\t\t\t\t\t\t\t|\r\n|complete\t\t\t\t|function\t|否\t\t|接口调用结束的回调函数（调用成功、失败都会执行）\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\t\t\t\t\t\t\t|\r\n\r\n**代码示例**\r\n\r\n```javascript\r\nuni.hideShareMenu()\r\n```\r\n\r\n**注意**\r\n* QQ小程序可以单独控制隐藏分享到QQ好友或分享到QQ空间，详见其[API文档](https://q.qq.com/wiki/develop/game/API/share/qq.hideShareMenu.html)\r\n","p":"command\\第三方服务 - 分享.html"},{"t":"第三方服务/支付","d":" uni.requestPayment(OBJECT)\r\n支付\r\n\r\nuni.requestPayment是一个统一各平台的客户端支付API，不管是在某家小程序还是在App中，客户端均使用本API调用支付。\r\n\r\n本API运行在各端时，会自动转换为各端的原生支付调用API。\r\n\r\n注意支付不仅仅需要客户端的开发，还需要服务端开发。虽然客户端API统一了，但各平台的支付申请开通、配置回填仍然需要看各个平台本身的支付文档。\r\n\r\n比如微信有App支付、小程序支付、H5支付等不同的申请入口和使用流程，对应到uni-app，在App端要申请微信的App支付，而小程序端则申请微信的小程序支付。\r\n\r\n如果服务端使用[uniCloud](https://uniapp.dcloud.io/uniCloud/README)，那么官方提供了[uniPay](https://uniapp.dcloud.io/uniCloud/unipay)云端统一支付服务，把App、微信小程序、支付宝小程序里的服务端支付开发进行了统一的封装。\r\n\r\n前端统一的`uni.requestPayment`和云端统一的`uniPay`搭配，可以极大提升支付业务的开发效率，强烈推荐给开发者使用。`uniPay`的文档另见：[https://uniapp.dcloud.io/uniCloud/unipay](https://uniapp.dcloud.io/uniCloud/unipay)\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|√|[说明](/api/plugins/payment?id=h5-payment)|√|√|√|√|√|\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|平台差异说明|\r\n|:-|:-|:-|:-||\r\n|provider|String|是|服务提供商，通过 [uni.getProvider](/api/plugins/provider) 获取。||\r\n|orderInfo|String/Object|是|订单数据，[注意事项](/api/plugins/payment?id=orderinfo)|App、支付宝小程序、百度小程序、字节跳动小程序|\r\n|timeStamp|String|微信小程序必填|时间戳从1970年1月1日至今的秒数，即当前的时间。|微信小程序|\r\n|nonceStr|String|微信小程序必填|随机字符串，长度为32个字符以下。|微信小程序|\r\n|package|String|微信小程序必填|统一下单接口返回的 prepay_id 参数值，提交格式如：prepay_id=xx。|微信小程序|\r\n|signType|String|微信小程序必填|签名算法，暂支持 MD5。|微信小程序|\r\n|paySign|String|微信小程序必填|签名，具体签名方案参见 [微信小程序支付文档](https://pay.weixin.qq.com/wiki/doc/api/wxa/wxa_api.php?chapter=7_7&index=3)|微信小程序|\r\n|bannedChannels|Array&lt;String&gt;|否|需要隐藏的支付方式，详见 [百度小程序支付文档](https://smartprogram.baidu.com/docs/develop/api/open_payment/requestPolymerPayment/)|百度小程序|\r\n|service|Number|字节跳动小程序必填|固定值：1（拉起小程序收银台）开发者如果不希望使用字节跳动小程序收银台，service设置为3/4时，可以直接拉起微信/支付宝进行支付：service=3： 微信API支付，不拉起小程序收银台；service=4： 支付宝API支付，不拉起小程序收银台。其中service=3、4，仅在1.35.0.1+基础库(头条743+)支持|字节跳动小程序|\r\n|_debug|Number|否|仅限调试用，上线前去掉该参数。_debug=1时，微信支付期间可以看到中间报错信息，方便调试|字节跳动小程序|\r\n|getOrderStatus|Function|字节跳动小程序必填|商户前端实现的查询支付订单状态方法（该方法需要返回个Promise对象）。 service=3、4时不需要传。|字节跳动小程序|\r\n|success|Function|否|接口调用成功的回调||\r\n|fail|Function|否|接口调用失败的回调函数||\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|&nbsp;|\r\n\r\n\r\n 注意事项\r\n- APP端，如果你的应用在用户完成支付后；立即给支付的用户push消息通知。会与前端支付回调相互冲突，请延迟执行推送。\r\n- 字节跳动小程序支付接口调整使用时请注意[发起头条支付](https://developer.toutiao.com/dev/cn/mini-app/develop/open-capacity/payment/pay)\r\n\r\n orderInfo 注意事项@orderInfo\r\n1. 百度小程序的 orderInfo 为 Object 类型，详细的数据结构，参考：[百度收银台支付](https://smartprogram.baidu.com/docs/develop/api/open_payment/requestPolymerPayment/)。\r\n2. 支付宝小程序的 orderInfo(支付宝的规范为 tradeNO) 为 String 类型，表示支付宝交易号。\r\n3. 字节跳动小程序的 orderInfo 为 Object 类型，详见：[发起头条支付](https://developer.toutiao.com/dev/cn/mini-app/develop/open-capacity/payment/pay)\r\n4. 由于头条新版支付接口要求版本较高，在不支持新版支付接口的情况下仍会对应旧版支付接口，此时 orderInfo 对应字节跳动小程序 data， 详见：[头条支付旧版接口](https://developer.toutiao.com/dev/cn/mini-app/develop/open-capacity/payment/requestpayment-deprecated)。用户可以使用 tt.pay 判断是否支持新版接口。另外需要注意字节跳动小程序在`1.35.0+`版本基础库支持了 canIUse ，在`1.19.4+`版本基础库支持了新版支付接口 tt.pay ，所以应避免使用 canIUse 判断是否为新版接口。\r\n5. App端，支付宝支付 orderInfo 为 String 类型。\r\n6. App端，微信支付 orderInfo 为 Object 类型。\r\n6. App端，苹果应用内支付 orderInfo 为Object 类型，{productid: 'productid'}。\r\n\r\n H5 平台@h5-payment\r\n- 普通浏览器平台的支付，仍然是常规web做法。uni-app未封装。\r\n- 在普通浏览器里也可以调起微信进行支付，这个在微信叫做H5支付，此功能未开放给普通开发者，需向微信单独申请，[详见](https://pay.weixin.qq.com/wiki/doc/api/H5.php?chapter=15_1)\r\n- 微信内嵌浏览器运行H5版时，可通过js sdk实现微信支付，需要引入一个单独的js，[详见](https://ask.dcloud.net.cn/article/35380)\r\n\r\n**各平台支持的支付情况说明**\r\n- 微信小程序里只支持微信小程序支付，在 [微信商户平台](https://pay.weixin.qq.com) 申请支付时，选择公众号支付。\r\n- App 里支持微信sdk支付、支付宝sdk支付、苹果iap应用内支付，在各平台申请支付时选择 App 支付。\r\n- 其他支付（如银联）请使用web-view组件以H5方式实现。\r\n- 支付宝小程序只支持支付宝支付。\r\n- 百度小程序为百度支付，其二次封装了度小满、支付宝、微信支付。\r\n- Hello uniapp 里演示了各种支付。\r\n\r\n App平台支付流程\r\n\r\n流程：支付平台功能申请 -> ``manifest.json`` 里配置支付参数 -> ``uni-app`` 里调用 API 进行支付\r\n\r\n App支付功能申请\r\n\r\n1. 支付宝App支付功能申请\r\n\r\n    登录支付宝账号，创建应用接入支付宝App支付能力，包括以下步骤：\r\n\r\n    - 创建应用（获取appid） \r\n    - 开通App支付功能 \r\n    - 配置密钥（获取公钥、私钥） \r\n    \r\n  具体可参考支付宝官方文档： [App支付快速接入](https://docs.open.alipay.com/204/105297/)\r\n\r\n2. 微信App支付功能申请\r\n\r\n    - 到 [微信开放平台](https://open.weixin.qq.com/) 申请移动应用并开通支付功能，申请应用后可以获取 AppID 和 AppSecret 值\r\n    - 应用接入 [微信商户平台](https://pay.weixin.qq.com)，选择 App 支付\r\n    - 开通支付功能后可获取支付业务服务器配置数据：PARTNER（财付通商户号）、PARTNER_KEY（财付通密钥）、PAYSIGNKEY（支付签名密钥）\r\n\t- 需要将从微信开放平台申请的appid，填回到 manifest-App SDK配置-支付-微信支付 中。打包后生效。\r\n    \r\n  具体可参考微信官方文档： [移动应用开发](https://open.weixin.qq.com/cgi-bin/frame?t=home/app_tmpl&lang=zh_CN)\r\n  \r\n  注意微信的App支付、小程序支付、H5支付是不同的体系。微信小程序支付在 [微信商户平台](https://pay.weixin.qq.com) 申请支付时，选择公众号支付；普通浏览器里也可以调起微信进行支付，这个在微信叫做H5支付，此功能未开放给普通开发者，需向微信单独申请，[详见](https://pay.weixin.qq.com/wiki/doc/api/H5.php?chapter=15_1)\r\n\r\n3. 苹果iap应用内支付申请\r\n\r\n    使用苹果开发者账号登录 [App Store Connect](https://appstoreconnect.apple.com)，在应用的功能选项卡页面，添加 App 内购项目。注意：\r\n    - 内购项目的各信息需要填写完整，然后保存，此时内购项目的状态应该是准备提交，当提交应用通过审核后，状态则变为已批准\r\n    - 测试时，建议使用测试证书打一个自定义的 iOS 基座进行测试\r\n    - 在应用 TestFight 的选项卡添加 App Store Connect 用户，测试支付时可以使用此用户帐号进行测试\r\n    - orderInfo 的 productid 是自己填写的产品 ID\r\n    - 调用 ``uni.requestPayment`` 前必须先使用 5+Plus 的方法调用 requestOrder 获取订单信息，否则会导致无法支付\r\n    - 更多可参考：[https://ask.dcloud.net.cn/article/497](https://ask.dcloud.net.cn/article/497)\r\n    \r\n manifest.json里配置相关参数\r\n\r\n1. 在`manifest.json - App模块权限选择` 中勾选 payment(支付)\r\n2. 在 `manifest.json - App SDK配置` 中，勾选需要的支付平台，目前有微信支付、支付宝支付、苹果应用内支付(IAP)，其中微信支付需要填写从微信开放平台获取的AppID\r\n![](https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/b803e140-4f1d-11eb-8ff1-d5dcf8779628.png)\r\n<!-- ![uniapp](https://img-cdn-qiniu.dcloud.net.cn/uniapp/doc/pay1.png) -->\r\n<!-- 临时把老图注掉，替换正式地址时再把老图地址放开 -->\r\n3. 这些配置需要打包生效，真机运行仍然是HBuilder基座的设置，可使用自定义基座调试。离线打包请参考离线打包文档在原生工程中配置。\r\n4. 配置并打包后，通过`uni.getProvider`可以得到配置的结果列表，注意这里返回的是manifest配置的，与手机端是否安装微信、支付宝无关。\r\n\r\n如果手机端未安装支付宝，调用时会启动支付宝的wap页面登录，如果已安装相应客户端，会启动其客户端登录。\r\n\r\n uni-app里开发\r\n\r\n uniCloud开发\r\n- 前端：使用`unicloud.callfunction`调用指定的云函数。\r\n- 服务端：使用[uniPay](https://uniapp.dcloud.io/uniCloud/unipay)，该服务对应的演示工程在插件市场：[https://ext.dcloud.net.cn/plugin?id=1835](https://ext.dcloud.net.cn/plugin?id=1835)，此示例为完整的前后端支付演示，使用`uniPay`可极快的完成支付业务开发。\r\n\r\n php开发\r\n- 前端：使用 ``uni.request`` 请求服务端接口，得到订单数据，使用 ``uni.requestPayment`` 向支付平台发起支付请求，拉起支付平台的客户端进行支付。在hello uni-app里详细代码。\r\n- 服务端：PHP可参考 [https://github.com/dcloudio/H5P.Server/tree/master/payment](https://github.com/dcloudio/H5P.Server/tree/master/payment)。\r\n\r\n FAQ\r\n\r\n- Q：如何使用ping++等聚合支付\r\n  A：uni-app的js API 已经完成跨端统一，客户端无需使用三方聚合支付。如果服务器选择`uniCloud`，也无需三方聚合支付。如果服务端使用php、java等传统服务器开发，可以在服务端使用三方聚合支付。\r\n\r\n- Q：App端如何使用其他支付，比如银联、PayPal。\r\n  A：1、可以在web-view组件里使用它们的wap版支付；2、可以集成原生sdk，插件市场均有，[详见](https://ext.dcloud.net.cn/search?q=%E6%94%AF%E4%BB%98)。也可以自行开发原生插件，开发文档见[https://ask.dcloud.net.cn/article/35428](https://ask.dcloud.net.cn/article/35428)。\r\n\r\n- Q：Appstore审核报PGPay SDK不允许上架的问题\r\n  A：数字类产品（比如购买会员等不需要配送实物的商品），Apple规定必须使用苹果IAP应用内支付，给Apple分成30%。打包的时候不要勾选微信或支付宝等其他支付方式。如果你提交的包里包含了微信支付宝等支付的sdk，即使没使用，Appstore也会认为你有隐藏方式，以后会绕过IAP，不给Apple分成，因此拒绝你的App上线。云打包时，manifest里选上支付模块，但sdk配置里去掉微信支付和支付宝支付。很多开发者的Android版是包含微信和支付宝支付的，此时注意分开判断。详见[https://ask.dcloud.net.cn/article/36447](https://ask.dcloud.net.cn/article/36447)\r\n\r\n**示例**\r\n\r\nApp 支付\r\n\r\n```javascript\r\nuni.requestPayment({\r\n    provider: 'alipay',\r\n    orderInfo: 'orderInfo', //微信、支付宝订单数据 【注意微信的订单信息，键值应该全部是小写，不能采用驼峰命名】\r\n    success: function (res) {\r\n        console.log('success:' + JSON.stringify(res));\r\n    },\r\n    fail: function (err) {\r\n        console.log('fail:' + JSON.stringify(err));\r\n    }\r\n});\r\n```\r\n\r\n微信小程序支付\r\n\r\n```javascript\r\n// 仅作为示例，非真实参数信息。\r\nuni.requestPayment({\r\n    provider: 'wxpay',\r\n\ttimeStamp: String(Date.now()),\r\n\tnonceStr: 'A1B2C3D4E5',\r\n\tpackage: 'prepay_id=wx20180101abcdefg',\r\n\tsignType: 'MD5',\r\n\tpaySign: '',\r\n\tsuccess: function (res) {\r\n\t\tconsole.log('success:' + JSON.stringify(res));\r\n\t},\r\n\tfail: function (err) {\r\n\t\tconsole.log('fail:' + JSON.stringify(err));\r\n\t}\r\n});\r\n```\r\n\r\n微信 App 支付\r\n\r\n```javascript\r\nuni.requestPayment({\r\n    \"provider\": \"wxpay\", \r\n    \"orderInfo\": {\r\n        \"appid\": \"wx499********7c70e\",  // 微信开放平台 - 应用 - AppId，注意和微信小程序、公众号 AppId 可能不一致\r\n        \"noncestr\": \"c5sEwbaNPiXAF3iv\", // 随机字符串\r\n        \"package\": \"Sign=WXPay\",        // 固定值\r\n        \"partnerid\": \"148*****52\",      // 微信支付商户号\r\n        \"prepayid\": \"wx202254********************fbe90000\", // 统一下单订单号 \r\n        \"timestamp\": 1597935292,        // 时间戳（单位：秒）\r\n        \"sign\": \"A842B45937F6EFF60DEC7A2EAA52D5A0\" // 签名，这里用的 MD5 签名\r\n    },\r\n    success(res) {},\r\n    fail(e) {}\r\n})\r\n```\r\n\r\n苹果应用内支付\r\n\r\n```html\r\n<template>\r\n    <view>\r\n        <view class=\"uni-list\">\r\n            <radio-group @change=\"applePriceChange\">\r\n                <label class=\"uni-list-cell uni-list-cell-pd\" v-for=\"(item, index) in priceList\" :key=\"index\">\r\n                    {{item.text}}\r\n                    <radio :value=\"item.value\" :checked=\"item.checked\" />\r\n                </label>\r\n            </radio-group>\r\n        </view>\r\n        <view class=\"uni-padding-wrap\">\r\n            <button class=\"ipaPayBtn\" @click=\"requestPayment\" :loading=\"loading\" :disabled=\"disabled\">确认支付</button>\r\n        </view>\r\n    </view>\r\n    </view>\r\n</template>\r\n```\r\n\r\n```javascript\r\n<script>\r\n    let iapChannel = null,\r\n        productId = 'HelloUniappPayment1',\r\n        productIds = ['HelloUniappPayment1', 'HelloUniappPayment6'];\r\n    export default {\r\n        data() {\r\n            return {\r\n                title: 'request-payment',\r\n                loading: false,\r\n                disabled: true,\r\n                priceList: [{\r\n                    value: 'HelloUniappPayment1',\r\n                    text: '支付1元',\r\n                    checked: true\r\n                }, {\r\n                    value: 'HelloUniappPayment6',\r\n                    text: '支付6元',\r\n                    checked: false\r\n                }]\r\n            }\r\n        },\r\n        onLoad: function() {\r\n            plus.payment.getChannels((channels) => {\r\n                console.log(\"获取到channel\" + JSON.stringify(channels))\r\n                for (var i in channels) {\r\n                    var channel = channels[i];\r\n                    if (channel.id === 'appleiap') {\r\n                        iapChannel = channel;\r\n                        this.requestOrder();\r\n                    }\r\n                }\r\n                if(!iapChannel){\r\n                    this.errorMsg()\r\n                }\r\n            }, (error) => {\r\n                this.errorMsg()\r\n            });\r\n        },\r\n        methods: {\r\n            requestOrder() {\r\n                uni.showLoading({\r\n                \ttitle:'检测支付环境...'\r\n                })\r\n                iapChannel.requestOrder(productIds, (orderList) => { //必须调用此方法才能进行 iap 支付\r\n                    this.disabled = false;\r\n                    console.log('requestOrder success666: ' + JSON.stringify(orderList));\r\n                    uni.hideLoading();\r\n                }, (e) => {\r\n                    console.log('requestOrder failed: ' + JSON.stringify(e));\r\n                    uni.hideLoading();\r\n                    this.errorMsg()\r\n                });\r\n            },\r\n            requestPayment(e) {\r\n                this.loading = true;\r\n                uni.requestPayment({\r\n                    provider: 'appleiap',\r\n                    orderInfo: {\r\n                        productid: productId\r\n                    },\r\n                    success: (e) => {\r\n                        uni.showModal({\r\n                            content: \"感谢您的赞助\",\r\n                            showCancel: false\r\n                        })\r\n                    },\r\n                    fail: (e) => {\r\n                        uni.showModal({\r\n                            content: \"支付失败,原因为: \" + e.errMsg,\r\n                            showCancel: false\r\n                        })\r\n                    },\r\n                    complete: () => {\r\n                        console.log(\"payment结束\")\r\n                        this.loading = false;\r\n                    }\r\n                })\r\n            },\r\n            applePriceChange(e) {\r\n                productId = e.detail.value;\r\n            },\r\n            errorMsg(){\r\n                uni.showModal({\r\n                    content: \"暂不支持苹果 iap 支付\",\r\n                    showCancel: false\r\n                })\r\n            }\r\n        }\r\n    }\r\n</script>\r\n```\r\n","p":"command\\第三方服务 - 支付.html"},{"t":"第三方服务/推送","d":"`push` 是指从服务器主动给手机端发送消息。App平台和小程序平台机制不太一样，小程序平台的概念叫模板消息。\r\n\r\n App平台\r\n\r\n`uni-app` 提供了 uni push 服务，这是一个包括客户端和服务器的统一服务，整合了苹果APNs、华为、小米、OPPO、VIVO、魅族、谷歌FCM等多家厂商的系统推送和个推的独立推送，不管客户端还是服务器，一套代码多端推送。\r\n\r\n开发者可以在uniPush中只接入个推，不配置其他厂商服务，但这将导致很多Android手机上App离线后无法推送消息。因为现在的国产rom节电管理策略严格，不使用原厂的push基本难以离线送达消息。\r\n若想提供消息推送成功率，只有使用uniPush，并向各rom厂商申请开通推送服务（免费）。\r\n\r\n因本文档内容有限，另行开贴，介绍业务、开通流程，请务必仔细阅读 [https://ask.dcloud.net.cn/article/35622](https://ask.dcloud.net.cn/article/35622)。\r\n\r\n- 客户端调用的js API见：[https://www.html5plus.org/doc/zh_cn/push.html](https://www.html5plus.org/doc/zh_cn/push.html)\r\n- web自助发送界面：在DCloud的开发者后台：[https://dev.dcloud.net.cn/](https://dev.dcloud.net.cn/)，选择应用后点击uniPush栏目。\r\n- 编写代码调用服务器接口发送push消息：\r\n  * 如果使用uniCloud开发服务器，可以使用封装好的插件，更简单易用：[https://ext.dcloud.net.cn/plugin?id=1680](https://ext.dcloud.net.cn/plugin?id=1680)\r\n  * 如果使用传统服务器开发，文档仍然是个推的服务器文档[http://docs.getui.com/](http://docs.getui.com/)。\r\n\r\n**其他相关资源**\r\n- 检查应用是否被授予推送权限：[https://ext.dcloud.net.cn/plugin?id=594](https://ext.dcloud.net.cn/plugin?id=594)\r\n- 开启关闭推送服务：[https://ext.dcloud.net.cn/plugin?id=727](https://ext.dcloud.net.cn/plugin?id=727)\r\n- 自定义iOS推送铃声：[https://ext.dcloud.net.cn/plugin?id=690](https://ext.dcloud.net.cn/plugin?id=690)\r\n- 如何自定义推送通知的图标：[https://ask.dcloud.net.cn/article/35537](https://ask.dcloud.net.cn/article/35537)\r\n\r\n插件市场也提供了其他三方推送方案，但注意unipush是推送成功率更高的解决方案，并且免费使用。不推荐开发者使用其他推送服务。\r\n\r\n但我们发现很多开发者有误解，导致还在错误使用其他推送。\r\n- 常见误解1：“uniPush的专业性，和专业的个推、极光等服务可相比吗？”\r\n答：uniPush是由个推将其本来收费的vip push产品，免费提供给了DCloud的开发者。它与个推vip push的只有2个区别：1、免费；2、账户使用的是DCloud开发者账户，而无需再重新注册个推账户。个推是A股上市公司，专业性在推送领域领先。\r\n- 常见误解2：“uniPush好麻烦，我就喜欢个推、极光这种简单sdk，不想去各个rom厂商去申请一圈”\r\n答：uniPush不建立在申请手机厂商授权的基础上，如果你不申请那些，使用起来和用普通的个推是一样的。但是要特别注意，推送行业的现状就是：**不集成rom厂商的推送，就无法在App离线时发送push。**。按照普通个推模式使用，后果就是在华为、小米、OPPO、VIVO、魅族上发不了离线消息。\r\n- 常见误解3：“uniPush的送达率还是不够，是否可以付费来提升送达率，个推是有付费提升送达率的方法的”\r\n答：前文已经说了。个推的付费提升送达率的产品就是vip push，而uniPush就是个推的vip Push。DCloud通过谈判免费给DCloud的开发者使用了。\r\n- 常见误解4：开通uniPush要实名认证，还得传身份证，开通普通个推不用这么麻烦。\r\n答：此问题之前曾存在，后来已经处理，保持和个推需要的身份信息相同，不再需要身份证。\r\n\r\n 小程序平台\r\n\r\n小程序平台的类似概念叫做`模板消息`，也有的平台改名为`订阅消息`。\r\n\r\n以微信为例，开发者的服务器发送消息给微信的服务器，微信服务器会发送一条订阅消息，折叠到微信的消息列表中的服务通知里。它属于后台开发，和手机端无关。\r\n\r\n如果使用uniCloud发送微信、支付宝订阅消息，参考：[https://ext.dcloud.net.cn/plugin?id=1810](https://ext.dcloud.net.cn/plugin?id=1810)\r\n\r\n微信订阅消息文档：[https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/subscribe-message.html](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/subscribe-message.html)\r\n\r\n支付宝模板消息文档：[https://docs.alipay.com/mini/introduce/message](https://docs.alipay.com/mini/introduce/message)\r\n\r\n百度模板消息文档：[https://smartprogram.baidu.com/docs/develop/third/api/](https://smartprogram.baidu.com/docs/develop/third/api/)\r\n\r\n字节跳动订阅消息文档：[https://microapp.bytedance.com/docs/zh-CN/mini-app/develop/functional-plug-in/subscribemessage/](https://microapp.bytedance.com/docs/zh-CN/mini-app/develop/functional-plug-in/subscribemessage/)\r\n\r\nQQ小程序订阅消息文档：[https://q.qq.com/wiki/develop/miniprogram/frame/open_ability/open_message.html%E8%AE%A2%E9%98%85%E6%B6%88%E6%81%AF](https://q.qq.com/wiki/develop/miniprogram/frame/open_ability/open_message.html%E8%AE%A2%E9%98%85%E6%B6%88%E6%81%AF)\r\n\r\n华为快应用推送文档：[https://developer.huawei.com/consumer/cn/doc/development/quickApp-References/webview-api-hwpush](https://developer.huawei.com/consumer/cn/doc/development/quickApp-References/webview-api-hwpush)\r\n\r\n<!--\r\n**注意：以下API暂停维护，仅为向下兼容而保留。App端 uni push 的API请使用 [https://www.html5plus.org/doc/zh_cn/push.html](https://www.html5plus.org/doc/zh_cn/push.html)**\r\n\r\n uni.subscribePush(OBJECT)\r\n\r\n开启推送\r\n\r\n平台差异说明：\r\n- App\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|provider|String|是|分享推送提供商，通过 [uni.getProvider](/api/plugins/provider) 获取|\r\n|success|Function|否|接口调用成功的回调|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n\r\n**示例**\r\n```javascript\r\nuni.getProvider({\r\n\tservice: 'push',\r\n\tsuccess: function (res) {\r\n\t\tconsole.log(res.provider)\r\n\r\n\t\t// 个推的名称为 igexin\r\n\t\tif (~res.provider.indexOf('igexin')) {\r\n\t\t\tuni.subscribePush({\r\n\t\t\t\tprovider: 'igexin',\r\n\t\t\t\tsuccess: function (res) {\r\n\t\t\t\t\tconsole.log('success:' + JSON.stringify(res));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n});\r\n```\r\n\r\n uni.unsubscribePush(OBJECT)\r\n\r\n关闭推送。\r\n\r\n**平台差异说明**\r\n\r\n- App\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|provider|String|是|分享推送提供商，通过 uni.getProvider 获取|\r\n|success|Function|否|接口调用成功的回调|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.unsubscribePush({\r\n\tprovider: 'igexin',\r\n\tsuccess: function (res) {\r\n\t\tconsole.log('success:' + JSON.stringify(res));\r\n\t}\r\n});\r\n```\r\n\r\n uni.onPush(OBJECT)\r\n\r\n监听透传数据。\r\n\r\n**平台差异说明**\r\n\r\n- App\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|provider|String|是|分享推送提供商，通过 uni.getProvider 获取|\r\n|callback|Function|否|接收到透传数据回调，回调参数（Object）：messageId（消息id）、data（消息内容）|\r\n|success|Function|否|接口调用成功的回调|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n**示例**\r\n\r\n```javascript\r\nuni.onPush({\r\n\tprovider: 'igexin',\r\n\tsuccess: function () {\r\n\t\tconsole.log('监听透传成功');\r\n\t},\r\n\tcallback: function (data) {\r\n\t\tconsole.log(\"接收到透传数据：\" + JSON.stringify(data));\r\n\t}\r\n});\r\n```\r\n\r\n uni.offPush(OBJECT)\r\n\r\n移除监听透传数据。\r\n\r\n**平台差异说明**\r\n\r\n- App\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数名|类型|必填|说明|\r\n|:-|:-|:-|:-|\r\n|provider|String|是|分享推送提供商，通过uni.getProvider获取|\r\n|success|Function|否|接口调用成功的回调|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n\r\n**示例**\r\n```javascript\r\nuni.offPush({\r\n\tprovider: 'igexin',\r\n\tsuccess: function () {\r\n\t\tconsole.log('取消监听透传成功');\r\n\t},\r\n\tfail: function () {\r\n\t\tconsole.log('fail');\r\n\t}\r\n});\r\n```\r\n-->\r\n\r\n FAQ\r\n\r\nQ：为什么真机测试推送可以用，打包后就失败呢？\r\nA：HBuilder 真机运行环境下，第三方支付 SDK 的配置信息是 HBuilder 这个应用。这个配置信息是不能动态修改的，因此涉及到第三方 SDK 的配置，需要打包自定义基座进行测试。[真机运行自定义基座包使用说明](http://ask.dcloud.net.cn/article/12723)\r\n\r\nQ：用到了推送功能，在打包原生应用时，需要注意什么呢？\r\nA：如果是云打包，首先勾选权限配置，manifest.json->App 模块权限配置->Push。然后，manifest.json->App SDK 配置->推送，按照提示申请相应平台的信息，并填写。最后，勾选并填写完成后再进行打包即可。如果是离线打包，自行在原生工程中配置SDK，并确保选择了推送模块。\r\n","p":"command\\第三方服务 - 推送.html"},{"t":"第三方服务/语音","d":" voice\r\n\r\nvoice 包括语言识别和语音朗读两部分。\r\n\r\n仅百度小程序平台、App平台支持，各平台开发方式暂未统一，使用时需注意用[条件编译](https://uniapp.dcloud.io/platform)调用不同平台的代码。\r\n\r\n百度小程序平台支持语音识别，参考：[规范详情](https://smartprogram.baidu.com/docs/develop/api/ai_voice/)\r\n\r\nApp 平台实现参考：\r\n\r\n- 语音识别：支持科大讯飞语音识别和百度语音识别，云打包的话需要在manifest中勾选模块和App SDK配置，开发规范见：[https://www.html5plus.org/doc/zh_cn/speech.html](https://www.html5plus.org/doc/zh_cn/speech.html)，配置文档及讯飞百度的差别见：[https://ask.dcloud.net.cn/article/35059](https://ask.dcloud.net.cn/article/35059)\r\n- 语音朗读：调用科大讯飞进行语音合成、tts朗读，参考[https://ask.dcloud.net.cn/article/1081](https://ask.dcloud.net.cn/article/1081)\r\n","p":"command\\第三方服务 - 语音.html"},{"t":"第三方服务/一键生成iOS通用链接","d":"**一键生成iOS通用链接**\r\n 背景介绍：\r\n> Universal Link是苹果在WWDC 2015上提出的iOS 9的新特性之一。此特性类似于深层链接，并能够方便地通过打开一个Https链接来直接启动您的客户端应用(手机有安装App)。对比以往所使用的URLSheme, 这种新特性在实现web-app的无缝链接时,能够提供极佳的用户体验。\r\n使用前请阅读[苹果官方文档](https://developer.apple.com/library/archive/documentation/General/Conceptual/AppSearch/UniversalLinks.html//apple_ref/doc/uid/TP40016308-CH12-SW1)。\r\n\r\n> 由于苹果iOS 13系统版本安全升级，微信SDK1.8.6版本要求支持Universal Links方式跳转，以便进行合法性校验，提升安全性。更多详情请参考[微信官方说明](https://developers.weixin.qq.com/doc/oplatform/Mobile_App/Access_Guide/iOS.html)\r\n\r\n大白话：以前你的APP要打开其他APP是[通过URLScheme](http://www.html5plus.org/doc/zh_cn/runtime.htmlplus.runtime.launchApplication)实现，后来苹果提出用Https链接来启动，手机上对应的app（已安装），更方便与web-app的无缝对接。微信响应了这个方案。所以大家开发的APP无论是微信登陆、微信支付，还是微信分享等一切会跳转到微信，再跳回来的场景，需要提供这个链接。要不然你的应用打开了微信，微信就打不开你的应用。\r\n\r\n如果不配置通用链接，使用新版本HX提交云端打包会失败，提示以下错误信息：\r\n```javascript\r\nError code = -5000\r\nError message: \r\nError: not set parameter 'UniversalLinks' @'oauth-weixin'\r\n```\r\n\r\n传统方式配置通用链接需要:\r\n1. 在苹果开发者中心：开启Associated Domains服务\r\n2. 获取相关参数，手动创建apple-app-site-association文件\r\n3. 部署apple-app-site-association文件到自己的云服务器，配置SSL证书解析域名\r\n4. 然后手动在manifest.json中配置Associated Domains（域名）\r\n5. 粘贴通用链接到对应权限模块\r\n6. 在微信开放平台配置通用链接\r\n\r\n其中需要注意的细节较多，且调试起来困难繁琐，困扰了大量开发者。\r\n\r\n现在通过HbuilderX（3.1.9版起）云打包，支持自动生成apple-app-site-association文件，并自动托管到：自带cdn、ssl等服务的“免费”的云服务空间[uniCloud的前端网页托管](https://uniapp.dcloud.io/uniCloud/hosting)，自动完成manifest.json中的相关配置。用自动化技术替代了，如上所示传统方式令人苦恼的（2-5）4个步骤；只需如下三步直接搞定通用链接。\r\n 第一步：开启Associated Domains服务\r\n登录[苹果开发者网站](https://developer.apple.com/)，在“Certificates, Identifiers & Profiles”页面选择“Identifiers”中选择对应的App ID，确保开启Associated Domains服务\r\n![](https://vkceyugu.cdn.bspapp.com/VKCEYUGU-f184e7c3-1912-41b2-b81f-435d1b37c7b4/2eae9f97-2c4a-4dc8-97e8-e665b0c660e1.png)\r\n\r\n**开启Associated Domains服务后需要重新生成profile文件，提交云端打包时使用**\r\n\r\n\r\n 第二步骤 自动生成通用连接(Universal Links)\r\n打开项目的manifest.json文件，在“(App) SDK配置”项中的微信登录（微信分享、微信支付）下的“iOS平台通用链接（Universal Links）”中，\r\n点击如图所示【自动生成】\r\n![](https://vkceyugu.cdn.bspapp.com/VKCEYUGU-f184e7c3-1912-41b2-b81f-435d1b37c7b4/ea2b1e04-a858-4626-b3fa-bd4ddddd0c3b.jpg)\r\n* 注意您必须先开通\"uniCloud(阿里云版)云服务空间和开通前端网页托管\"[点此查看开通教程](https://ask.dcloud.net.cn/article/38951),按提示完成操作即可。\r\n\r\n![](https://vkceyugu.cdn.bspapp.com/VKCEYUGU-f184e7c3-1912-41b2-b81f-435d1b37c7b4/53e0141e-d2d4-496a-b0f2-2359005c0c4e.jpg)\r\n* 注意：通用链接默认域名仅供测试使用，访问频次限制60次/分钟，请勿在正式发行的项目中使用。\r\n* 如何绑定自己的域名详情：[https://uniapp.dcloud.io/uniCloud/hosting?id=domain](https://uniapp.dcloud.io/uniCloud/hosting?id=domain)\r\n\r\n![](https://vkceyugu.cdn.bspapp.com/VKCEYUGU-f184e7c3-1912-41b2-b81f-435d1b37c7b4/1e081fdd-27b2-4c0b-8985-7d59756ed313.jpg)\r\n\r\n\r\n 第三步：在微信开放平台配置通用链接\r\n打开微信[开发平台](https://open.weixin.qq.com/)，在“管理中心”页面的“移动应用”下找到已经申请的应用（没有申请应用请点击“创建移动应用”新建应用），点击“查看”打开应用详情页面。\r\n在“开发信息”栏后点击修改，在“iOS应用”下的“Universal Links”项中配置应用的通用链接，如下图所示：\r\n![](https://img-cdn-tc.dcloud.net.cn/uploads/article/20191008/e933f7ef8ff078bf05e28a24efee74bd.png)\r\n\r\n至此，就已经完成了通用链接的配置全过程，云打包后生效。\r\n\r\n 其他相关\r\n 客户端处理通用链接。\r\n可通过5+ API的plus.runtime.launcher判断应用启动来源，如果其值为\"uniLink\"则表示通过通用链接启动应。这时可通过5+ API的plus.runtime.arguments获取启动参数，通用链接启动的情况将返回完整的通用链接地址。\r\n例：HBuilderX中自带的默认真机运行基座HBuilderX注册的通用链接:[https://demo.dcloud.net.cn/ulink/](https://demo.dcloud.net.cn/ulink/)\r\n\r\n 通用链接生成原理：\r\n1. 选择云空间获取云空间的默认/自定义域名\r\n2. 按提前制定的规范（uni-universallinks/DCloud appid）拼接URL\r\n3. 根据现有参数自动生成通用链接相关参数到manifest.json\r\n4. 发起云打包时读取证书的profile文件生成apple-app-site-association并部署到前面选定的云空间根目录的.well-known目录下(请勿删除该文件，否则通用链接将失效)\r\n\r\n 注意事项：\r\n- 通用链接指向的路径可以为空，他只是一种信息传递方式。可以简单地理解为：通过解析URL的“/”后的参数到apple-app-site-association中找到指定的包名并唤醒对应的APP\r\n- 通用链接内容保存在manifest.json中\"云打包后生效\"，被手机读取的时机是应用被安装的时候。如果你的通用链接内容有变化，你需要重新提交云打包，并重新安装一次应用才能生效\r\n- 通用链接最终托管在服务端，如有变动注意缓存的清理，例如尝试重启手机等操作\r\n\r\n>如果你是本地离线打包或者由于某种原因你需要用传统的方式：私有化部署服务器来托管apple-app-site-association文件创建通用链接。你仍然可以通过手动配置manifest.json实现。详情：[https://ask.dcloud.net.cn/article/36393unilink](https://ask.dcloud.net.cn/article/36393unilink)\r\n\r\n 常见问题\r\n1.为什么我打开通用链接提示：`The requested file was not found on this server.`\r\n\r\n这是正常现象。通用链接并不要求是一个有效的路径，换句话说这个链接指向的目录允许为空。原理是访问这个链接时，iphone检测到当前域名为通用链接对应的域名，就读取域名服务器下的apple-app-site-association，然后根据域名后面的路径名称，验证并解析出要打开的app包名并唤醒对应的app。\r\n\r\n2.如何验证通用链接已经生效，有什么表现或者测试方案\r\n\r\n你可以将通用链接输入到iphone自带Safari浏览器中，下拉即可看到通用链接对应到应用名称和一个打开按钮，点击按钮即可直接在浏览器打开对应的APP。详情：[点此查看演示视频](https://vkceyugu.cdn.bspapp.com/VKCEYUGU-f184e7c3-1912-41b2-b81f-435d1b37c7b4/4e920b86-0f67-45ac-81f6-6b97f87ff0ae.mp4)","p":"command\\第三方服务 - 一键生成iOS通用链接.html"},{"t":"uniCloud/uniCloud","d":" uniCloud \n\n在uni-app前端项目中，内置有uniCloud对象，可以在前端访问uniCloud的数据库、云函数、及云存储。\n\n|API\t\t\t\t\t\t|描述\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|--\t\t\t\t\t\t\t|--\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|uniCloud.callFunction()\t|客户端调用云函数 [详情](https://uniapp.dcloud.net.cn/uniCloud/cf-functions?id=clientcallfunction)\t\t\t\t|\n|uniCloud.database()\t\t|客户端访问云数据库，获取云数据库对象引用 [详情](https://uniapp.dcloud.net.cn/uniCloud/clientdb)\t\t\t\t\t\t\t\t\t\t\t|\n|uniCloud.uploadFile()\t\t|客户端直接上传文件到云存储 [详情](https://uniapp.dcloud.net.cn/uniCloud/storage?id=uploadfile)\t\t\t\t\t\t\t|\n|uniCloud.getTempFileURL()\t|客户端获取云存储文件的临时路径 [详情](https://uniapp.dcloud.net.cn/uniCloud/storage?id=gettempfileurl)\t\t\t\t\t\t\t|\n|uniCloud.getCurrentUserInfo()\t|客户端获取当前用户信息 [详情](https://uniapp.dcloud.io/uniCloud/client-sdk?id=client-getcurrentuserinfo)\t\t\t\t\t\t\t|\n\n\n\n","p":"command\\uniCloud - uniCloud.html"},{"t":"平台扩展/App原生插件","d":" uni.requireNativePlugin(PluginName)\r\n\r\n引入 App 原生插件。\r\n\r\n平台差异说明：App\r\n\r\n自 HXuilderX1.4 版本起，uni-app 支持引入原生插件，使用方式如下：\r\n\r\n```js \r\n\tconst PluginName = uni.requireNativePlugin(PluginName); // PluginName 为原生插件名称\r\n```\r\n\r\n不管是vue文件还是nvue文件，都是这个API。\r\n\r\n\r\n 内置原生插件\r\n内置原生插件,uni-app已默认集成，支持直接在内置基座运行。\r\n\r\n仅在nvue页面，支持引入BindingX，animation， DOM.addRule等。\r\n\r\n在vue页面，支持引入clipboard，storage，stream，deviceInfo等。\r\n\r\n\r\n\r\n使用方式：可通过```uni.requireNativePlugin```直接使用。\r\n\r\n示例：\r\n\r\n``` html\r\n\t<template>\r\n\t\t<view>\r\n\t\t\t<text class=\"my-iconfont\">&xe85c;</text>\t\r\n\t\t</view>\r\n\t</template>\r\n\t<script>\r\n\t\texport default{\r\n\t\t\tbeforeCreate() {\r\n\t\t\t\tconst domModule = uni.requireNativePlugin('dom')\r\n\t\t\t\tdomModule.addRule('fontFace', {\r\n\t\t\t\t\t'fontFamily': \"myIconfont\",\r\n\t\t\t\t\t'src': \"url('http://at.alicdn.com/t/font_2234252_v3hj1klw6k9.ttf')\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t</script>\r\n\t<style>\r\n\t\t.my-iconfont {\r\n\t\t\tfont-family:myIconfont;\r\n\t\t\tfont-size:60rpx;\r\n\t\t\tcolor: 00AAFF;\r\n\t\t}\r\n\t</style>\r\n```\r\n\r\n\r\n\r\n\r\n非内置原生插件，分为 [本地插件](/api/extend/native-plugin?id=本地插件非内置原生插件) 和 [云端插件](/api/extend/native-plugin?id=云端插件非内置原生插件) 。集成原生插件后，需要提交云端打包或制作自定义基座运行才会生效。\r\n\r\n 本地插件(非内置原生插件)\r\n\r\n**本地插件**，是uni-app项目nativeplugins目录(目录不存在则创建)下的原生插件。\r\n\r\n 第一步：获取本地原生插件\r\n\r\n- 方式一：插件市场下载免费uni-app原生插件\r\n\r\n可以登录[uni原生插件市场](https://ext.dcloud.net.cn/?cat1=5&cat2=51)，在免费的插件详情页中点击“下载for离线打包”下载原生插件（zip格式），解压到HBuilderX的uni-app项目下的“nativeplugins”目录（如不存在则创建），以下是“DCloud-RichAlert”插件举例，它的下载地址是：https://ext.dcloud.net.cn/plugin?id=36\r\n\r\n下载解压后目录结构如下：\r\n\r\n<img width=\"600px\" src=\"https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/c6b5e6d0-4f2b-11eb-b680-7980c8a877b8.png\" />\r\n\r\n\r\n- 方式二：开发者自己开发uni-app原生插件\r\n\r\n原生插件开发完成后按指定格式压缩为zip包，参考[uni-app原生插件格式说明文档](https://nativesupport.dcloud.net.cn/NativePlugin/course/package)。\r\n按上图的格式配置到uni-app项目下的“nativeplugins”目录。\r\n\r\n\r\n\r\n 第二步：配置本地原生插件\r\n\r\n在manifest.json -> App原生插件配置 -> 选择本地插件 -> 选择需要打包生效的插件 -> 保存后提交云端打包生效。\r\n\r\n<img width=\"600px\" src=\"https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/c79438e0-4f2b-11eb-8a36-ebb87efcf8c0.png\" />\r\n\r\n 第三步：开发调试本地原生插件\r\n在vue页面或nvue页面引入这个原生插件。\r\n\r\n使用uni.requireNativePlugin的api，参数为插件的id。\r\n```js \r\n\tconst dcRichAlert = uni.requireNativePlugin('DCloud-RichAlert')\r\n```\r\n\r\n 第四步：打包发布\r\n使用自定义基座开发调试本地原生插件后，不可直接将自定义基座apk作为正式版发布。\r\n应该重新提交云端打包（不能勾选“自定义基座”）生成正式版本。\r\n\r\n\r\n\r\n\r\n 云端插件(非内置原生插件)\r\n\r\n**云端插件**，已经在插件市场绑定或购买的插件，无需下载插件到工程中，云打包时会直接合并打包原生插件到APP中。（试用插件只能在自定义基座中使用）\r\n\r\n\r\n\r\n 第一步：购买或下载uni-app原生插件\r\n使用前需先登录[uni原生插件市场](https://ext.dcloud.net.cn/?cat1=5&cat2=51)，在插件详情页中购买，免费插件也可以在插件市场0元购。购买后才能够云端打包使用插件。\r\n> 购买插件时请选择正确的appid，以及绑定正确包名\r\n\r\n\r\n 第二步：使用自定义基座打包uni原生插件 （注：请使用真机运行自定义基座）\r\n在manifest.json -> App原生插件配置 -> 选择云端插件 -> 选择需要打包的插件 -> 保存后提交云端打包生效。\r\n\r\n<img width=\"600px\" src=\"https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/c8512040-4f2b-11eb-8a36-ebb87efcf8c0.png\" />\r\n\r\n\r\n 第三步：开发调试uni-app原生插件\r\n在vue页面或nvue页面引入这个原生插件。\r\n\r\n使用uni.requireNativePlugin的api，参数为插件的id。\r\n\r\n1.在页面引入原生插件，uni.requireNativePlugin 使用后返回一个对象：\r\n\r\n```js\r\nconst dcRichAlert = uni.requireNativePlugin('DCloud-RichAlert')\r\n```\r\n2.使用原生插件\r\n\r\n```js\r\n\tdcRichAlert.show({\r\n\t\tposition: 'bottom',\r\n\t\ttitle: \"提示信息\",\r\n\t\ttitleColor: 'FF0000',\r\n\t\tcontent: \"<a href='https://uniapp.dcloud.io/' value='Hello uni-app'>uni-app</a> 是一个使用 Vue.js 开发跨平台应用的前端框架!\\n免费的\\n免费的\\n免费的\\n重要的事情说三遍\",\r\n\t\tcontentAlign: 'left',\r\n\t\tcheckBox: {\r\n\t\t\ttitle: '不再提示',\r\n\t\t\tisSelected: true\r\n\t\t},\r\n\t\tbuttons: [{\r\n\t\t\ttitle: '取消'\r\n\t\t}, {\r\n\t\t\ttitle: '否'\r\n\t\t}, {\r\n\t\t\ttitle: '确认',\r\n\t\t\ttitleColor: '3F51B5'\r\n\t\t}]\r\n\t}, result => {\r\n\t\tconsole.log(result)\r\n\t});\r\n```\r\n\r\n\r\n\r\n\r\n 第四步：打包发布\r\n使用自定义基座开发调试uni-app原生插件后，不可直接将自定义基座apk作为正式版发布。\r\n应该重新提交云端打包（不能勾选“自定义基座”）生成正式版本。\r\n  \r\n\r\n\r\n 注意事项\r\n1.可以在 插件市场 查看更多插件，如需开发uni原生插件请参考 [uni原生插件开发文档](https://nativesupport.dcloud.net.cn/NativePlugin/README)。\r\n2.如果插件需要传递文件路径，则需要传手机文件的绝对路径，可使用 5+ [IO模块](http://www.html5plus.org/doc/zh_cn/io.html) 的相关 API 得到文件的绝对路径。\r\n","p":"command\\平台扩展 - App原生插件.html"},{"t":"其他/授权","d":" uni.authorize(OBJECT)\r\n\r\n提前向用户发起授权请求。调用后会立刻弹窗询问用户是否同意授权小程序使用某项功能或获取用户的某些数据，但不会实际调用对应接口。如果用户之前已经同意授权，则不会出现弹窗，直接返回成功。如果用户之前拒绝了授权，此接口会直接进入失败回调，一般搭配`uni.getSetting`和`uni.openSetting`使用。\r\n \r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|x|x|√|x|√|√|√|\r\n\r\n注意：App平台的授权判断方式，另见：[https://ext.dcloud.net.cn/plugin?id=594](https://ext.dcloud.net.cn/plugin?id=594)\r\n\r\n**OBJECT 参数说明**\r\n\r\n|参数|类型|必填|说明|\r\n|---|---|---|---|\r\n|scope|String|是|需要获取权限的 scope，详见 scope 列表。|\r\n|success|Function|否|接口调用成功的回调函数|\r\n|fail|Function|否|接口调用失败的回调函数|\r\n|complete|Function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\r\n\r\n scope 列表\r\n\r\n|scope|对应接口|描述\t|平台差异说明|\r\n|---|---|---|---|\r\n|scope.userInfo\t|[uni.getUserInfo](/api/plugins/login?id=getuserinfo)\t|用户信息||\r\n|scope.userLocation|[uni.getLocation](/api/location/location?id=getlocation), [uni.chooseLocation](/api/location/location?id=chooselocation)\t|地理位置||\r\n|scope.userLocationBackground|wx.userLocationBackground|后台定位|微信小程序|\r\n|scope.address\t|[uni.chooseAddress](/api/other/choose-address)\t|通信地址||\r\n|scope.record\t|[uni.getRecorderManager](/api/media/record-manager?id=getrecordermanager)\t|录音功能||\r\n|scope.writePhotosAlbum\t|[uni.saveImageToPhotosAlbum](/api/media/image?id=saveimagetophotosalbum), [uni.saveVideoToPhotosAlbum](/api/media/video?id=savevideotophotosalbum)\t|保存到相册|字节跳动小程序的返回值是scope.album|\r\n|scope.camera\t|[``<camera />``](/component/camera) 组件，头条下的扫码、拍照、选择相册\t|摄像头\t||\r\n|scope.invoice\t|[wx.chooseInvoice](https://developers.weixin.qq.com/miniprogram/dev/api/wx.chooseInvoice.html)\t|获取发票|微信小程序、QQ小程序|\r\n|scope.invoiceTitle|[uni.chooseInvoiceTitle](/api/other/invoice-title)\t\t|发票抬头|微信小程序、百度小程序、QQ小程序|\r\n|scope.werun\t|[wx.getWeRunData](https://developers.weixin.qq.com/miniprogram/dev/api/wx.getWeRunData.html)\t|微信运动步数\t|微信小程序|\r\n\r\n注意：scope.userLocation 权限需要在 manifest.json 配置 permission， 详见：[https://uniapp.dcloud.io/collocation/manifest](https://uniapp.dcloud.io/collocation/manifest)\r\n\r\n**代码示例**\r\n\r\n```javascript\r\nuni.authorize({\r\n    scope: 'scope.userLocation',\r\n    success() {\r\n        uni.getLocation()\r\n    }\r\n})\r\n```\r\n","p":"command\\其他 - 授权.html"},{"t":"其他/设置","d":" uni.openSetting(OBJECT)\n\n调起客户端小程序设置界面，返回用户设置的操作结果。\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|x|x|√|√|√|√|√|\n\n|属性|类型|必填|说明|\n|---|---|---|---|---|\n|success|function|否|接口调用成功的回调函数|\n|fail|function|否|接口调用失败的回调函数|\n|complete|function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\n\n**success 返回参数**\n\n|属性|类型|说明|\n|---|---|---|\n|authSetting|Object|用户授权结果，其中 key 为 [scope](/api/other/authorize?id=scope-列表) 值，value 为 Boolean 值，表示用户是否允许授权|\n\n**代码示例**\n\n```javascript\nuni.openSetting({\n  success(res) {\n    console.log(res.authSetting)\n  }\n});\n```\n\n uni.getSetting(OBJECT)\n获取用户的当前设置。\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|x|x|√|√|√|√|√|\n\n|属性|类型|默认值|必填|说明|\n|---|---|---|---|---|\n|withSubscriptions|Boolean|false |否|是否同时获取用户订阅消息的订阅状态，默认不获取。注意：withSubscriptions 只返回用户勾选过订阅面板中的“总是保持以上选择，不再询问”的订阅消息。 **（微信小程序 2.10.1 支持）**|\n|success|function||否|接口调用成功的回调函数|\n|fail|function||否|接口调用失败的回调函数|\n|complete|function||否|接口调用结束的回调函数（调用成功、失败都会执行）|\n\n\n**success 返回参数**\n\n|属性|类型|说明|\n|---|---|---|\n|authSetting|Object|用户授权结果，其中 key 为 [scope](/api/other/authorize?id=scope-列表) 值，value 为 Boolean 值，表示用户是否允许授权|\n|subscriptionsSetting|SubscriptionsSetting|用户订阅消息设置，接口参数`withSubscriptions`值为`true`时才会返回。**（微信小程序 2.10.1 支持）**|\n\n 示例代码\n```js\nuni.getSetting({\n   success(res) {\n      console.log(res.authSetting)\n   }\n})\n```\n","p":"command\\其他 - 设置.html"},{"t":"其他/收货地址","d":" uni.chooseAddress(OBJECT)\n\n获取用户收货地址。调起用户编辑收货地址原生界面，并在编辑完成后返回用户选择的地址，需要用户授权 scope.address。\n \n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|x|x|√|√|√|√|x|\n \n**OBJECT参数说明**\n\n| 属性 | 类型  | 必填 | 说明 |\n| --- | --- | --- | --- | --- |\n| success | function|否 | 接口调用成功的回调函数 |\n| fail | function|否 | 接口调用失败的回调函数 |\n| complete | function|否 | 接口调用结束的回调函数（调用成功、失败都会执行） |\n\n**success返回参数说明**\n\n\n| 属性 | 类型 | 说明 |平台差异说明|\n| --- | --- | --- |---|\n| userName | string | 收货人姓名 ||\n| postalCode | string | 邮编 ||\n| provinceName | string | 国标收货地址第一级地址 ||\n| cityName | string | 国标收货地址第二级地址 ||\n| countyName | string | 国标收货地址第三级地址 ||\n| detailInfo | string | 详细收货地址信息 ||\n| nationalCode | string | 收货地址国家码 ||\n| telNumber | string | 收货人手机号码 ||\n| errMsg | string | 错误信息 |微信小程序|\n\n\n**示例代码**\n\n```js\nuni.chooseAddress({\n  success(res) {\n    console.log(res.userName)\n    console.log(res.postalCode)\n    console.log(res.provinceName)\n    console.log(res.cityName)\n    console.log(res.countyName)\n    console.log(res.detailInfo)\n    console.log(res.nationalCode)\n    console.log(res.telNumber)\n  }\n})\n```","p":"command\\其他 - 收货地址.html"},{"t":"其他/获取发票抬头","d":" uni.chooseInvoiceTitle(OBJECT)\n\n选择用户的发票抬头，需要用户授权 scope.invoiceTitle。\n\n在微信小程序中，当前小程序必须关联一个公众号，且这个公众号是完成了[微信认证](https://mp.weixin.qq.com/wiki?t=resource/res_main&id=mp1496554031_RD4xe)的，才能调用 chooseInvoiceTitle。\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|x|x|√|x|√|x|x|\n \n**OBJECT参数说明**\n\n|属性|类型|必填|说明|\n|:-|:-|:-|:-|:-|\n|success|function|否|接口调用成功的回调函数|\n|fail|function|否|接口调用失败的回调函数|\n|complete|function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\n\n**success返回参数说明**\n\n|属性|类型|说明|平台差异说明|\n|:-|:-|:-|:-|\n|type|string|抬头类型（0：单位，1：个人）||\n|title|string|抬头名称||\n|taxNumber|string|抬头税号||\n|companyAddress|string|单位地址||\n|telephone|string|手机号码||\n|bankName|string|银行名称||\n|bankAccount|string|银行账号||\n|errMsg|string|错误信息|微信小程序|\n\n**示例代码**\n\n```js\nuni.chooseInvoiceTitle({\n    success(res) {\n        console.log(res.type);\n        console.log(res.title);\n        console.log(res.taxNumber);\n        console.log(res.companyAddress);\n        console.log(res.telephone);\n        console.log(res.bankName);\n        console.log(res.bankAccount);\n  }\n})\n```","p":"command\\其他 - 获取发票抬头.html"},{"t":"其他/小程序跳转","d":" uni.navigateToMiniProgram(OBJECT)\n\n打开另一个小程序。\n\n**平台差异说明**\n\n|App|H5|[微信小程序](https://developers.weixin.qq.com/miniprogram/dev/api/open-api/miniprogram-navigate/wx.navigateToMiniProgram.html)|[支付宝小程序](https://docs.alipay.com/mini/api/open-miniprogram)|[百度小程序](https://smartprogram.baidu.com/docs/develop/api/open_smartprogram/swan-navigateToSmartProgram/)|[字节跳动小程序](https://developer.toutiao.com/dev/cn/mini-app/develop/open-capacity/mini-app-forward/navigatetominiprogram)|[QQ小程序](https://q.qq.com/wiki/develop/miniprogram/API/open_port/port_change.htmlqq-navigatetominiprogram)|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|x(见下)|x|√|√|√|√(1.15.0+)|√|\n\n- App平台打开微信小程序，使用plus.share的[launchMiniProgram](https://www.html5plus.org/doc/zh_cn/share.htmlplus.share.ShareService.launchMiniProgram)。注意uni-app不需要plus ready，将plus ready里的代码写到页面的onLoad生命周期即可。使用此功能需在manifest中配置微信分享SDK信息，打包后生效。\n- 各小程序平台对跳转到其他小程序有一些限制和规定，需要遵守，具体见各平台文档。\n\n**OBJECT 参数说明**\n\n|属性|类型|默认值|必填|说明|平台差异说明|\n|:-|:-|:-|:-|:-|:-|\n|appId|string||是|要打开的小程序 appId（百度小程序则填写App Key）||\n|path|string||否|打开的页面路径，如果为空则打开首页||\n|extraData|object||否|需要传递给目标小程序的数据，目标小程序可在 ``App.vue `` 的 `onLaunch`或`onShow` 中获取到这份数据。||\n|envVersion|string|release|否|要打开的小程序版本，有效值： develop（开发版），trial（体验版），release（正式版）。仅在当前小程序为开发版或体验版时此参数有效。如果当前小程序是正式版，则打开的小程序必定是正式版。|支付宝小程序、微信小程序|\n|success|function||否|接口调用成功的回调函数||\n|fail|function||否|接口调用失败的回调函数||\n|complete|function||否|接口调用结束的回调函数（调用成功、失败都会执行）|&nbsp;|\n\n**示例代码**\n\n```js\nuni.navigateToMiniProgram({\n  appId: '',\n  path: 'pages/index/index?id=123',\n  extraData: {\n    'data1': 'test'\n  },\n  success(res) {\n    // 打开成功\n  }\n})\n```\n\n\n\n uni.navigateBackMiniProgram(OBJECT)\n\n跳转回上一个小程序，只有当另一个小程序跳转到当前小程序时才会能调用成功。\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|x|x|√|√|√|√|√|\n\n**OBJECT参数说明**\n\n|属性|类型|必填|说明|\n|:-|:-|:-|:-|\n|extraData|Object|否|需要返回给上一个小程序的数据，上一个小程序可在 ``App.vue `` 的 `onShow` 中获取到这份数据|\n|success|function|否|接口调用成功的回调函数|\n|fail|function|否|接口调用失败的回调函数|\n|complete|function|否|接口调用结束的回调函数（调用成功、失败都会执行）|\n**示例代码**\n```js\nuni.navigateBackMiniProgram({\n  extraData: {\n    'data1': 'test'\n  },\n  success(res) {\n    // 返回成功\n  }\n})\n```\n","p":"command\\其他 - 小程序跳转.html"},{"t":"其他/账号信息","d":"\n uni.getAccountInfoSync()\n\n获取当前帐号信息，可以返回小程序的Appid。如果使用了微信小程序的云端插件，还可以反馈插件的id和版本\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|x|x|√|x|√|x|√|\n\n**返回值**\n\n**Object**\n\n帐号信息\n\n| 属性 | 类型 | 说明 |\n| --- | --- | --- |\n| miniProgram | Object| 小程序帐号信息 |\n| plugin | Object | 插件帐号信息（仅在插件中调用时包含这一项） |\n| appName | string| 智能小程序名称 (仅百度小程序支持) |\n| lastAppURL | string| 智能小程序最近一次打开的调起协议 (仅百度小程序支持) |\n| scheme | string| 调起协议的协议头 (仅百度小程序支持) |\n\n\n**miniProgram 的结构**\n\n| 属性 | 类型 | 说明 |\n| --- | --- | --- |\n| appId | string | 小程序 appId |\n\n\n**plugin 的结构**\n\n| 属性 | 类型 | 说明 |\n| --- | --- | --- |\n| appId | string | 插件 appId (百度小程序不支持) |\n| version | string | 插件版本号 |\n\n\n**示例代码**\n\n```js\nconst accountInfo = uni.getAccountInfoSync();\nconsole.log(accountInfo.miniProgram.appId); // 小程序 appId\nconsole.log(accountInfo.plugin.appId); // 插件 appId\nconsole.log(accountInfo.plugin.version); // 插件版本号， 'a.b.c' 这样的形式\n```\n","p":"command\\其他 - 账号信息.html"},{"t":"其他/运动(计步器)","d":" sport 运动\r\n\r\n此功能为计步器，用于获取手机用户的运动步数。\r\n\r\n各平台开发方式暂未统一，使用时需注意用[条件编译](https://uniapp.dcloud.io/platform)调用不同平台的代码。\r\n\r\n- App 平台：需使用原生插件，详见[计步器插件](https://ext.dcloud.net.cn/search?q=%E8%AE%A1%E6%AD%A5%E5%99%A8)\r\n- 微信小程序平台：[规范详情](https://developers.weixin.qq.com/miniprogram/dev/api/open-api/werun/wx.getWeRunData.html)\r\n- 支付宝小程序平台：[规范详情](https://docs.alipay.com/mini/api/gxuu7v)\r\n","p":"command\\其他 - 运动(计步器).html"},{"t":"其他/统计","d":"\n uni.reportAnalytics(string eventName, Object data)\n\n自定义分析数据上报接口。使用前，需要在小程序管理后台自定义分析中新建事件，配置好事件名与字段。。\n\n微信小程序平台[规范详情](https://developers.weixin.qq.com/miniprogram/dev/api/wx.reportAnalytics.html)\nQQ小程序平台[规范详情](https://q.qq.com/wiki/develop/game/API/open-port/port_dataanalysis.htmlqq-reportanalytics)","p":"command\\其他 - 统计.html"},{"t":"其他/卡券","d":"\n 卡券\n\n仅微信小程序、支付宝小程序支持，各平台开发方式暂未统一，使用时需注意用[条件编译](https://uniapp.dcloud.io/platform)调用不同平台的代码。\r\n\r\n- 微信小程序：[规范详情](https://developers.weixin.qq.com/miniprogram/dev/api/wx.openCard.html)\r\n- 支付宝小程序：[规范详情](https://docs.alipay.com/mini/api/card-voucher-ticket)","p":"command\\其他 - 卡券.html"},{"t":"其他/模板消息","d":" addTemplate\r\n\r\n组合模板并添加至帐号下的个人模板库。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|x|x|√|x|√|x|x|\r\n\r\n**请求地址**\r\n\r\n```\r\n/* 微信小程序 */\r\nPOST https://api.weixin.qq.com/cgi-bin/wxopen/template/add?access_token=ACCESS_TOKEN\r\n\r\n/* 百度小程序 */\r\nPOST https://openapi.baidu.com/rest/2.0/smartapp/template/templateadd?access_token=ACCESS_TOKEN\r\n```\r\n\r\n**请求参数**\r\n\r\n| 属性 | 类型  | 必填 | 说明 |\r\n| --- | ----- | --- | --- |\r\n| access_token | string | 是 | 接口调用凭证，微信小程序参考 [getAccessToken](https://developers.weixin.qq.com/miniprogram/dev/api/getAccessToken.html)，百度小程序参考[verify](https://smartprogram.baidu.com/docs/develop/api/open_userinfo/verify/)|\r\n| id | string | 是 | 模板标题id |\r\n| keyword_id_list | Array.&lt;number&gt; | 是 | 开发者自行组合好的模板关键词列表，关键词顺序可以自由搭配（例如[3,5,4]或[4,5,3]），最多支持10个关键词组合 |\r\n\r\n**返回值(Object)**\r\n\r\n| 属性 | 类型 | 说明 |平台|\r\n| --- | --- | --- |--|\r\n| errcode | number | 错误码 ||\r\n| errmsg | string | 错误信息 ||\r\n| template_id | string | 添加至帐号下的模板id，发送APP模板消息时所需 |微信小程序|\r\n| data | Object | {template_id} |百度小程序|\r\n\r\n**Tips**\r\n\r\n* POST 数据格式：JSON。\r\n* access_token 应写在 url 上。\r\n* 本接口应在后端服务器调用。\r\n\r\n**请求数据示例**\r\n```\r\n{\r\n  \"id\": \"xxx\",\r\n  \"keyword_id_list\": [3, 4, 5]\r\n}\r\n```\r\n**返回数据示例**\r\n```\r\n{\r\n    \"errcode\": 0,\r\n    \"errmsg\": \"ok\",\r\n    /* \"template_id\": \"wDYzYZVxobJivW9oMpSCpuvACOfJXQIoKUm0PY397Tc\" //微信小程序 */\r\n    \"data\": { // 百度小程序\r\n        \"template_id\": \"f34178cd598201d9dc8d5c88cd87b44cf7cd0e62NwmP\" \r\n    }\r\n}\r\n```\r\n\r\n deleteTemplate\r\n\r\n删除帐号下的某个模板。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|x|x|√|x|√|x|x|\r\n\r\n**请求地址**\r\n```\r\n/* 微信小程序 */\r\nPOST https://api.weixin.qq.com/cgi-bin/wxopen/template/del?access_token=ACCESS_TOKEN\r\n\r\n/* 百度小程序 */\r\nPOST https://openapi.baidu.com/rest/2.0/smartapp/template/templatedel?access_token=ACCESS_TOKEN\r\n```\r\n\r\n**请求参数**\r\n\r\n| 属性 | 类型 |必填 | 说明 |\r\n| --- | --- | --- | --- | \r\n| access_token | string| 是 |接口调用凭证，微信小程序参考 [getAccessToken](https://developers.weixin.qq.com/miniprogram/dev/api/getAccessToken.html)，百度小程序参考[verify](https://smartprogram.baidu.com/docs/develop/api/open_userinfo/verify/)|\r\n| template_id | string | 是 | 要删除的模板id |\r\n\r\n**返回值（Object）**\r\n\r\n| 属性 | 类型 | 说明 |\r\n| --- | --- | --- |\r\n| errcode | number | 错误码 |\r\n| errmsg | string | 错误信息 |\r\n\r\n**Tips**\r\n\r\n* POST 数据格式：JSON。\r\n* access_token 应写在 url 上。\r\n* 本接口应在后端服务器调用。\r\n\r\n**请求数据示例**\r\n```\r\n{\r\n  \"template_id\": \"wDYzYZVxobJivW9oMpSCpuvACOfJXQIoKUm0PY397Tc\"\r\n}\r\n```\r\n**返回数据示例**\r\n```\r\n{\r\n  \"errcode\": 0,\r\n  \"errmsg\": \"ok\"\r\n}\r\n```\r\n\r\n\r\n getTemplateLibraryById\r\n\r\n获取模板库某个模板标题下关键词库。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|x|x|√|x|√|x|x|\r\n\r\n**请求地址**\r\n\r\n```\r\n/* 微信小程序 */\r\nPOST https://api.weixin.qq.com/cgi-bin/wxopen/template/library/get?access_token=ACCESS_TOKEN\r\n\r\n/* 百度小程序 */\r\nPOST https://openapi.baidu.com/rest/2.0/smartapp/template/libraryget?access_token=ACCESS_TOKEN\r\n```\r\n\r\n**请求参数**\r\n\r\n| 属性 | 类型  | 必填 | 说明 |\r\n| --- | ----- | --- | --- |\r\n| access_token | string | 是 | 接口调用凭证，微信小程序参考 [getAccessToken](https://developers.weixin.qq.com/miniprogram/dev/api/getAccessToken.html)，百度小程序参考[verify](https://smartprogram.baidu.com/docs/develop/api/open_userinfo/verify/)|\r\n| id | string | 是 | 模板标题id |\r\n\r\n**返回值(Object)**\r\n\r\n| 属性 | 类型 | 说明 |平台|\r\n| --- | --- | --- |---|\r\n| errcode | number | 错误码 |微信小程序|\r\n| errmsg | string | 错误信息 |微信小程序|\r\n| id | string | 模板标题 id |微信小程序|\r\n| title | string | 模板标题 |微信小程序|\r\n| keyword_list | Array.&lt;Object&gt; | 关键词列表 |微信小程序|\r\n| errno | number | 错误码 |百度小程序|\r\n| msg | string | 错误信息 |百度小程序|\r\n| data | Object| {id,title,keyword_count,keyword_list} |百度小程序|\r\n\r\n**keyword_list 的结构**\r\n\r\n| 属性 | 类型 | 说明 |\r\n| --- | --- | --- |\r\n| keyword_id | string | 关键词 id，添加模板时需要 |\r\n| name | string | 关键词内容 |\r\n| example | string | 关键词内容对应的示例 |\r\n\r\n\r\n**Tips**\r\n\r\n* POST 数据格式：JSON。\r\n* access_token 应写在 url 上。\r\n* 本接口应在后端服务器调用。\r\n\r\n**请求数据示例**\r\n```\r\n{\r\n  \"id\": \"xxx\"\r\n}\r\n```\r\n**微信小程序返回数据示例**\r\n```\r\n{\r\n    \"errcode\": 0,\r\n    \"errmsg\": \"ok\",\r\n    \"id\": \"AT0002\",\r\n    \"title\": \"购买成功通知\",\r\n    \"keyword_list\": [\r\n        {\r\n            \"keyword_id\": 3,\r\n            \"name\": \"购买地点\",\r\n            \"example\": \"TIT造舰厂\"\r\n        },\r\n        {\r\n            \"keyword_id\": 4,\r\n            \"name\": \"购买时间\",\r\n            \"example\": \"2016年6月6日\"\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\n**百度小程序返回数据示例**\r\n\r\n```js\r\n{\r\n    \"errno\": 0,\r\n    \"msg\": \"success\",\r\n    \"data\": {\r\n        \"id\": \"BD0016\",\r\n        \"title\": \"取票成功通知\",\r\n        \"keyword_count\": 13,\r\n        \"keyword_list\": [\r\n            {\r\n                \"keyword_id\": 1,\r\n                \"name\": \"金额\",\r\n                \"example\": \"300元\"\r\n            },\r\n            {\r\n                \"keyword_id\": 2,\r\n                \"name\": \"订单号\",\r\n                \"example\": \"321254555\"\r\n            }\r\n        ]\r\n    }\r\n}\r\n```\r\n\r\n getTemplateLibraryList\r\n\r\n获取APP模板库标题列表\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|x|x|√|x|√|x|x|\r\n\r\n**请求地址**\r\n\r\n```\r\n/* 微信小程序 */\r\nPOST https://api.weixin.qq.com/cgi-bin/wxopen/template/library/list?access_token=ACCESS_TOKEN\r\n\r\n/* 百度小程序 */\r\nPOST https://openapi.baidu.com/rest/2.0/smartapp/template/librarylist?access_token=ACCESS_TOKEN\r\n```\r\n\r\n**请求参数**\r\n\r\n| 属性 | 类型  | 必填 | 说明 |\r\n| --- | ----- | --- | --- |\r\n| access_token | string | 是 | 接口调用凭证，微信小程序参考 [getAccessToken](https://developers.weixin.qq.com/miniprogram/dev/api/getAccessToken.html)，百度小程序参考[verify](https://smartprogram.baidu.com/docs/develop/api/open_userinfo/verify/)|\r\n| offset | number | 是 | 用于分页，表示从offset开始。从 0 开始计数。 |\r\n| count | number | 是 | 用于分页，表示拉取count条记录。最大为 20。 |\r\n\r\n**返回值(Object)**\r\n\r\n| 属性 | 类型 | 说明 |平台|\r\n| --- | --- | --- |---|\r\n| errcode | number | 错误码 |微信小程序|\r\n| errmsg | string | 错误信息 |微信小程序|\r\n| list | Array.&lt;Object&gt;  | 返回模板库标题列表 |微信小程序|\r\n| total_count | number | 模板库标题总数 |微信小程序|\r\n| errno | number | 错误码 |百度小程序|\r\n| msg | string | 错误信息 |百度小程序|\r\n| data | Object | {total_count,list} |百度小程序|\r\n\r\n**list结构说明**\r\n\r\n|属性|类型|说明|\r\n|---|---|---|\r\n| id | string | 模板标题id（获取模板标题下的关键词库时需要） |\r\n| title | string | 模板标题内容 |\r\n\r\n\r\n**Tips**\r\n\r\n* POST 数据格式：JSON。\r\n* access_token 应写在 url 上。\r\n* 本接口应在后端服务器调用。\r\n\r\n**请求数据示例**\r\n\r\n```\r\n{\r\n  \"offset\": 0,\r\n  \"count\": 5\r\n}\r\n```\r\n**微信小程序返回数据示例**\r\n```\r\n{\r\n    \"errcode\": 0,\r\n    \"errmsg\": \"ok\",\r\n    \"list\": [\r\n        {\"id\": \"AT0002\", \"title\": \"购买成功通知\"},\r\n        {\"id\": \"AT0003\", \"title\": \"交易提醒\"}\r\n    ],\r\n    \"total_count\": 100\r\n}\r\n```\r\n**百度小程序返回数据示例**\r\n```\r\n{\r\n    \"errno\": 0,\r\n    \"msg\": \"success\",\r\n    \"data\": {\r\n        \"total_count\": 100,\r\n        \"list\": [\r\n            {\"id\": \"AT0002\", \"title\": \"购买成功通知\"},\r\n            {\"id\": \"AT0003\", \"title\": \"交易提醒\"}\r\n        ]\r\n    }\r\n}\r\n```\r\n\r\n getTemplateList\r\n\r\n获取帐号下已存在的模板列表。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|x|x|√|x|√|x|x|\r\n\r\n**请求地址**\r\n\r\n```\r\n/* 微信小程序 */\r\nPOST https://api.weixin.qq.com/cgi-bin/wxopen/template/list?access_token=ACCESS_TOKEN\r\n\r\n/* 百度小程序 */\r\nPOST https://openapi.baidu.com/rest/2.0/smartapp/template/templatelist?access_token=ACCESS_TOKEN\r\n```\r\n\r\n**请求参数**\r\n\r\n| 属性 | 类型  | 必填 | 说明 |\r\n| --- | ----- | --- | --- |\r\n| access_token | string | 是 | 接口调用凭证，微信小程序参考 [getAccessToken](https://developers.weixin.qq.com/miniprogram/dev/api/getAccessToken.html)，百度小程序参考[verify](https://smartprogram.baidu.com/docs/develop/api/open_userinfo/verify/)|\r\n| offset | number | 是 | 用于分页，表示从offset开始。从 0 开始计数。 |\r\n| count | number | 是 | 用于分页，表示拉取count条记录。最大为 20。 |\r\n\r\n**返回值(Object)**\r\n\r\n| 属性 | 类型 | 说明 |平台|\r\n| --- | --- | --- |---|\r\n| errcode | number | 错误码 |微信小程序|\r\n| errmsg | string | 错误信息 |微信小程序|\r\n| list | Array.&lt;Object&gt;  | 返回模板列表 |微信小程序|\r\n| errno | number | 错误码 |百度小程序|\r\n| msg | string | 错误信息 |百度小程序|\r\n| data | Object | {total_count, list} |百度小程序|\r\n\r\n**list结构说明**\r\n\r\n|属性|类型|说明|\r\n|---|---|---|\r\n| template_id | string | 添加至帐号下的模板id，发送APP模板消息时所需 |\r\n| title | string | 模板标题 |\r\n| content | string | 模板内容 |\r\n| example | string | 模板内容示例 |\r\n\r\n\r\n**Tips**\r\n\r\n* POST 数据格式：JSON。\r\n* access_token 应写在 url 上。\r\n* 本接口应在后端服务器调用。\r\n\r\n**请求数据示例**\r\n```\r\n{\r\n  \"offset\": 0,\r\n  \"count\": 1\r\n}\r\n```\r\n**微信小程序返回数据示例**\r\n```\r\n{\r\n    \"errcode\": 0,\r\n    \"errmsg\": \"ok\",\r\n    \"list\": [\r\n        {\r\n          \"template_id\": \"wDYzYZVxobJivW9oMpSCpuvACOfJXQIoKUm0PY397Tc\",\r\n          \"title\": \"购买成功通知\",\r\n          \"content\": \"购买地点{{keyword1.DATA}}\\n购买时间{{keyword2.DATA}}\\n物品名称{{keyword3.DATA}}\\n\",\r\n          \"example\": \"购买地点：TIT造舰厂\\n购买时间：2016年6月6日\\n物品名称：咖啡\\n\"\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\n**百度小程序返回数据示例**\r\n\r\n```javascript\r\n{\r\n    \"errno\": 0,\r\n    \"msg\": \"success\",\r\n    \"data\": {\r\n        \"total_count\": 1,\r\n        \"list\": [\r\n            {\r\n                \"template_id\": \"e4313219538c4b0262e3a14a0507000e8bd79e9PTPAz\",\r\n                \"title\": \"续费成功通知\",\r\n                \"content\": \"购买时间{{keyword1.DATA}}\\n物品名称{{keyword2.DATA}}\",\r\n                \"example\": \"购买时间: 2016年6月6日\\n物品名称: 奶茶\"\r\n            }\r\n        ]\r\n    }\r\n}\r\n```\r\n\r\n sendTemplateMessage\r\n\r\n发送模板消息\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|x|x|√|x|√|x|x|\r\n\r\n**请求地址**\r\n\r\n```\r\n/* 微信小程序 */\r\nPOST https://api.weixin.qq.com/cgi-bin/message/wxopen/template/send?access_token=ACCESS_TOKEN\r\n\r\n/* 百度小程序 */\r\nPOST https://openapi.baidu.com/rest/2.0/smartapp/template/templatedel?access_token=ACCESS_TOKEN\r\n```\r\n\r\n\r\n**请求参数**\r\n\r\n| 属性 | 类型  | 必填 | 说明 |支持平台|\r\n| --- | ----- | --- | --- |---|\r\n| access_token | string | 是 | 接口调用凭证，微信小程序参考 [getAccessToken](https://developers.weixin.qq.com/miniprogram/dev/api/getAccessToken.html)，百度小程序参考[verify](https://smartprogram.baidu.com/docs/develop/api/open_userinfo/verify/)||\r\n| touser | string |是 | 接收者（用户）的 openid/swan_id ||\r\n| template_id | string |是 | 所需下发的模板消息的id ||\r\n| page | string |否 | 点击模板卡片后的跳转页面，仅限本APP内的页面。支持带参数,（示例index?foo=bar）。该字段不填则模板无跳转。 ||\r\n| data | Object |否 | 模板内容，不填则下发空模板。具体格式请参考示例。 ||\r\n| form_id | string |是 | 表单提交场景下，为 submit 事件带上的 [formId](/component/form)；支付场景下，为本次支付的 [prepay_id](/api/plugins/payment?id=requestpayment) |微信小程序|\r\n| emphasis_keyword | string |否 | 模板需要放大的关键词，不填则默认无放大 |微信小程序|\r\n| touser_openId | string |是 |接收者open_id|百度小程序|\r\n| scene_id | string |是 |string|百度小程序|\r\n| scene_type | number |是 | 场景type，1：表单；2：百度收银台订单；3:直连订单。 |百度小程序|\r\n| ext | jsonString |否 | '{\"xzh_id\":111,\"category_id\":15}'|百度小程序|\r\n\r\n**返回值(Object)**\r\n\r\n| 属性 | 类型 | 说明 |平台|\r\n| --- | --- | --- |---|\r\n| errcode | number | 错误码 |微信小程序|\r\n| errmsg | string | 错误信息 |微信小程序|\r\n| errno | number | 错误码 |百度小程序|\r\n| msg | string | 错误信息 |百度小程序|\r\n| data | Object | {msg_key} |百度小程序|\r\n\r\n**errcode 的合法值**\r\n\r\n| 值 | 说明 |\r\n| --- | --- |\r\n| 40037 | template_id不正确 |\r\n| 41028 | form_id不正确，或者过期 |\r\n| 41029 | form_id已被使用 |\r\n| 41030 | page不正确 |\r\n| 45009 | 接口调用超过限额（目前默认每个帐号日调用限额为100万） |\r\n\r\n**errno 的合法值**\r\n\r\n| 值\t| 说明\t\t\t\t\t|\r\n| ---\t| ---\t\t\t\t\t|\r\n|2002\t|参数错误\t\t\t\t|\r\n|4001\t|template_id 不正确\t\t|\r\n|4002\t|消息推送接口调用失败\t|\r\n|4003\t|表单无效\t\t\t\t|\r\n|4004\t|场景id无效\t\t\t\t|\r\n|6001\t|无 push 权限\t\t\t|\r\n\r\n\r\n**Tips**\r\n\r\n* POST 数据格式：JSON。\r\n* access_token 应写在 url 上。\r\n* 本接口应在后端服务器调用。\r\n\r\n\r\n**微信小程序请求数据示例**\r\n```\r\n{\r\n    \"touser\": \"OPENID\",\r\n    \"template_id\": \"TEMPLATE_ID\",\r\n    \"page\": \"/pages/index/index\",\r\n    \"form_id\": \"FORMID\",\r\n    \"data\": {\r\n        \"keyword1\": {\r\n            \"value\": \"339208499\"\r\n        },\r\n        \"keyword2\": {\r\n            \"value\": \"2015年01月05日 12:30\"\r\n        }\r\n    },\r\n    \"scene_type\": 1,\r\n    \"emphasis_keyword\": \"keyword1.DATA\"\r\n}\r\n```\r\n**微信小程序返回数据示例**\r\n```\r\n{\r\n    \"errcode\": 0,\r\n    \"errmsg\": \"ok\"\r\n}\r\n```\r\n\r\n**百度小程序请求数据示例**\r\n\r\n```javascript\r\n{\r\n    \"touser\": \"SWAN_ID\",\r\n    \"template_id\": \"TEMPLATE_ID\",\r\n    \"page\": \"/pages/index/index\",\r\n    \"data\": {\r\n        \"keyword1\": {\r\n            \"value\": \"339208499\"\r\n        },\r\n        \"keyword2\": {\r\n            \"value\": \"2015年01月05日 12:30\"\r\n        }\r\n    },\r\n    \"scene_id\": \"123456\"\r\n}\r\n```\r\n\r\n**百度小程序返回数据示例**\r\n```\r\n{\r\n    \"errno\": 0,\r\n    \"msg\": \"success\",\r\n    \"data\": {\r\n        \"msg_key\": 158\r\n    }\r\n}\r\n```\r\n\r\n alipay.open.app.mini.templatemessage.send\r\n\r\n小程序通过 openapi 给用户触达消息，主要为支付后的触达（通过消费id）和用户提交表单后的触达（通过formId）。\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|x|x|x|√|x|x|x|\r\n\r\n**请求地址**\r\n\r\n```\r\nhttps://openapi.alipay.com/gateway.do\r\n```\r\n\r\n**公共请求参数**\r\n\r\n|名称\t\t|类型\t\t|必填\t|描述\t|示例值\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|---|---\t\t|---\t|---\t|---\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|app_id\t\t|String\t\t|是\t\t|支付宝分配给开发者的应用ID|2014072300007148\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|method\t\t|String\t\t|是\t\t|接口名称|alipay.open.app.mini.templatemessage.send\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|format\t\t|String\t\t|是\t\t|仅支持JSON|JSON\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|charset\t|String\t\t|是\t\t|请求使用的编码格式，如utf-8,gbk,gb2312等|utf-8\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|sign_type\t|String\t\t|是\t\t|商户生成签名字符串所使用的签名算法类型，目前支持RSA2|RSA2\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|sign\t\t|String\t\t|是\t\t|商户请求参数的签名串，详见签名|详见示例\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|timestamp\t|String\t\t|是\t\t|发送请求的时间，格式 `yyyy-MM-dd HH:mm:ss`|`2014-07-24 03:07:50`|\r\n|version\t|String\t\t|是\t\t|调用的接口版本，固定为：1.0|1.0\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|app_auth_token|String\t|否\t|详见[应用授权概述](https://doc.open.alipay.com/doc2/detail.htm?treeId=216&articleId=105193&docType=1)|&nbsp;|\r\n|biz_content|String\t|是\t\t|请求参数的集合，最大长度不限，除公共参数外所有请求参数都必须放在这个参数中传递，具体参照各产品快速接入文档\t|&nbsp;|","p":"command\\其他 - 模板消息.html"},{"t":"其他/订阅消息","d":" uni.requestSubscribeMessage(Object object)\n\n \n**平台差异说明**\n\n|App|H5\t|微信小程序\t\t\t\t|支付宝小程序\t|百度小程序\t|字节跳动小程序\t|QQ小程序\t|\n|:-:\t|:-:|:-:\t\t\t\t\t\t\t|:-:\t\t\t\t\t|:-:\t\t\t\t|:-:\t\t\t\t|:-:\t\t\t|\n|x\t\t|x\t|基础库版本>=2.8.2|x\t\t\t\t\t\t|x\t\t\t\t\t|x\t\t\t\t\t|x\t\t\t\t|\n\n**object参数说明**\n\n|属性\t\t\t|类型\t\t\t|默认值\t|必填\t|说明\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|:-:\t\t\t|:-:\t\t\t|:-:\t\t|:-:\t|:-:\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|tmplIds\t|Array\t\t|\t\t\t\t|是\t\t|需要订阅的消息模板的id的集合，一次调用最多可订阅3条消息（注意：iOS客户端7.0.6版本、Android客户端7.0.7版本之后的一次性订阅/长期订阅才支持多个模板消息，iOS客户端7.0.5版本、Android客户端7.0.6版本之前的一次订阅只支持一个模板消息）消息模板id在[微信公众平台(mp.weixin.qq.com)-功能-订阅消息]中配置\t|\n|success\t|function\t|\t\t\t\t|否\t\t|接口调用成功的回调函数\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|fail\t\t\t|function\t|\t\t\t\t|否\t\t|接口调用失败的回调函数\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|complete\t|function\t|\t\t\t\t|否\t\t|接口调用结束的回调函数（调用成功、失败都会执行）\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n\n\n**注意**\n\n- 用户发生点击行为或者发起支付回调后，才可以调起订阅消息界面\n\n**平台说明**\n\n- [微信小程序订阅消息参考文档](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/subscribe-message.html)\n\n\n**object.success 返回值**\n\n|属性\t\t\t\t|类型\t\t|说明\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|:-:\t\t\t\t|:-:\t\t|:-:\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|errMsg\t\t\t|String\t|接口调用成功时errMsg值为'requestSubscribeMessage:ok'\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|TEMPLATE_ID|String| [TEMPLATE_ID]是动态的键，即模板id，值包括'accept'、'reject'、'ban'。'accept'表示用户同意订阅该条id对应的模板消息，'reject'表示用户拒绝订阅该条id对应的模板消息，'ban'表示已被后台封禁。例如 { errMsg: \"requestSubscribeMessage:ok\", zun-LzcQyW-edafCVvzPkK4de2Rllr1fFpw2A_x0oXE: \"accept\"} 表示用户同意订阅zun-LzcQyW-edafCVvzPkK4de2Rllr1fFpw2A_x0oXE这条消息|\n\n**object.fail 返回值**\n\n|属性\t\t|类型\t\t|说明\t\t\t\t\t\t\t\t\t|\n|:-:\t\t|:-:\t\t|:-:\t\t\t\t\t\t\t\t\t|\n|errMsg\t|String\t|接口调用失败错误信息\t|\n|errCode|Number\t|接口调用失败错误码\t\t|\n\n**示例代码**\n```\nuni.requestSubscribeMessage({\n  tmplIds: [''],\n  success (res) { }\n})\n```","p":"command\\其他 - 订阅消息.html"},{"t":"其他/小程序更新","d":" uni.getUpdateManager()\r\n\r\n本API返回**全局唯一**的版本更新管理器对象： updateManager，用于管理小程序更新。\r\n\r\nApp的更新不使用本API，另见文档：\r\n- 整包更新：[https://ask.dcloud.net.cn/article/34972](https://ask.dcloud.net.cn/article/34972)\r\n- 资源文件热更新(wgt升级)：[https://ask.dcloud.net.cn/article/35667](https://ask.dcloud.net.cn/article/35667)\r\n\r\n**平台差异说明**\r\n\r\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|x|x|√|√|√|√|√|\r\n\r\n**updateManager 对象的方法列表：**\r\n\r\n|方法\t\t\t\t|参数\t\t|说明\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\r\n|---|---|---|\r\n|onCheckForUpdate\t|callback\t|当向小程序后台请求完新版本信息，会进行回调\t\t\t\t\t\t|\r\n|onUpdateReady\t\t|callback\t|当新版本下载完成，会进行回调\t\t\t\t\t\t\t\t\t|\r\n|onUpdateFailed\t\t|callback\t|当新版本下载失败，会进行回调\t\t\t\t\t\t\t\t\t|\r\n|applyUpdate\t\t|\t\t\t|当新版本下载完成，调用该方法会强制当前小程序应用上新版本并重启\t|\r\n\r\n**onCheckForUpdate(callback) 回调结果说明：**\r\n\r\n|属性|类型|说明|\r\n|---|---|---|\r\n|hasUpdate|Boolean|是否有新的版本\t|\r\n\r\n**代码示例**\r\n\r\n```javascript\r\nconst updateManager = uni.getUpdateManager();\r\n\r\nupdateManager.onCheckForUpdate(function (res) {\r\n  // 请求完新版本信息的回调\r\n  console.log(res.hasUpdate);\r\n});\r\n\r\nupdateManager.onUpdateReady(function (res) {\r\n  uni.showModal({\r\n    title: '更新提示',\r\n    content: '新版本已经准备好，是否重启应用？',\r\n    success(res) {\r\n      if (res.confirm) {\r\n        // 新的版本已经下载好，调用 applyUpdate 应用新版本并重启\r\n        updateManager.applyUpdate();\r\n      }\r\n    }\r\n  });\r\n\r\n});\r\n\r\nupdateManager.onUpdateFailed(function (res) {\r\n  // 新的版本下载失败\r\n});\r\n```","p":"command\\其他 - 小程序更新.html"},{"t":"其他/调试","d":" uni.setEnableDebug(OBJECT)\n\n设置是否打开调试开关。此开关对正式版也能生效。\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|x|x|√|x|√|x|√|\n\n**OBJECT说明**\n\n| 属性 | 类型 | 必填 | 说明 |平台差异说明|\n| --- | --- | --- | --- | --- |\n| enableDebug | boolean| 是 | 是否打开调试 ||\n| success | function| 否 | 接口调用成功的回调函数 |微信小程序|\n| fail | function| 否 | 接口调用失败的回调函数 |微信小程序|\n| complete | function| 否 | 接口调用结束的回调函数（调用成功、失败都会执行） |微信小程序|\n\n 示例代码\n```js\n// 打开调试\nuni.setEnableDebug({\n    enableDebug: true\n})\n// 关闭调试\nuni.setEnableDebug({\n    enableDebug: false\n})\n```\n","p":"command\\其他 - 调试.html"},{"t":"其他/获取第三方平台数据","d":" uni.getExtConfig(OBJECT)\n\n获取第三方平台自定义的数据字段。\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|x|x|√|x|√|√|x|\n\n**OBJECT参数说明**\n\n| 属性 | 类型 | 默认值 | 必填 | 说明 |\n| --- | --- | --- | --- | --- |\n| success | function |  | 否 | 接口调用成功的回调函数 |\n| fail | function |  | 否 | 接口调用失败的回调函数 |\n| complete | function |  | 否 | 接口调用结束的回调函数（调用成功、失败都会执行） |\n\n**success 回调参数说明**\n\n| 属性 | 类型 | 说明 |\n| --- | --- | --- |\n| extConfig | Object | 第三方平台自定义的数据 |\n\n**Tips**\n\n* 本接口暂时无法通过 `uni.canIUse`判断是否兼容，开发者需要自行判断 `uni.getExtConfig` 是否存在来兼容。\n\n**示例代码**\n\n```\nif (uni.getExtConfig) {\n  uni.getExtConfig({\n    success(res) {\n      console.log(res.extConfig)\n    }\n  })\n}\n```\n\n\n uni.getExtConfigSync()\n\n``uni.getExtConfig`` 的同步版本。\n\n**平台差异说明**\n\n|App|H5|微信小程序|支付宝小程序|百度小程序|字节跳动小程序|QQ小程序|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|x|x|√|x|√|√|x|\n\n**返回值(Object)**\n\n| 属性 | 类型 | 说明 |\n| --- | --- | --- |\n| extConfig | Object | 第三方平台自定义的数据 |\n\n**Tips**\n\n* 本接口暂时无法通过 `uni.canIUse`判断是否兼容，开发者需要自行判断 `uni.getExtConfigSync` 是否存在来兼容。\n\n**代码示例**\n\n```\nconst extConfig = uni.getExtConfigSync ? uni.getExtConfigSync() : {}\nconsole.log(extConfig)\n```","p":"command\\其他 - 获取第三方平台数据.html"}]